2025-08-17 09:02:59.360 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-17 09:02:59.654 +03:00 [INF] Now listening on: https://localhost:7003
2025-08-17 09:02:59.654 +03:00 [INF] Now listening on: http://localhost:5277
2025-08-17 09:02:59.658 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-17 09:02:59.658 +03:00 [INF] Hosting environment: Development
2025-08-17 09:02:59.659 +03:00 [INF] Content root path: C:\Users\hp\Downloads\AmanahChatSystem_Updated\AmanahChatSystem
2025-08-17 09:03:01.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-08-17 09:03:01.326 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 233.2459ms
2025-08-17 09:03:01.416 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-08-17 09:03:01.420 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.0332ms
2025-08-17 09:03:01.448 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-08-17 09:03:01.531 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.85ms
2025-08-17 09:03:02.065 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-08-17 09:03:02.179 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 113.4856ms
2025-08-17 09:03:13.103 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - application/json 353
2025-08-17 09:03:13.109 +03:00 [INF] CORS policy execution failed.
2025-08-17 09:03:13.109 +03:00 [INF] Request origin https://localhost:7003 does not have permission to access the resource.
2025-08-17 09:03:13.171 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-17 09:03:13.175 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-17 09:03:13.176 +03:00 [INF] HTTP POST /api/ChatRooms/Add responded 401 in 62.9448 ms
2025-08-17 09:03:13.177 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - 401 0 null 74.1862ms
2025-08-17 13:46:25.043 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-08-17 13:46:25.111 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 69.8433ms
2025-08-17 13:46:25.171 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-08-17 13:46:25.171 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-08-17 13:46:25.174 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 3.1492ms
2025-08-17 13:46:25.197 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.0812ms
2025-08-17 13:46:25.529 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-08-17 13:46:25.587 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 57.6615ms
2025-08-17 14:12:25.340 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-17 14:12:25.706 +03:00 [INF] Now listening on: https://localhost:7003
2025-08-17 14:12:25.706 +03:00 [INF] Now listening on: http://localhost:5277
2025-08-17 14:12:25.710 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-17 14:12:25.712 +03:00 [INF] Hosting environment: Development
2025-08-17 14:12:25.712 +03:00 [INF] Content root path: C:\Users\hp\Downloads\AmanahChatSystem_Updated\AmanahChatSystem
2025-08-17 14:12:26.027 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-08-17 14:12:26.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 242.8316ms
2025-08-17 14:12:26.422 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-08-17 14:12:26.432 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.9098ms
2025-08-17 14:12:26.450 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-08-17 14:12:26.524 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.7205ms
2025-08-17 14:12:27.209 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-08-17 14:12:27.345 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 136.4316ms
2025-08-17 14:15:47.140 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-08-17 14:15:47.147 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:47.149 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 8.4354ms
2025-08-17 14:15:47.153 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 35
2025-08-17 14:15:47.159 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:47.226 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-17 14:15:47.273 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:15:48.960 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-08-17 14:15:49.148 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-17 14:15:49.174 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 1896.5544ms
2025-08-17 14:15:49.174 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-17 14:15:49.176 +03:00 [INF] HTTP POST /api/Users/Login responded 200 in 2010.6659 ms
2025-08-17 14:15:49.186 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 200 null application/json; charset=utf-8 2032.9823ms
2025-08-17 14:15:49.227 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-08-17 14:15:49.227 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:49.227 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.6886ms
2025-08-17 14:15:49.236 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-08-17 14:15:49.236 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:15:49.236 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:49.236 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:49.237 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.5099ms
2025-08-17 14:15:49.237 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.5281ms
2025-08-17 14:15:49.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-17 14:15:49.255 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:49.264 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:15:49.267 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:49.280 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-08-17 14:15:49.281 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:49.336 +03:00 [INF] HTTP GET /api/Users responded 404 in 54.2382 ms
2025-08-17 14:15:49.337 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 56.7391ms
2025-08-17 14:15:49.338 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-08-17 14:15:49.350 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:15:49.350 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:15:49.361 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-17 14:15:49.361 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:15:49.518 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-17 14:15:49.528 +03:00 [ERR] An error occurred using the connection to database 'AmanahChatDB' on server 'YZN\SQLEXPRESS'.
2025-08-17 14:15:49.539 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:15:49.553 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 191.5696ms
2025-08-17 14:15:49.553 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:15:49.553 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 400 in 285.5766 ms
2025-08-17 14:15:49.553 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 499 null application/json; charset=utf-8 289.6486ms
2025-08-17 14:15:49.572 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:15:49.578 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 216.4559ms
2025-08-17 14:15:49.578 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:15:49.578 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 322.7338 ms
2025-08-17 14:15:49.578 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 499 null application/json; charset=utf-8 323.6865ms
2025-08-17 14:15:51.588 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:15:51.588 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:51.592 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:15:51.592 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:15:51.600 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-08-17 14:15:51.601 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:51.601 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 1.1025ms
2025-08-17 14:15:51.628 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:15:51.638 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-08-17 14:15:51.638 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:51.640 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-08-17 14:15:51.645 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-08-17 14:15:51.645 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 5.9118 ms
2025-08-17 14:15:51.645 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 6.9215ms
2025-08-17 14:15:51.651 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=Hj_FadNfXVidAKXsrcsu5w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZmQ0ZTQ0My0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTU0MzI5NDksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.jQ87ILhrnwE39Oe3z9MqVT-AKT7MU4QWB6LyZqIWq5U - null null
2025-08-17 14:15:51.651 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:51.652 +03:00 [INF] Executing endpoint '/chatHub'
2025-08-17 14:15:51.835 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:15:51.837 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:15:51.842 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 249.7955ms
2025-08-17 14:15:51.842 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:15:51.842 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 254.1426 ms
2025-08-17 14:15:51.843 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 255.1462ms
2025-08-17 14:15:52.963 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - null null
2025-08-17 14:15:52.963 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:52.963 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - 204 null null 0.4592ms
2025-08-17 14:15:52.966 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:15:52.966 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - application/json null
2025-08-17 14:15:52.967 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:52.967 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.3291ms
2025-08-17 14:15:52.968 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:52.969 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:52.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:15:52.971 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:52.972 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:15:52.975 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:15:52.976 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:15:52.991 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:15:52.995 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:15:53.006 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:15:53.014 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:15:53.018 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 41.8735ms
2025-08-17 14:15:53.018 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:15:53.018 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 46.5887 ms
2025-08-17 14:15:53.018 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 47.3174ms
2025-08-17 14:15:53.147 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:15:53.153 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:15:53.159 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 183.8683ms
2025-08-17 14:15:53.160 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:53.160 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d responded 200 in 191.7526 ms
2025-08-17 14:15:53.160 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 193.6499ms
2025-08-17 14:15:54.076 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4?page=1&pageSize=50 - null null
2025-08-17 14:15:54.076 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:54.077 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4?page=1&pageSize=50 - 204 null null 0.6539ms
2025-08-17 14:15:54.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4?page=1&pageSize=50 - application/json null
2025-08-17 14:15:54.081 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:54.082 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:54.082 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:15:54.085 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:15:54.089 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:15:54.090 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:15:54.090 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 7.7672ms
2025-08-17 14:15:54.090 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:54.090 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4 responded 200 in 8.3100 ms
2025-08-17 14:15:54.090 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4?page=1&pageSize=50 - 200 null application/json; charset=utf-8 8.769ms
2025-08-17 14:15:55.073 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99?page=1&pageSize=50 - null null
2025-08-17 14:15:55.073 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:55.074 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99?page=1&pageSize=50 - 204 null null 0.4936ms
2025-08-17 14:15:55.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99?page=1&pageSize=50 - application/json null
2025-08-17 14:15:55.078 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:55.079 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:55.079 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:15:55.084 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:15:55.088 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:15:55.089 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:15:55.089 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 10.0451ms
2025-08-17 14:15:55.089 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:55.089 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99 responded 200 in 11.1183 ms
2025-08-17 14:15:55.090 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99?page=1&pageSize=50 - 200 null application/json; charset=utf-8 12.1ms
2025-08-17 14:15:56.470 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - null null
2025-08-17 14:15:56.470 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:56.470 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - 204 null null 0.4139ms
2025-08-17 14:15:56.474 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - application/json null
2025-08-17 14:15:56.475 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:56.476 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:56.476 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:15:56.480 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:15:56.485 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:15:56.485 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:15:56.486 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 9.725ms
2025-08-17 14:15:56.486 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:56.486 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1 responded 200 in 11.1540 ms
2025-08-17 14:15:56.487 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - 200 null application/json; charset=utf-8 12.262ms
2025-08-17 14:15:57.494 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/277730d1-935d-49bb-8422-4a4e9a5677ff?page=1&pageSize=50 - null null
2025-08-17 14:15:57.495 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:57.495 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/277730d1-935d-49bb-8422-4a4e9a5677ff?page=1&pageSize=50 - 204 null null 0.4752ms
2025-08-17 14:15:57.499 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/277730d1-935d-49bb-8422-4a4e9a5677ff?page=1&pageSize=50 - application/json null
2025-08-17 14:15:57.500 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:15:57.501 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:57.501 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:15:57.504 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:15:57.508 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:15:57.509 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:15:57.509 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 8.2849ms
2025-08-17 14:15:57.509 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:15:57.509 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/277730d1-935d-49bb-8422-4a4e9a5677ff responded 200 in 9.3506 ms
2025-08-17 14:15:57.510 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/277730d1-935d-49bb-8422-4a4e9a5677ff?page=1&pageSize=50 - 200 null application/json; charset=utf-8 10.1618ms
2025-08-17 14:16:00.284 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - application/json null
2025-08-17 14:16:00.284 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:00.285 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:00.285 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:00.288 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:00.292 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:16:00.293 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:00.293 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 8.1024ms
2025-08-17 14:16:00.293 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:00.293 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1 responded 200 in 9.0836 ms
2025-08-17 14:16:00.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - 200 null application/json; charset=utf-8 9.9ms
2025-08-17 14:16:15.565 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:16:15.565 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:15.566 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.7834ms
2025-08-17 14:16:15.573 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:16:15.573 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:15.573 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.4448ms
2025-08-17 14:16:15.590 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:16:15.590 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:15.591 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:15.591 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:16:15.596 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:15.599 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:16:15.600 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:15.600 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:16:15.600 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:16:15.601 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:16:15.601 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:15.602 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 10.9035ms
2025-08-17 14:16:15.602 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:15.602 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 12.1970 ms
2025-08-17 14:16:15.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 13.1173ms
2025-08-17 14:16:15.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:15.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:16:15.608 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:15.608 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 7.8784ms
2025-08-17 14:16:15.608 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:16:15.608 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 8.8299 ms
2025-08-17 14:16:15.609 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 9.3903ms
2025-08-17 14:16:20.247 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:16:20.247 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:20.248 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:16:20.248 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:16:20.260 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:20.265 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:16:20.266 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:20.267 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 18.4937ms
2025-08-17 14:16:20.267 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:16:20.267 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 19.3818 ms
2025-08-17 14:16:20.267 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 20.2597ms
2025-08-17 14:16:21.514 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-08-17 14:16:21.514 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:21.515 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 0.4451ms
2025-08-17 14:16:21.518 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 152
2025-08-17 14:16:21.518 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:21.519 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-08-17 14:16:21.523 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-08-17 14:16:21.532 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:21.534 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 10.3913ms
2025-08-17 14:16:21.534 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-08-17 14:16:21.534 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 200 in 15.3673 ms
2025-08-17 14:16:21.534 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 200 null application/json; charset=utf-8 15.9249ms
2025-08-17 14:16:21.562 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:16:21.562 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:21.563 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.7613ms
2025-08-17 14:16:21.594 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:16:21.595 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:21.595 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:21.595 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:16:21.602 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:21.640 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:16:21.641 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:21.641 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 45.6416ms
2025-08-17 14:16:21.641 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:21.641 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 46.4904 ms
2025-08-17 14:16:21.641 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 46.9905ms
2025-08-17 14:16:24.988 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-08-17 14:16:24.989 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:24.989 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.467ms
2025-08-17 14:16:25.017 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-17 14:16:25.017 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:25.018 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:16:25.018 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-17 14:16:25.025 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-17 14:16:25.026 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:25.026 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 7.5561ms
2025-08-17 14:16:25.026 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:16:25.026 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 8.4281 ms
2025-08-17 14:16:25.026 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 9.107ms
2025-08-17 14:16:26.487 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-17 14:16:26.487 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:26.488 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:16:26.488 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-17 14:16:26.493 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-17 14:16:26.494 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:26.494 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 5.6652ms
2025-08-17 14:16:26.494 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:16:26.494 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 6.7369 ms
2025-08-17 14:16:26.495 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 7.4505ms
2025-08-17 14:16:26.503 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-08-17 14:16:26.504 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:26.504 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.4889ms
2025-08-17 14:16:26.516 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:16:26.516 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:26.517 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:26.517 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:16:26.521 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:26.524 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:16:26.525 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:26.525 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 7.746ms
2025-08-17 14:16:26.525 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:26.525 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 8.9120 ms
2025-08-17 14:16:26.526 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 9.583ms
2025-08-17 14:16:26.545 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-08-17 14:16:26.545 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:26.546 +03:00 [INF] HTTP GET /api/Users responded 404 in 0.4926 ms
2025-08-17 14:16:26.546 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 1.0746ms
2025-08-17 14:16:26.547 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-08-17 14:16:27.100 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:16:27.100 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:27.101 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.4837ms
2025-08-17 14:16:27.130 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:16:27.130 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:27.131 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:27.131 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:16:27.135 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:27.139 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:16:27.140 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:27.140 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 8.9588ms
2025-08-17 14:16:27.140 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:27.141 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 10.4306 ms
2025-08-17 14:16:27.141 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 11.174ms
2025-08-17 14:16:29.447 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - null null
2025-08-17 14:16:29.447 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:29.447 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - 204 null null 0.5235ms
2025-08-17 14:16:29.451 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:16:29.451 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:29.451 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.3524ms
2025-08-17 14:16:29.451 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - application/json null
2025-08-17 14:16:29.452 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:29.452 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:29.453 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:29.455 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:16:29.456 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:29.456 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:16:29.456 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:16:29.461 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:29.463 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:29.468 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:16:29.469 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:29.469 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 12.969ms
2025-08-17 14:16:29.470 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:16:29.470 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 13.8478 ms
2025-08-17 14:16:29.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 14.3522ms
2025-08-17 14:16:29.531 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:16:29.532 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:29.532 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 79.3585ms
2025-08-17 14:16:29.532 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:29.532 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d responded 200 in 80.5235 ms
2025-08-17 14:16:29.532 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 81.0587ms
2025-08-17 14:16:31.873 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4?page=1&pageSize=50 - null null
2025-08-17 14:16:31.874 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:31.874 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4?page=1&pageSize=50 - 204 null null 0.3147ms
2025-08-17 14:16:31.878 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4?page=1&pageSize=50 - application/json null
2025-08-17 14:16:31.878 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:31.879 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:31.879 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:31.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:31.886 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:16:31.887 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:31.887 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 7.8979ms
2025-08-17 14:16:31.887 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:31.887 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4 responded 200 in 8.8979 ms
2025-08-17 14:16:31.888 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/03ac6cea-bfca-41c5-b876-36fa78752db4?page=1&pageSize=50 - 200 null application/json; charset=utf-8 9.6527ms
2025-08-17 14:16:33.912 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-08-17 14:16:33.912 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:33.912 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.5171ms
2025-08-17 14:16:33.916 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 127
2025-08-17 14:16:33.916 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:33.917 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:33.926 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:33.969 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-08-17 14:16:34.030 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-08-17 14:16:34.314 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-08-17 14:16:34.345 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:34.345 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 418.7921ms
2025-08-17 14:16:34.345 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:34.345 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 429.4701 ms
2025-08-17 14:16:34.346 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 429.9548ms
2025-08-17 14:16:35.884 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99?page=1&pageSize=50 - null null
2025-08-17 14:16:35.884 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:35.885 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99?page=1&pageSize=50 - 204 null null 0.3142ms
2025-08-17 14:16:35.889 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99?page=1&pageSize=50 - application/json null
2025-08-17 14:16:35.889 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:35.891 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:35.891 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:35.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:35.899 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:16:35.900 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:35.900 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 9.1835ms
2025-08-17 14:16:35.900 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:35.900 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99 responded 200 in 10.2021 ms
2025-08-17 14:16:35.901 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0fadc9a6-f953-4d8e-8971-e2d6a2ec4f99?page=1&pageSize=50 - 200 null application/json; charset=utf-8 11.7734ms
2025-08-17 14:16:38.156 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 127
2025-08-17 14:16:38.157 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:38.157 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:38.157 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:38.161 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-08-17 14:16:38.164 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-08-17 14:16:38.172 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-08-17 14:16:38.176 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:38.176 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 19.1209ms
2025-08-17 14:16:38.177 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:38.177 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 19.9761 ms
2025-08-17 14:16:38.177 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 20.5356ms
2025-08-17 14:16:40.154 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - null null
2025-08-17 14:16:40.154 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:40.154 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - 204 null null 0.3032ms
2025-08-17 14:16:40.158 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - application/json null
2025-08-17 14:16:40.158 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:40.159 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:40.159 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:40.162 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:40.166 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:16:40.166 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:40.166 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 7.5172ms
2025-08-17 14:16:40.167 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:40.167 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1 responded 200 in 8.5111 ms
2025-08-17 14:16:40.167 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/333d0852-2d03-4bce-8025-f4ade5dc45e1?page=1&pageSize=50 - 200 null application/json; charset=utf-8 9.0215ms
2025-08-17 14:16:42.596 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-08-17 14:16:42.596 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:42.597 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.3021ms
2025-08-17 14:16:42.600 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 127
2025-08-17 14:16:42.600 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:42.601 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:42.601 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:42.605 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-08-17 14:16:42.608 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-08-17 14:16:42.635 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p21='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset), @p26='?' (DbType = Guid), @p25='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [ActionBy] = @p19, [LastActionDate] = @p20
OUTPUT 1
WHERE [Id] = @p21;
UPDATE [RoomMembers] SET [ActionBy] = @p22, [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
UPDATE [Users] SET [LastActionDate] = @p25
OUTPUT 1
WHERE [Id] = @p26;
2025-08-17 14:16:42.637 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:42.637 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 36.2901ms
2025-08-17 14:16:42.637 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:42.637 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 37.3576 ms
2025-08-17 14:16:42.638 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 37.9491ms
2025-08-17 14:16:44.093 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/d16ba523-2ede-4797-abe0-426f75f8e264?page=1&pageSize=50 - null null
2025-08-17 14:16:44.093 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:44.093 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/d16ba523-2ede-4797-abe0-426f75f8e264?page=1&pageSize=50 - 204 null null 0.6379ms
2025-08-17 14:16:44.097 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/d16ba523-2ede-4797-abe0-426f75f8e264?page=1&pageSize=50 - application/json null
2025-08-17 14:16:44.097 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:44.098 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:44.098 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:44.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:44.105 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:16:44.106 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:44.106 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 7.6674ms
2025-08-17 14:16:44.106 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:44.106 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/d16ba523-2ede-4797-abe0-426f75f8e264 responded 200 in 8.4801 ms
2025-08-17 14:16:44.106 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/d16ba523-2ede-4797-abe0-426f75f8e264?page=1&pageSize=50 - 200 null application/json; charset=utf-8 9.0909ms
2025-08-17 14:16:45.629 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 127
2025-08-17 14:16:45.629 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:45.630 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:45.630 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:45.633 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-08-17 14:16:45.636 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-08-17 14:16:45.656 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p21='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = DateTimeOffset), @p23='?' (DbType = Guid), @p22='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [ActionBy] = @p19, [LastActionDate] = @p20
OUTPUT 1
WHERE [Id] = @p21;
UPDATE [Users] SET [LastActionDate] = @p22
OUTPUT 1
WHERE [Id] = @p23;
2025-08-17 14:16:45.659 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:45.659 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 28.73ms
2025-08-17 14:16:45.659 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:45.659 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 29.9206 ms
2025-08-17 14:16:45.659 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 30.3962ms
2025-08-17 14:16:46.770 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - null null
2025-08-17 14:16:46.770 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:46.770 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - 204 null null 0.29ms
2025-08-17 14:16:46.773 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - application/json null
2025-08-17 14:16:46.774 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:46.775 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:46.775 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:46.778 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:46.783 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:16:46.784 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:46.784 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 9.1345ms
2025-08-17 14:16:46.784 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:16:46.784 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d responded 200 in 10.4719 ms
2025-08-17 14:16:46.784 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/fbb1c98f-0649-4048-b82c-6c3df60d916d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 11.0451ms
2025-08-17 14:16:48.436 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-08-17 14:16:48.436 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:48.436 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.2541ms
2025-08-17 14:16:48.439 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 124
2025-08-17 14:16:48.440 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:48.440 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:48.440 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:16:48.444 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-08-17 14:16:48.447 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-08-17 14:16:48.472 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset), @p26='?' (DbType = Guid), @p25='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [RoomMembers] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
UPDATE [Users] SET [LastActionDate] = @p25
OUTPUT 1
WHERE [Id] = @p26;
2025-08-17 14:16:48.474 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:48.475 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 34.5242ms
2025-08-17 14:16:48.475 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-08-17 14:16:48.475 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 35.0795 ms
2025-08-17 14:16:48.475 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 35.7824ms
2025-08-17 14:16:59.163 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:16:59.163 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:59.163 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.371ms
2025-08-17 14:16:59.168 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:16:59.169 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:59.169 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.4771ms
2025-08-17 14:16:59.189 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:16:59.190 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:59.191 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:59.191 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:16:59.194 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:59.197 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:16:59.197 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:16:59.197 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:16:59.198 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:59.198 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:16:59.198 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:16:59.198 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 7.115ms
2025-08-17 14:16:59.199 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:16:59.199 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 8.5122 ms
2025-08-17 14:16:59.199 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 9.3504ms
2025-08-17 14:16:59.201 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:16:59.203 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:16:59.203 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:16:59.204 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 5.2499ms
2025-08-17 14:16:59.204 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:16:59.204 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 6.3302 ms
2025-08-17 14:16:59.204 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 7.0786ms
2025-08-17 14:17:01.523 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:01.524 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:01.524 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:01.525 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:01.529 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:01.532 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:17:01.533 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:01.533 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 8.6739ms
2025-08-17 14:17:01.533 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:01.534 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 9.7286 ms
2025-08-17 14:17:01.534 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 10.8525ms
2025-08-17 14:17:02.844 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:02.845 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:02.846 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:02.846 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:17:02.849 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:02.852 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:17:02.852 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:02.853 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 6.9526ms
2025-08-17 14:17:02.853 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:02.853 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 8.1500 ms
2025-08-17 14:17:02.853 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 9.0563ms
2025-08-17 14:17:02.866 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:02.866 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:02.867 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:02.867 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:02.871 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:02.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:17:02.874 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:02.874 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 6.6706ms
2025-08-17 14:17:02.874 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:02.874 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 7.8082 ms
2025-08-17 14:17:02.875 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 8.5007ms
2025-08-17 14:17:04.101 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:04.101 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:04.101 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:04.101 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:04.104 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:04.105 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:17:04.106 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:04.106 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 4.5249ms
2025-08-17 14:17:04.106 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:04.106 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 5.1921 ms
2025-08-17 14:17:04.106 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 5.5664ms
2025-08-17 14:17:16.340 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Add - null null
2025-08-17 14:17:16.340 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:16.340 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Add - 204 null null 0.3272ms
2025-08-17 14:17:16.343 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - application/json 290
2025-08-17 14:17:16.344 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:16.344 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI)'
2025-08-17 14:17:16.352 +03:00 [INF] Route matched with {action = "Add", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsync(Application.Commands.ChatRooms.AddChatRoom.AddChatRoomRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:17:16.406 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:16.441 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTimeOffset), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Boolean), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTimeOffset), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (DbType = Guid), @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTimeOffset), @p32='?' (Size = 4000), @p33='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ActionBy], [Description], [IsDeleted], [LastActionDate], [Metadata], [Title], [Type], [UniqueDirectKey], [WorkspaceId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO [RoomMembers] ([Id], [ActionBy], [ChatRoomId], [IsAdmin], [IsDeleted], [LastActionDate], [Metadata], [UserId])
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25),
(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
2025-08-17 14:17:16.443 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:16.443 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI) in 91.0201ms
2025-08-17 14:17:16.443 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI)'
2025-08-17 14:17:16.443 +03:00 [INF] HTTP POST /api/ChatRooms/Add responded 200 in 99.4172 ms
2025-08-17 14:17:16.443 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - 200 null application/json; charset=utf-8 99.8383ms
2025-08-17 14:17:16.468 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:17:16.468 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:16.468 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.2003ms
2025-08-17 14:17:16.473 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:17:16.473 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:16.473 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.3688ms
2025-08-17 14:17:16.499 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:16.500 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:16.500 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:16.500 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:17:16.503 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:16.507 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:17:16.507 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:16.507 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 7.0393ms
2025-08-17 14:17:16.507 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:16.508 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 7.9125 ms
2025-08-17 14:17:16.508 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 8.4316ms
2025-08-17 14:17:16.515 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:16.515 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:16.516 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:16.516 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:16.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:16.520 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:17:16.520 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:16.520 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 4.461ms
2025-08-17 14:17:16.520 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:16.520 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 5.0546 ms
2025-08-17 14:17:16.520 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 5.4693ms
2025-08-17 14:17:20.793 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:20.793 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:20.795 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:20.795 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:17:20.798 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:20.801 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:17:20.802 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:20.802 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 6.9872ms
2025-08-17 14:17:20.802 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:20.802 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 8.9010 ms
2025-08-17 14:17:20.803 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 9.9009ms
2025-08-17 14:17:21.951 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406?page=1&pageSize=50 - null null
2025-08-17 14:17:21.951 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:21.952 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406?page=1&pageSize=50 - 204 null null 0.972ms
2025-08-17 14:17:21.957 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:17:21.957 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406?page=1&pageSize=50 - application/json null
2025-08-17 14:17:21.957 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:21.957 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:21.957 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.3796ms
2025-08-17 14:17:21.958 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:17:21.958 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:17:21.961 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:21.961 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:21.962 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:21.962 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:21.968 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:21.971 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:21.978 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:17:21.979 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:21.979 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 17.4125ms
2025-08-17 14:17:21.980 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:21.980 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 18.3173 ms
2025-08-17 14:17:21.980 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 18.814ms
2025-08-17 14:17:22.037 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:17:22.038 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:22.038 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 79.5037ms
2025-08-17 14:17:22.038 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:17:22.038 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406 responded 200 in 80.5110 ms
2025-08-17 14:17:22.038 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406?page=1&pageSize=50 - 200 null application/json; charset=utf-8 80.9488ms
2025-08-17 14:17:23.306 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByChatRoom?chatRoomId=30b46281-0194-4d27-803d-330550b42406&pageNumber=1&pageSize=50 - null null
2025-08-17 14:17:23.307 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:23.307 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByChatRoom?chatRoomId=30b46281-0194-4d27-803d-330550b42406&pageNumber=1&pageSize=50 - 204 null null 0.2679ms
2025-08-17 14:17:23.310 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByChatRoom?chatRoomId=30b46281-0194-4d27-803d-330550b42406&pageNumber=1&pageSize=50 - application/json null
2025-08-17 14:17:23.310 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:23.310 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByChatRoom (ChatSystem.UI)'
2025-08-17 14:17:23.315 +03:00 [INF] Route matched with {action = "GetUsersByChatRoom", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByChatRoom(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:23.330 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:23.359 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[ChatRoomId] = @__request_ChatRoomId_0
2025-08-17 14:17:23.363 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:23.363 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByChatRoom (ChatSystem.UI) in 48.0758ms
2025-08-17 14:17:23.363 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByChatRoom (ChatSystem.UI)'
2025-08-17 14:17:23.363 +03:00 [INF] HTTP GET /api/Users/GetUsersByChatRoom responded 200 in 53.5920 ms
2025-08-17 14:17:23.363 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByChatRoom?chatRoomId=30b46281-0194-4d27-803d-330550b42406&pageNumber=1&pageSize=50 - 200 null application/json; charset=utf-8 53.9166ms
2025-08-17 14:17:30.588 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Members - null null
2025-08-17 14:17:30.589 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:30.589 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Members - 204 null null 0.2673ms
2025-08-17 14:17:30.592 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/ChatRooms/Members - application/json 137
2025-08-17 14:17:30.592 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:30.593 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddMemberAsync (ChatSystem.UI)'
2025-08-17 14:17:30.599 +03:00 [INF] Route matched with {action = "AddMember", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMemberAsync(Application.Commands.ChatRooms.AddRoomMember.AddRoomMembersRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:17:30.624 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__8__locals1_request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__8__locals1_request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:30.701 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__userIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] IN (
    SELECT [u0].[value]
    FROM OPENJSON(@__userIds_0) WITH ([value] uniqueidentifier '$') AS [u0]
)
2025-08-17 14:17:30.723 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__8__locals1_request_ChatRoomId_0='?' (DbType = Guid), @__userIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[UserId]
FROM [RoomMembers] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[ChatRoomId] = @__8__locals1_request_ChatRoomId_0 AND [r].[UserId] IN (
    SELECT [u].[value]
    FROM OPENJSON(@__userIds_1) WITH ([value] uniqueidentifier '$') AS [u]
)
2025-08-17 14:17:30.726 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:30.728 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.AddMemberAsync (ChatSystem.UI) in 128.4407ms
2025-08-17 14:17:30.728 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddMemberAsync (ChatSystem.UI)'
2025-08-17 14:17:30.728 +03:00 [INF] HTTP POST /api/ChatRooms/Members responded 400 in 135.7749 ms
2025-08-17 14:17:30.728 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/ChatRooms/Members - 400 null application/json; charset=utf-8 136.2246ms
2025-08-17 14:17:33.716 +03:00 [INF] Executed endpoint '/chatHub'
2025-08-17 14:17:33.716 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 102064.7194 ms
2025-08-17 14:17:33.716 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=Hj_FadNfXVidAKXsrcsu5w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZmQ0ZTQ0My0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTU0MzI5NDksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.jQ87ILhrnwE39Oe3z9MqVT-AKT7MU4QWB6LyZqIWq5U - 200 null null 102065.1637ms
2025-08-17 14:17:34.024 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:17:34.024 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:34.024 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.2644ms
2025-08-17 14:17:34.036 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-08-17 14:17:34.036 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:34.036 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.2525ms
2025-08-17 14:17:34.055 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-08-17 14:17:34.055 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:34.055 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:34.055 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:34.055 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-08-17 14:17:34.055 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:34.056 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:17:34.056 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-08-17 14:17:34.056 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 0.6858 ms
2025-08-17 14:17:34.056 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 1.0101ms
2025-08-17 14:17:34.060 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:34.066 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=lX8fj7nipHcfi3fx8p0m7Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZmQ0ZTQ0My0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTU0MzI5NDksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.jQ87ILhrnwE39Oe3z9MqVT-AKT7MU4QWB6LyZqIWq5U - null null
2025-08-17 14:17:34.066 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:34.066 +03:00 [INF] Executing endpoint '/chatHub'
2025-08-17 14:17:34.095 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:17:34.095 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:34.096 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 40.0533ms
2025-08-17 14:17:34.096 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:34.096 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 40.6237 ms
2025-08-17 14:17:34.096 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 41.0682ms
2025-08-17 14:17:34.897 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406?page=1&pageSize=50 - null null
2025-08-17 14:17:34.897 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:34.898 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406?page=1&pageSize=50 - 204 null null 0.275ms
2025-08-17 14:17:34.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406?page=1&pageSize=50 - application/json null
2025-08-17 14:17:34.902 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:34.902 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:17:34.903 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-08-17 14:17:34.905 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:17:34.905 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:34.905 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.2537ms
2025-08-17 14:17:34.909 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:34.909 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:34.909 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:34.910 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:34.910 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:34.920 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:34.929 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:17:34.930 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:34.930 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 19.748ms
2025-08-17 14:17:34.930 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:34.930 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 20.6458 ms
2025-08-17 14:17:34.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 21.1975ms
2025-08-17 14:17:34.979 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-08-17 14:17:34.980 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:34.980 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 77.0981ms
2025-08-17 14:17:34.980 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-08-17 14:17:34.980 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406 responded 200 in 77.9909 ms
2025-08-17 14:17:34.980 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/30b46281-0194-4d27-803d-330550b42406?page=1&pageSize=50 - 200 null application/json; charset=utf-8 78.4255ms
2025-08-17 14:17:35.554 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByChatRoom?chatRoomId=30b46281-0194-4d27-803d-330550b42406&pageNumber=1&pageSize=50 - null null
2025-08-17 14:17:35.554 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:35.555 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByChatRoom?chatRoomId=30b46281-0194-4d27-803d-330550b42406&pageNumber=1&pageSize=50 - 204 null null 0.3157ms
2025-08-17 14:17:35.559 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByChatRoom?chatRoomId=30b46281-0194-4d27-803d-330550b42406&pageNumber=1&pageSize=50 - application/json null
2025-08-17 14:17:35.559 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:35.560 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByChatRoom (ChatSystem.UI)'
2025-08-17 14:17:35.560 +03:00 [INF] Route matched with {action = "GetUsersByChatRoom", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByChatRoom(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:35.566 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:35.578 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[ChatRoomId] = @__request_ChatRoomId_0
2025-08-17 14:17:35.579 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:35.579 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByChatRoom (ChatSystem.UI) in 18.6464ms
2025-08-17 14:17:35.579 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByChatRoom (ChatSystem.UI)'
2025-08-17 14:17:35.579 +03:00 [INF] HTTP GET /api/Users/GetUsersByChatRoom responded 200 in 19.4086 ms
2025-08-17 14:17:35.579 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByChatRoom?chatRoomId=30b46281-0194-4d27-803d-330550b42406&pageNumber=1&pageSize=50 - 200 null application/json; charset=utf-8 20.0001ms
2025-08-17 14:17:44.127 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:17:44.127 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:44.127 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.277ms
2025-08-17 14:17:44.135 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:17:44.135 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:44.135 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.2385ms
2025-08-17 14:17:44.157 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:44.157 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:44.158 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:44.158 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:17:44.160 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:44.163 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-17 14:17:44.163 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:44.164 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 5.6909ms
2025-08-17 14:17:44.164 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:17:44.164 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 6.4438 ms
2025-08-17 14:17:44.164 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 6.8522ms
2025-08-17 14:17:44.165 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:44.166 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:44.166 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:44.166 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:44.168 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:44.170 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:17:44.170 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:44.170 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 4.3291ms
2025-08-17 14:17:44.170 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:44.170 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 4.7855 ms
2025-08-17 14:17:44.170 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 5.1032ms
2025-08-17 14:17:45.498 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:17:45.498 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:45.498 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:45.499 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:17:45.501 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:45.503 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-17 14:17:45.504 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:45.504 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 5.186ms
2025-08-17 14:17:45.504 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-17 14:17:45.504 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 5.8696 ms
2025-08-17 14:17:45.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 6.355ms
2025-08-17 14:17:46.270 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-08-17 14:17:46.270 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:46.270 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.3637ms
2025-08-17 14:17:46.313 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-17 14:17:46.313 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:46.314 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:17:46.314 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-17 14:17:46.319 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-17 14:17:46.320 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:17:46.320 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 5.7597ms
2025-08-17 14:17:46.320 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:17:46.320 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 6.5497 ms
2025-08-17 14:17:46.320 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 6.9566ms
2025-08-17 14:17:52.566 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces/Add - null null
2025-08-17 14:17:52.566 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:52.566 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces/Add - 204 null null 0.2997ms
2025-08-17 14:17:52.569 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Workspaces/Add - application/json 60
2025-08-17 14:17:52.571 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:17:52.572 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.AddAsync (ChatSystem.UI)'
2025-08-17 14:17:52.581 +03:00 [INF] Route matched with {action = "Add", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsync(Application.Commands.Workspaces.AddWorkspace.AddWorkspaceRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-17 14:17:52.604 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__workspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__userId_0 AND [u].[WorkspaceId] = @__workspaceId_1 AND [u].[IsAdmin] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:17:52.607 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-08-17 14:17:52.611 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-08-17 14:17:52.611 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.AddAsync (ChatSystem.UI) in 30.0814ms
2025-08-17 14:17:52.611 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.AddAsync (ChatSystem.UI)'
2025-08-17 14:17:52.611 +03:00 [INF] HTTP POST /api/Workspaces/Add responded 403 in 40.0237 ms
2025-08-17 14:17:52.612 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Workspaces/Add - 403 0 null 42.3064ms
2025-08-17 14:18:26.580 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-08-17 14:18:26.580 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:26.580 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 0.3088ms
2025-08-17 14:18:26.584 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 35
2025-08-17 14:18:26.585 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:26.585 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-17 14:18:26.585 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-17 14:18:26.598 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-08-17 14:18:26.599 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-17 14:18:26.600 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 14.6568ms
2025-08-17 14:18:26.600 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-17 14:18:26.600 +03:00 [INF] HTTP POST /api/Users/Login responded 200 in 15.0662 ms
2025-08-17 14:18:26.600 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 200 null application/json; charset=utf-8 15.7696ms
2025-08-17 14:18:26.683 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-08-17 14:18:26.684 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:26.684 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.1969ms
2025-08-17 14:18:26.713 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-08-17 14:18:26.713 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-17 14:18:26.714 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:26.714 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:26.714 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.2846ms
2025-08-17 14:18:26.714 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.2474ms
2025-08-17 14:18:26.745 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-17 14:18:26.746 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:26.746 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:18:26.746 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-17 14:18:26.747 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-08-17 14:18:26.747 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:26.748 +03:00 [INF] HTTP GET /api/Users responded 404 in 0.3787 ms
2025-08-17 14:18:26.748 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 0.8447ms
2025-08-17 14:18:26.748 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-08-17 14:18:26.750 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-17 14:18:26.750 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:26.751 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:18:26.751 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-17 14:18:26.755 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-17 14:18:26.756 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:18:26.756 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 9.5191ms
2025-08-17 14:18:26.756 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:18:26.756 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 10.3422 ms
2025-08-17 14:18:26.756 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 10.7361ms
2025-08-17 14:18:26.759 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:18:26.808 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:18:26.809 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 58.4899ms
2025-08-17 14:18:26.809 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-17 14:18:26.810 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 400 in 59.6429 ms
2025-08-17 14:18:26.810 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 499 null application/json; charset=utf-8 60.2291ms
2025-08-17 14:18:28.840 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-17 14:18:28.840 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:28.841 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:18:28.841 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-17 14:18:28.851 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-17 14:18:28.852 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 14:18:28.853 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 11.67ms
2025-08-17 14:18:28.853 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-17 14:18:28.853 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 12.7833 ms
2025-08-17 14:18:28.853 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 13.4315ms
2025-08-17 14:18:41.716 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces/Add - null null
2025-08-17 14:18:41.716 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:41.716 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces/Add - 204 null null 0.2863ms
2025-08-17 14:18:41.721 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Workspaces/Add - application/json 52
2025-08-17 14:18:41.721 +03:00 [INF] CORS policy execution successful.
2025-08-17 14:18:41.721 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.AddAsync (ChatSystem.UI)'
2025-08-17 14:18:41.722 +03:00 [INF] Route matched with {action = "Add", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsync(Application.Commands.Workspaces.AddWorkspace.AddWorkspaceRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-17 14:18:41.732 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__workspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__userId_0 AND [u].[WorkspaceId] = @__workspaceId_1 AND [u].[IsAdmin] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-17 14:18:41.733 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-08-17 14:18:41.733 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-08-17 14:18:41.734 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.AddAsync (ChatSystem.UI) in 11.9098ms
2025-08-17 14:18:41.734 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.AddAsync (ChatSystem.UI)'
2025-08-17 14:18:41.734 +03:00 [INF] HTTP POST /api/Workspaces/Add responded 403 in 12.6750 ms
2025-08-17 14:18:41.734 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Workspaces/Add - 403 0 null 13.302ms
2025-08-17 14:19:07.440 +03:00 [INF] Executed endpoint '/chatHub'
2025-08-17 14:19:07.440 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 93374.6849 ms
2025-08-17 14:19:07.441 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=lX8fj7nipHcfi3fx8p0m7Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZmQ0ZTQ0My0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTU0MzI5NDksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.jQ87ILhrnwE39Oe3z9MqVT-AKT7MU4QWB6LyZqIWq5U - 200 null null 93375.1003ms
