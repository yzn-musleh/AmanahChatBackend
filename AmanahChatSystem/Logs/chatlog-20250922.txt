2025-09-22 09:19:50.337 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:19:58.965 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:19:59.085 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:22:52.717 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:22:53.061 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:22:53.078 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:22:53.080 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:22:53.081 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:22:53.095 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-22 09:22:53.106 +03:00 [INF] Applying migration '20250922061959_AddingApiKey'.
2025-09-22 09:22:53.186 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Workspaces] ADD [TenantId] uniqueidentifier NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
2025-09-22 09:22:53.191 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenant] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Tenant] PRIMARY KEY ([Id])
);
2025-09-22 09:22:53.197 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AccessKeys] (
    [Id] uniqueidentifier NOT NULL,
    [WorkspaceId] uniqueidentifier NOT NULL,
    [HashedApiKey] nvarchar(max) NOT NULL,
    [IssuedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_AccessKeys] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AccessKeys_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AccessKeys_Workspaces_WorkspaceId] FOREIGN KEY ([WorkspaceId]) REFERENCES [Workspaces] ([Id]) ON DELETE CASCADE
);
2025-09-22 09:22:53.226 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workspaces_TenantId] ON [Workspaces] ([TenantId]);
2025-09-22 09:22:53.228 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AccessKeys_TenantId] ON [AccessKeys] ([TenantId]);
2025-09-22 09:22:53.230 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AccessKeys_WorkspaceId] ON [AccessKeys] ([WorkspaceId]);
2025-09-22 09:22:53.247 +03:00 [ERR] Failed executing DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Workspaces] ADD CONSTRAINT [FK_Workspaces_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE;
2025-09-22 09:28:02.804 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:28:02.934 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:28:09.068 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:28:09.311 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:28:09.327 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:28:09.328 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:28:09.329 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:28:09.347 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-22 09:28:09.355 +03:00 [INF] Applying migration '20250922061959_AddingApiKey'.
2025-09-22 09:28:09.398 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Workspaces] ADD [TenantId] uniqueidentifier NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
2025-09-22 09:28:09.402 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenant] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Tenant] PRIMARY KEY ([Id])
);
2025-09-22 09:28:09.404 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AccessKeys] (
    [Id] uniqueidentifier NOT NULL,
    [WorkspaceId] uniqueidentifier NOT NULL,
    [HashedApiKey] nvarchar(max) NOT NULL,
    [IssuedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_AccessKeys] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AccessKeys_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AccessKeys_Workspaces_WorkspaceId] FOREIGN KEY ([WorkspaceId]) REFERENCES [Workspaces] ([Id]) ON DELETE CASCADE
);
2025-09-22 09:28:09.409 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workspaces_TenantId] ON [Workspaces] ([TenantId]);
2025-09-22 09:28:09.411 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AccessKeys_TenantId] ON [AccessKeys] ([TenantId]);
2025-09-22 09:28:09.412 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AccessKeys_WorkspaceId] ON [AccessKeys] ([WorkspaceId]);
2025-09-22 09:28:09.419 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Workspaces] ADD CONSTRAINT [FK_Workspaces_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE CASCADE;
2025-09-22 09:31:55.511 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:31:55.667 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:31:56.069 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:31:56.087 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:31:56.103 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-22 09:32:06.510 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:32:06.651 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:32:07.242 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:32:07.259 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:32:07.270 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-22 09:33:09.237 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:33:09.362 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:33:16.409 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:33:16.646 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:33:16.663 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:33:16.665 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:33:16.665 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:33:16.675 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-22 09:33:16.684 +03:00 [INF] Applying migration '20250922063309_AddingApiKey'.
2025-09-22 09:33:16.746 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Workspaces] ADD [TenantId] uniqueidentifier NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
2025-09-22 09:33:16.751 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenant] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Tenant] PRIMARY KEY ([Id])
);
2025-09-22 09:33:16.757 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AccessKeys] (
    [Id] uniqueidentifier NOT NULL,
    [WorkspaceId] uniqueidentifier NOT NULL,
    [HashedApiKey] nvarchar(max) NOT NULL,
    [IssuedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_AccessKeys] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AccessKeys_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_AccessKeys_Workspaces_WorkspaceId] FOREIGN KEY ([WorkspaceId]) REFERENCES [Workspaces] ([Id]) ON DELETE CASCADE
);
2025-09-22 09:33:16.765 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workspaces_TenantId] ON [Workspaces] ([TenantId]);
2025-09-22 09:33:16.768 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AccessKeys_TenantId] ON [AccessKeys] ([TenantId]);
2025-09-22 09:33:16.769 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AccessKeys_WorkspaceId] ON [AccessKeys] ([WorkspaceId]);
2025-09-22 09:33:16.815 +03:00 [ERR] Failed executing DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Workspaces] ADD CONSTRAINT [FK_Workspaces_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE NO ACTION;
2025-09-22 09:35:52.720 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:35:59.875 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:36:00.116 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:36:03.202 +03:00 [INF] Executed DbCommand (3,064ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AmanahChatDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-09-22 09:36:03.267 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AmanahChatDB];
2025-09-22 09:36:24.777 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:36:25.010 +03:00 [WRN] Entity 'Workspace' has a global query filter defined and is the required end of a relationship with the entity 'AccessKeys'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-09-22 09:36:25.204 +03:00 [INF] Executed DbCommand (160ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AmanahChatDB];
2025-09-22 09:36:25.269 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AmanahChatDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-09-22 09:36:25.287 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:36:25.327 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-09-22 09:36:25.329 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:36:25.338 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:36:25.348 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-22 09:36:25.359 +03:00 [INF] Applying migration '20250525104104_initial-chat-DB'.
2025-09-22 09:36:25.394 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ChatRooms] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [IsDeleted] bit NOT NULL,
    [LastActionDate] datetimeoffset NOT NULL,
    [ActionBy] uniqueidentifier NULL,
    [Metadata] nvarchar(max) NULL,
    CONSTRAINT [PK_ChatRooms] PRIMARY KEY ([Id])
);
2025-09-22 09:36:25.397 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [FirstName] nvarchar(max) NOT NULL,
    [LastName] nvarchar(max) NOT NULL,
    [ProfileImageUrl] nvarchar(max) NULL,
    [ConnectId] nvarchar(max) NULL,
    [IsDeleted] bit NOT NULL,
    [LastActionDate] datetimeoffset NOT NULL,
    [ActionBy] uniqueidentifier NULL,
    [Metadata] nvarchar(max) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-09-22 09:36:25.401 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RoomMembers] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [ChatRoomId] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [IsAdmin] bit NOT NULL,
    [IsDeleted] bit NOT NULL,
    [LastActionDate] datetimeoffset NOT NULL,
    [ActionBy] uniqueidentifier NULL,
    [Metadata] nvarchar(max) NULL,
    CONSTRAINT [PK_RoomMembers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RoomMembers_ChatRooms_ChatRoomId] FOREIGN KEY ([ChatRoomId]) REFERENCES [ChatRooms] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_RoomMembers_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-09-22 09:36:25.404 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ChatMessages] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [IsDeleted] bit NOT NULL,
    [LastActionDate] datetimeoffset NOT NULL,
    [ActionBy] uniqueidentifier NULL,
    [RoomMemberId] uniqueidentifier NOT NULL,
    [Message] nvarchar(max) NULL,
    [FilePath] nvarchar(max) NULL,
    [IsRead] bit NOT NULL,
    [Metadata] nvarchar(max) NULL,
    CONSTRAINT [PK_ChatMessages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ChatMessages_RoomMembers_RoomMemberId] FOREIGN KEY ([RoomMemberId]) REFERENCES [RoomMembers] ([Id]) ON DELETE NO ACTION
);
2025-09-22 09:36:25.408 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ChatMessageReplies] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [ChatMessageId] uniqueidentifier NOT NULL,
    [IsDeleted] bit NOT NULL,
    [LastActionDate] datetimeoffset NOT NULL,
    [ActionBy] uniqueidentifier NULL,
    [RoomMemberId] uniqueidentifier NOT NULL,
    [Message] nvarchar(max) NULL,
    [FilePath] nvarchar(max) NULL,
    [IsRead] bit NOT NULL,
    [Metadata] nvarchar(max) NULL,
    CONSTRAINT [PK_ChatMessageReplies] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ChatMessageReplies_ChatMessages_ChatMessageId] FOREIGN KEY ([ChatMessageId]) REFERENCES [ChatMessages] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ChatMessageReplies_RoomMembers_RoomMemberId] FOREIGN KEY ([RoomMemberId]) REFERENCES [RoomMembers] ([Id]) ON DELETE NO ACTION
);
2025-09-22 09:36:25.409 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ChatMessageReplies_ChatMessageId] ON [ChatMessageReplies] ([ChatMessageId]);
2025-09-22 09:36:25.410 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ChatMessageReplies_RoomMemberId] ON [ChatMessageReplies] ([RoomMemberId]);
2025-09-22 09:36:25.412 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ChatMessages_RoomMemberId] ON [ChatMessages] ([RoomMemberId]);
2025-09-22 09:36:25.413 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RoomMembers_ChatRoomId] ON [RoomMembers] ([ChatRoomId]);
2025-09-22 09:36:25.415 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RoomMembers_UserId] ON [RoomMembers] ([UserId]);
2025-09-22 09:36:25.419 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250525104104_initial-chat-DB', N'8.0.13');
2025-09-22 09:36:25.424 +03:00 [INF] Applying migration '20250525133627_add-Workspace-table'.
2025-09-22 09:36:25.441 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [WorkspaceId] uniqueidentifier NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
2025-09-22 09:36:25.443 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ChatRooms] ADD [WorkspaceId] uniqueidentifier NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
2025-09-22 09:36:25.446 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Workspaces] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    [LastActionDate] datetimeoffset NOT NULL,
    [ActionBy] uniqueidentifier NULL,
    [Metadata] nvarchar(max) NULL,
    CONSTRAINT [PK_Workspaces] PRIMARY KEY ([Id])
);
2025-09-22 09:36:25.447 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250525133627_add-Workspace-table', N'8.0.13');
2025-09-22 09:36:25.447 +03:00 [INF] Applying migration '20250527130335_add-username-to-id-user'.
2025-09-22 09:36:25.459 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [Email] nvarchar(max) NULL;
2025-09-22 09:36:25.462 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [Username] nvarchar(max) NOT NULL DEFAULT N'';
2025-09-22 09:36:25.463 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250527130335_add-username-to-id-user', N'8.0.13');
2025-09-22 09:36:25.463 +03:00 [INF] Applying migration '20250601115441_make-lastname-nullable'.
2025-09-22 09:36:25.538 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'LastName');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Users] ALTER COLUMN [LastName] nvarchar(max) NULL;
2025-09-22 09:36:25.540 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250601115441_make-lastname-nullable', N'8.0.13');
2025-09-22 09:36:25.541 +03:00 [INF] Applying migration '20250708180803_FixRelationships'.
2025-09-22 09:36:25.550 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_WorkspaceId] ON [Users] ([WorkspaceId]);
2025-09-22 09:36:25.550 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ChatRooms_WorkspaceId] ON [ChatRooms] ([WorkspaceId]);
2025-09-22 09:36:25.552 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ChatRooms] ADD CONSTRAINT [FK_ChatRooms_Workspaces_WorkspaceId] FOREIGN KEY ([WorkspaceId]) REFERENCES [Workspaces] ([Id]) ON DELETE NO ACTION;
2025-09-22 09:36:25.554 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD CONSTRAINT [FK_Users_Workspaces_WorkspaceId] FOREIGN KEY ([WorkspaceId]) REFERENCES [Workspaces] ([Id]) ON DELETE NO ACTION;
2025-09-22 09:36:25.554 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250708180803_FixRelationships', N'8.0.13');
2025-09-22 09:36:25.555 +03:00 [INF] Applying migration '20250720131800_AddUserPass'.
2025-09-22 09:36:25.564 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [Password] nvarchar(max) NOT NULL DEFAULT N'';
2025-09-22 09:36:25.568 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250720131800_AddUserPass', N'8.0.13');
2025-09-22 09:36:25.568 +03:00 [INF] Applying migration '20250809090047_AddIsAdminUser'.
2025-09-22 09:36:25.581 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoomMembers] DROP CONSTRAINT [FK_RoomMembers_ChatRooms_ChatRoomId];
2025-09-22 09:36:25.585 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [IsAdmin] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-09-22 09:36:25.586 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoomMembers] ADD CONSTRAINT [FK_RoomMembers_ChatRooms_ChatRoomId] FOREIGN KEY ([ChatRoomId]) REFERENCES [ChatRooms] ([Id]) ON DELETE CASCADE;
2025-09-22 09:36:25.587 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250809090047_AddIsAdminUser', N'8.0.13');
2025-09-22 09:36:25.587 +03:00 [INF] Applying migration '20250812055425_FeatureOnetoOne'.
2025-09-22 09:36:25.597 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ChatRooms] ADD [Type] int NOT NULL DEFAULT 0;
2025-09-22 09:36:25.598 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ChatRooms] ADD [UniqueDirectKey] nvarchar(max) NULL;
2025-09-22 09:36:25.598 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250812055425_FeatureOnetoOne', N'8.0.13');
2025-09-22 09:36:25.599 +03:00 [INF] Applying migration '20250812062928_MakeTitleNullable'.
2025-09-22 09:36:25.627 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ChatRooms]') AND [c].[name] = N'Title');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [ChatRooms] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [ChatRooms] ALTER COLUMN [Title] nvarchar(max) NULL;
2025-09-22 09:36:25.628 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250812062928_MakeTitleNullable', N'8.0.13');
2025-09-22 09:36:25.628 +03:00 [INF] Applying migration '20250922063309_AddingApiKey'.
2025-09-22 09:36:25.649 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Workspaces] ADD [TenantId] uniqueidentifier NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
2025-09-22 09:36:25.664 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tenant] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Tenant] PRIMARY KEY ([Id])
);
2025-09-22 09:36:25.667 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AccessKeys] (
    [Id] uniqueidentifier NOT NULL,
    [WorkspaceId] uniqueidentifier NOT NULL,
    [HashedApiKey] nvarchar(max) NOT NULL,
    [IssuedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [TenantId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_AccessKeys] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AccessKeys_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_AccessKeys_Workspaces_WorkspaceId] FOREIGN KEY ([WorkspaceId]) REFERENCES [Workspaces] ([Id]) ON DELETE CASCADE
);
2025-09-22 09:36:25.668 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Workspaces_TenantId] ON [Workspaces] ([TenantId]);
2025-09-22 09:36:25.669 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AccessKeys_TenantId] ON [AccessKeys] ([TenantId]);
2025-09-22 09:36:25.670 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AccessKeys_WorkspaceId] ON [AccessKeys] ([WorkspaceId]);
2025-09-22 09:36:25.672 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Workspaces] ADD CONSTRAINT [FK_Workspaces_Tenant_TenantId] FOREIGN KEY ([TenantId]) REFERENCES [Tenant] ([Id]) ON DELETE NO ACTION;
2025-09-22 09:36:25.672 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250922063309_AddingApiKey', N'8.0.13');
2025-09-22 09:37:16.489 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 09:37:16.710 +03:00 [INF] Now listening on: https://localhost:7003
2025-09-22 09:37:16.711 +03:00 [INF] Now listening on: http://localhost:5277
2025-09-22 09:37:16.713 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 09:37:16.713 +03:00 [INF] Hosting environment: Development
2025-09-22 09:37:16.713 +03:00 [INF] Content root path: C:\Users\hp\Projects\Dotnet projects\AmanahChatBackend\AmanahChatSystem
2025-09-22 09:37:17.287 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-09-22 09:37:17.522 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 240.894ms
2025-09-22 09:37:17.564 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 09:37:17.571 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.4755ms
2025-09-22 09:37:17.591 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-09-22 09:37:17.664 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.5381ms
2025-09-22 09:37:18.022 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-09-22 09:37:18.191 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 169.5178ms
2025-09-22 09:38:37.174 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-22 09:38:37.183 +03:00 [INF] CORS policy execution successful.
2025-09-22 09:38:37.186 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 12.421ms
2025-09-22 09:38:37.197 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-22 09:38:37.198 +03:00 [INF] CORS policy execution successful.
2025-09-22 09:38:37.261 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-22 09:38:37.270 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-22 09:38:37.273 +03:00 [INF] HTTP POST /chathub/negotiate responded 401 in 67.3586 ms
2025-09-22 09:38:37.275 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 401 0 null 78.7058ms
2025-09-22 09:46:04.268 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:46:04.298 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:46:04.309 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-22 09:46:05.411 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 09:46:05.494 +03:00 [INF] Now listening on: https://localhost:7003
2025-09-22 09:46:05.495 +03:00 [INF] Now listening on: http://localhost:5277
2025-09-22 09:46:05.496 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 09:46:05.496 +03:00 [INF] Hosting environment: Development
2025-09-22 09:46:05.496 +03:00 [INF] Content root path: C:\Users\hp\Projects\Dotnet projects\AmanahChatBackend\AmanahChatSystem
2025-09-22 09:46:42.075 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 09:46:42.216 +03:00 [INF] Now listening on: https://localhost:7003
2025-09-22 09:46:42.216 +03:00 [INF] Now listening on: http://localhost:5277
2025-09-22 09:46:42.220 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 09:46:42.221 +03:00 [INF] Hosting environment: Development
2025-09-22 09:46:42.221 +03:00 [INF] Content root path: C:\Users\hp\Projects\Dotnet projects\AmanahChatBackend\AmanahChatSystem
2025-09-22 09:46:52.910 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:46:52.941 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:46:52.943 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-22 09:46:52.944 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-22 09:46:52.954 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-22 09:46:52.961 +03:00 [INF] Applying migration '20250922064641_RemoveWorkspaceAccesKeyRelation'.
2025-09-22 09:46:52.992 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AccessKeys] DROP CONSTRAINT [FK_AccessKeys_Workspaces_WorkspaceId];
2025-09-22 09:46:52.996 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_AccessKeys_WorkspaceId] ON [AccessKeys];
2025-09-22 09:46:53.031 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AccessKeys]') AND [c].[name] = N'WorkspaceId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [AccessKeys] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [AccessKeys] DROP COLUMN [WorkspaceId];
2025-09-22 09:46:53.034 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250922064641_RemoveWorkspaceAccesKeyRelation', N'8.0.13');
2025-09-22 09:46:54.056 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 09:46:54.132 +03:00 [INF] Now listening on: https://localhost:7003
2025-09-22 09:46:54.132 +03:00 [INF] Now listening on: http://localhost:5277
2025-09-22 09:46:54.134 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 09:46:54.134 +03:00 [INF] Hosting environment: Development
2025-09-22 09:46:54.134 +03:00 [INF] Content root path: C:\Users\hp\Projects\Dotnet projects\AmanahChatBackend\AmanahChatSystem
