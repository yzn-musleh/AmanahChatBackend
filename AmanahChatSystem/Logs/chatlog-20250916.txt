2025-09-16 08:59:48.643 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-16 08:59:49.042 +03:00 [INF] Now listening on: https://localhost:7003
2025-09-16 08:59:49.043 +03:00 [INF] Now listening on: http://localhost:5277
2025-09-16 08:59:49.046 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 08:59:49.046 +03:00 [INF] Hosting environment: Development
2025-09-16 08:59:49.046 +03:00 [INF] Content root path: C:\Users\hp\Downloads\AmanahChatSystem_Updated\AmanahChatSystem
2025-09-16 08:59:50.070 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-09-16 08:59:50.437 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 371.188ms
2025-09-16 08:59:50.591 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-09-16 08:59:50.597 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.7337ms
2025-09-16 08:59:50.602 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-09-16 08:59:50.695 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 92.3028ms
2025-09-16 08:59:52.245 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-09-16 08:59:52.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 192.8705ms
2025-09-16 09:00:00.946 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 09:00:00.954 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:00:00.957 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 10.2426ms
2025-09-16 09:00:00.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 09:00:00.967 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:00:01.080 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:00:01.120 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 09:00:02.800 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:00:03.120 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 09:00:03.138 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:00:03.180 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 2054.0331ms
2025-09-16 09:00:03.181 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:00:03.183 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 2209.2596 ms
2025-09-16 09:00:03.195 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 2233.1245ms
2025-09-16 09:00:07.038 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 09:00:07.038 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:00:07.039 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 1.0242ms
2025-09-16 09:00:07.053 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 09:00:07.054 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:00:07.062 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:00:07.063 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 09:00:07.166 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:00:07.192 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 09:00:07.193 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:00:07.193 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 130.1064ms
2025-09-16 09:00:07.193 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:00:07.193 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 138.9911 ms
2025-09-16 09:00:07.194 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 140.3488ms
2025-09-16 09:00:11.527 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/90e76504-7c2d-4e8c-8dbc-3d9106b58459?page=1&pageSize=50 - null null
2025-09-16 09:00:11.527 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:00:11.527 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/90e76504-7c2d-4e8c-8dbc-3d9106b58459?page=1&pageSize=50 - 204 null null 0.6739ms
2025-09-16 09:00:11.534 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/90e76504-7c2d-4e8c-8dbc-3d9106b58459?page=1&pageSize=50 - application/json null
2025-09-16 09:00:11.536 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:00:11.552 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 09:00:11.568 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 09:00:11.650 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:00:11.811 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 09:00:11.818 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:00:11.823 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 255.0378ms
2025-09-16 09:00:11.824 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 09:00:11.824 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/90e76504-7c2d-4e8c-8dbc-3d9106b58459 responded 200 in 287.6188 ms
2025-09-16 09:00:11.824 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/90e76504-7c2d-4e8c-8dbc-3d9106b58459?page=1&pageSize=50 - 200 null application/json; charset=utf-8 290.1042ms
2025-09-16 09:10:51.030 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 09:10:51.031 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:10:51.031 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.6575ms
2025-09-16 09:10:51.036 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 09:10:51.037 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:10:51.037 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 09:10:51.037 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 09:10:51.055 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:10:51.124 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 09:10:51.125 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:10:51.125 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 87.7743ms
2025-09-16 09:10:51.125 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 09:10:51.125 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 88.5421 ms
2025-09-16 09:10:51.126 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 89.3727ms
2025-09-16 09:19:09.074 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 09:19:09.075 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:19:09.075 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.8785ms
2025-09-16 09:19:09.083 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 09:19:09.084 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:19:09.085 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:19:09.085 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 09:19:09.098 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:19:09.144 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 09:19:09.145 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:19:09.146 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 60.0293ms
2025-09-16 09:19:09.146 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:19:09.146 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 61.4998 ms
2025-09-16 09:19:09.146 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 62.6135ms
2025-09-16 09:21:18.170 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 09:21:18.170 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:21:18.171 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.6462ms
2025-09-16 09:21:18.184 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 09:21:18.185 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:21:18.186 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:21:18.186 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 09:21:18.198 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:21:18.241 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 09:21:18.241 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:21:18.242 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 55.6504ms
2025-09-16 09:21:18.242 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:21:18.242 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 57.0640 ms
2025-09-16 09:21:18.242 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 58.0765ms
2025-09-16 09:22:35.501 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 09:22:35.501 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:22:35.502 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.678ms
2025-09-16 09:22:35.532 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 09:22:35.532 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:22:35.533 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:22:35.533 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 09:22:35.548 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:22:35.602 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 09:22:35.602 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:22:35.603 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 69.2322ms
2025-09-16 09:22:35.603 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:22:35.603 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 70.6928 ms
2025-09-16 09:22:35.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 71.5607ms
2025-09-16 09:24:02.771 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 09:24:02.771 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:24:02.772 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.7397ms
2025-09-16 09:24:02.798 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 09:24:02.798 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:24:02.799 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:24:02.799 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 09:24:02.808 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:24:02.868 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 09:24:02.869 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:24:02.869 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 70.3524ms
2025-09-16 09:24:02.870 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:24:02.870 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 71.9462 ms
2025-09-16 09:24:02.871 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 72.8172ms
2025-09-16 09:33:18.476 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 09:33:18.476 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:33:18.477 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.8786ms
2025-09-16 09:33:18.480 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 09:33:18.480 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:33:18.481 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:33:18.482 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 09:33:18.508 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:33:18.556 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 09:33:18.556 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:33:18.556 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 74.2793ms
2025-09-16 09:33:18.556 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:33:18.557 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 76.0698 ms
2025-09-16 09:33:18.557 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 76.7172ms
2025-09-16 09:33:24.954 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-09-16 09:33:24.959 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:33:24.961 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 6.8826ms
2025-09-16 09:33:24.967 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 15
2025-09-16 09:33:24.969 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:33:24.971 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-16 09:33:24.992 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-09-16 09:33:25.056 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-16 09:33:25.089 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 97.5455ms
2025-09-16 09:33:25.090 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-16 09:33:25.090 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 400 in 120.1463 ms
2025-09-16 09:33:25.090 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 400 null application/problem+json; charset=utf-8 122.8978ms
2025-09-16 09:57:52.595 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 09:57:52.596 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:57:52.597 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.9611ms
2025-09-16 09:57:52.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 09:57:52.615 +03:00 [INF] CORS policy execution successful.
2025-09-16 09:57:52.618 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:57:52.618 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 09:57:52.648 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 09:57:52.768 +03:00 [INF] Executed DbCommand (117ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 09:57:52.769 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 09:57:52.769 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 150.7705ms
2025-09-16 09:57:52.769 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 09:57:52.769 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 154.3764 ms
2025-09-16 09:57:52.770 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 155.7335ms
2025-09-16 10:00:52.630 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:00:52.631 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:00:52.631 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.6636ms
2025-09-16 10:00:52.639 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:00:52.639 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:00:52.640 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:00:52.640 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:00:52.657 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:00:52.774 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:00:52.775 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:00:52.776 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 135.7414ms
2025-09-16 10:00:52.776 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:00:52.777 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 136.7714 ms
2025-09-16 10:00:52.777 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 138.454ms
2025-09-16 10:01:08.344 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24?page=1&pageSize=50 - null null
2025-09-16 10:01:08.344 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:01:08.347 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24?page=1&pageSize=50 - 204 null null 3.6083ms
2025-09-16 10:01:08.360 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24?page=1&pageSize=50 - application/json null
2025-09-16 10:01:08.360 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:01:08.367 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:01:08.367 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 10:01:08.412 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:01:08.501 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 10:01:08.501 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:01:08.501 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 133.5745ms
2025-09-16 10:01:08.501 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:01:08.501 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24 responded 200 in 140.5555 ms
2025-09-16 10:01:08.502 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24?page=1&pageSize=50 - 200 null application/json; charset=utf-8 141.8371ms
2025-09-16 10:01:10.438 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 10:01:10.438 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:01:10.439 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 0.9333ms
2025-09-16 10:01:10.444 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 10:01:10.445 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:01:10.446 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:01:10.446 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 10:01:10.461 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:01:10.559 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 10:01:10.560 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:01:10.561 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 114.4573ms
2025-09-16 10:01:10.561 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:01:10.561 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 115.8768 ms
2025-09-16 10:01:10.561 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 117.0586ms
2025-09-16 10:01:29.566 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 10:01:29.566 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:01:29.566 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.5054ms
2025-09-16 10:01:29.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 10:01:29.573 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:01:29.573 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:01:29.574 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 10:01:29.593 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:01:29.661 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 10:01:29.661 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:01:29.661 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 87.3288ms
2025-09-16 10:01:29.661 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:01:29.661 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 88.3847 ms
2025-09-16 10:01:29.661 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 89.0682ms
2025-09-16 10:02:37.230 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:02:37.232 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:02:37.232 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 1.6462ms
2025-09-16 10:02:37.251 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:02:37.251 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:02:37.253 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:02:37.253 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:02:37.265 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:02:37.319 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:02:37.320 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:02:37.320 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 67.0081ms
2025-09-16 10:02:37.320 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:02:37.320 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 68.6549 ms
2025-09-16 10:02:37.321 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 69.9197ms
2025-09-16 10:04:46.906 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 10:04:46.906 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:04:46.907 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 1.4945ms
2025-09-16 10:04:46.912 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 10:04:46.912 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:04:46.913 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:04:46.913 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 10:04:46.937 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:04:47.011 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 10:04:47.013 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:04:47.014 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 100.4133ms
2025-09-16 10:04:47.014 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:04:47.014 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 101.8831 ms
2025-09-16 10:04:47.015 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 102.7944ms
2025-09-16 10:04:49.783 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24?page=1&pageSize=50 - null null
2025-09-16 10:04:49.783 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:04:49.783 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24?page=1&pageSize=50 - 204 null null 0.3537ms
2025-09-16 10:04:49.790 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24?page=1&pageSize=50 - application/json null
2025-09-16 10:04:49.790 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:04:49.791 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:04:49.792 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 10:04:49.806 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:04:49.815 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 10:04:49.817 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:04:49.818 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 26.0655ms
2025-09-16 10:04:49.818 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 10:04:49.818 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24 responded 200 in 27.7982 ms
2025-09-16 10:04:49.819 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/f87e99d8-2cc8-4129-93a7-17059d693f24?page=1&pageSize=50 - 200 null application/json; charset=utf-8 29.1014ms
2025-09-16 10:10:39.239 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:10:39.239 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:10:39.239 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.8872ms
2025-09-16 10:10:39.251 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:10:39.251 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:10:39.252 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:10:39.252 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:10:39.265 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:10:39.300 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:10:39.301 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:10:39.301 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 49.5932ms
2025-09-16 10:10:39.301 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:10:39.302 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 50.5364 ms
2025-09-16 10:10:39.302 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 51.1242ms
2025-09-16 10:11:03.732 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:11:03.733 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:11:03.733 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.9943ms
2025-09-16 10:11:03.752 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:11:03.753 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:11:03.756 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:11:03.756 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:11:03.766 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:11:03.807 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:11:03.807 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:11:03.808 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 51.4837ms
2025-09-16 10:11:03.808 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:11:03.808 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 54.6261 ms
2025-09-16 10:11:03.808 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 55.4238ms
2025-09-16 10:11:06.469 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 10:11:06.470 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:11:06.470 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 1.7123ms
2025-09-16 10:11:06.476 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 10:11:06.479 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:11:06.488 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 10:11:06.516 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 10:11:06.576 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:11:06.690 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 10:11:06.844 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:11:06.860 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 344.1756ms
2025-09-16 10:11:06.860 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 10:11:06.860 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 381.3256 ms
2025-09-16 10:11:06.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 384.5298ms
2025-09-16 10:13:54.163 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:13:54.163 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:13:54.163 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3099ms
2025-09-16 10:13:54.173 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:13:54.173 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:13:54.175 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:13:54.175 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:13:54.190 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:13:54.243 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:13:54.243 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:13:54.244 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 68.6935ms
2025-09-16 10:13:54.244 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:13:54.244 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 70.2557 ms
2025-09-16 10:13:54.244 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 70.9492ms
2025-09-16 10:13:56.871 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 10:13:56.872 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:13:56.873 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 1.7505ms
2025-09-16 10:13:56.884 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 10:13:56.884 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:13:56.888 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 10:13:56.889 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 10:13:56.924 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:13:56.931 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 10:13:56.933 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:13:56.934 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 44.2629ms
2025-09-16 10:13:56.934 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 10:13:56.934 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 49.1055 ms
2025-09-16 10:13:56.934 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 50.4472ms
2025-09-16 10:18:17.772 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:18:17.772 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:18:17.772 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.4389ms
2025-09-16 10:18:17.780 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:18:17.780 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:18:17.781 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:18:17.781 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:18:17.803 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:18:17.834 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:18:17.834 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:18:17.834 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 52.8974ms
2025-09-16 10:18:17.834 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:18:17.834 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 53.6865 ms
2025-09-16 10:18:17.834 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 54.1611ms
2025-09-16 10:18:24.587 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:18:24.587 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:18:24.588 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3761ms
2025-09-16 10:18:24.607 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:18:24.607 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:18:24.608 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:18:24.608 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:18:24.611 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:18:24.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:18:24.614 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:18:24.614 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 6.2458ms
2025-09-16 10:18:24.614 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:18:24.614 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 7.0310 ms
2025-09-16 10:18:24.614 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 7.5507ms
2025-09-16 10:18:27.159 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 10:18:27.159 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:18:27.159 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.3919ms
2025-09-16 10:18:27.164 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 10:18:27.165 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:18:27.165 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 10:18:27.166 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 10:18:27.175 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:18:27.189 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 10:18:27.189 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:18:27.190 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 23.9666ms
2025-09-16 10:18:27.190 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 10:18:27.190 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 24.8200 ms
2025-09-16 10:18:27.190 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 25.459ms
2025-09-16 10:31:53.726 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:31:53.726 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:31:53.726 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.5932ms
2025-09-16 10:31:53.731 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:31:53.732 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:31:53.733 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:31:53.733 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:31:53.743 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:31:53.786 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:31:53.786 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:31:53.786 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 53.0036ms
2025-09-16 10:31:53.786 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:31:53.786 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 54.2505 ms
2025-09-16 10:31:53.786 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 55.1176ms
2025-09-16 10:32:07.223 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-09-16 10:32:07.223 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:32:07.223 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 0.6496ms
2025-09-16 10:32:07.227 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 50
2025-09-16 10:32:07.228 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:32:07.229 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-16 10:32:07.230 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-09-16 10:32:07.277 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_UserId2_0='?' (DbType = Guid), @__request_WorkspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId2_0 AND [u].[WorkspaceId] = @__request_WorkspaceId_1
2025-09-16 10:32:07.283 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:32:07.285 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 55.0864ms
2025-09-16 10:32:07.285 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-16 10:32:07.285 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 200 in 56.4077 ms
2025-09-16 10:32:07.285 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 200 null application/json; charset=utf-8 58.1728ms
2025-09-16 10:37:35.943 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:37:35.943 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:37:35.944 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3831ms
2025-09-16 10:37:35.947 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:37:35.947 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:37:35.948 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:37:35.948 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:37:35.956 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:37:36.038 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:37:36.038 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:37:36.039 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 90.4232ms
2025-09-16 10:37:36.039 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:37:36.039 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 91.2823 ms
2025-09-16 10:37:36.039 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 91.8892ms
2025-09-16 10:38:12.628 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:38:12.628 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:38:12.629 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2835ms
2025-09-16 10:38:12.662 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:38:12.662 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:38:12.663 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:38:12.663 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:38:12.679 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:38:12.740 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:38:12.741 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:38:12.741 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 77.8687ms
2025-09-16 10:38:12.741 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:38:12.741 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 79.1454 ms
2025-09-16 10:38:12.742 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 80.0229ms
2025-09-16 10:40:17.043 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:40:17.043 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:40:17.043 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3062ms
2025-09-16 10:40:17.047 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:40:17.047 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:40:17.049 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:40:17.050 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:40:17.058 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:40:17.115 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:40:17.116 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:40:17.117 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 66.8045ms
2025-09-16 10:40:17.117 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:40:17.117 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 68.9191 ms
2025-09-16 10:40:17.117 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 70.0143ms
2025-09-16 10:40:50.937 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:40:50.937 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:40:50.937 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3315ms
2025-09-16 10:40:50.960 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:40:50.960 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:40:50.963 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:40:50.963 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:40:50.987 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:40:51.026 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:40:51.027 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:40:51.027 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 63.8376ms
2025-09-16 10:40:51.027 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:40:51.027 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 66.7024 ms
2025-09-16 10:40:51.027 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 67.4014ms
2025-09-16 10:47:53.423 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-09-16 10:47:53.496 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 72.3268ms
2025-09-16 10:47:53.598 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-09-16 10:47:53.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.8257ms
2025-09-16 10:47:53.610 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-09-16 10:47:53.637 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.7281ms
2025-09-16 10:47:53.948 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-09-16 10:47:54.001 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 52.831ms
2025-09-16 10:52:33.291 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:52:33.291 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:52:33.291 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3259ms
2025-09-16 10:52:33.300 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:52:33.300 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:52:33.301 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:52:33.301 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:52:33.313 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:52:33.365 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:52:33.366 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:52:33.366 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 65.1331ms
2025-09-16 10:52:33.366 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:52:33.366 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 66.2775 ms
2025-09-16 10:52:33.367 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 67.0671ms
2025-09-16 10:55:14.233 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:55:14.233 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:55:14.233 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3571ms
2025-09-16 10:55:14.238 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:55:14.238 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:55:14.238 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:55:14.239 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:55:14.246 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:55:14.326 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:55:14.327 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:55:14.327 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 88.2203ms
2025-09-16 10:55:14.327 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:55:14.327 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 88.7893 ms
2025-09-16 10:55:14.327 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 89.1395ms
2025-09-16 10:59:12.079 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 10:59:12.079 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:59:12.079 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.4468ms
2025-09-16 10:59:12.088 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 10:59:12.088 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:59:12.089 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:59:12.089 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 10:59:12.100 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:59:12.149 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 10:59:12.149 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:59:12.150 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 60.4668ms
2025-09-16 10:59:12.150 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 10:59:12.150 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 61.2879 ms
2025-09-16 10:59:12.150 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 61.7426ms
2025-09-16 10:59:18.782 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 10:59:18.782 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:59:18.782 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.4907ms
2025-09-16 10:59:18.785 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 10:59:18.785 +03:00 [INF] CORS policy execution successful.
2025-09-16 10:59:18.786 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 10:59:18.786 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 10:59:18.815 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 10:59:18.820 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 10:59:18.821 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 10:59:18.821 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 35.1241ms
2025-09-16 10:59:18.821 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 10:59:18.821 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 35.8639 ms
2025-09-16 10:59:18.821 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 36.2132ms
2025-09-16 11:02:15.123 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:02:15.123 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:02:15.123 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.5236ms
2025-09-16 11:02:15.135 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:02:15.136 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:02:15.136 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:02:15.136 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:02:15.172 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:02:15.218 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:02:15.219 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:02:15.219 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 82.5348ms
2025-09-16 11:02:15.219 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:02:15.219 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 83.4177 ms
2025-09-16 11:02:15.219 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 84.0906ms
2025-09-16 11:02:19.406 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 11:02:19.406 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:02:19.406 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.278ms
2025-09-16 11:02:19.410 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 11:02:19.410 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:02:19.411 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:02:19.411 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 11:02:19.422 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:02:19.431 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 11:02:19.432 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:02:19.433 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 22.2438ms
2025-09-16 11:02:19.433 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:02:19.433 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 22.9426 ms
2025-09-16 11:02:19.433 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 23.3922ms
2025-09-16 11:04:29.283 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:04:29.284 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:04:29.284 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.7361ms
2025-09-16 11:04:29.291 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:04:29.292 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:04:29.299 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:04:29.300 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:04:29.371 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:04:29.458 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:04:29.458 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:04:29.458 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 158.3749ms
2025-09-16 11:04:29.458 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:04:29.458 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 166.4414 ms
2025-09-16 11:04:29.459 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 167.6737ms
2025-09-16 11:05:57.772 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 11:05:57.772 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:05:57.772 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.3042ms
2025-09-16 11:05:57.777 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 11:05:57.777 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:05:57.778 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:05:57.778 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 11:05:57.783 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:05:57.787 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 11:05:57.788 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:05:57.788 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 9.9898ms
2025-09-16 11:05:57.788 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:05:57.788 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 10.7678 ms
2025-09-16 11:05:57.788 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 11.1505ms
2025-09-16 11:16:38.075 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 11:16:38.076 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:16:38.076 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 0.3419ms
2025-09-16 11:16:38.080 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 11:16:38.081 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:16:38.082 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:16:38.082 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 11:16:38.105 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:16:38.190 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 11:16:38.191 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:16:38.192 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 109.626ms
2025-09-16 11:16:38.192 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:16:38.192 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 110.7786 ms
2025-09-16 11:16:38.192 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 111.9695ms
2025-09-16 11:16:46.884 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 11:16:46.884 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:16:46.884 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.3205ms
2025-09-16 11:16:46.889 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 11:16:46.889 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:16:46.889 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:16:46.890 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 11:16:46.917 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:16:46.924 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 11:16:46.925 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:16:46.925 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 35.5862ms
2025-09-16 11:16:46.925 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:16:46.925 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 36.4409 ms
2025-09-16 11:16:46.925 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 36.8552ms
2025-09-16 11:35:28.825 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:35:28.825 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:35:28.825 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.6687ms
2025-09-16 11:35:28.833 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:35:28.833 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:35:28.834 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:35:28.834 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:35:28.863 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:35:28.930 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:35:28.930 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:35:28.931 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 96.2788ms
2025-09-16 11:35:28.931 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:35:28.931 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 97.8710 ms
2025-09-16 11:35:28.931 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 98.6611ms
2025-09-16 11:35:34.371 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 11:35:34.371 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:35:34.371 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.5385ms
2025-09-16 11:35:34.375 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 11:35:34.375 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:35:34.376 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:35:34.376 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 11:35:34.405 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:35:34.411 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 11:35:34.412 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:35:34.413 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 36.8266ms
2025-09-16 11:35:34.413 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:35:34.413 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 37.7464 ms
2025-09-16 11:35:34.413 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 38.31ms
2025-09-16 11:37:38.355 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:37:38.355 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:37:38.355 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.7478ms
2025-09-16 11:37:38.365 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:37:38.365 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:37:38.366 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:37:38.367 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:37:38.377 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:37:38.426 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:37:38.426 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:37:38.426 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 59.8928ms
2025-09-16 11:37:38.427 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:37:38.427 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 61.0835 ms
2025-09-16 11:37:38.427 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 62.1726ms
2025-09-16 11:40:24.336 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:40:24.336 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:40:24.336 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.8984ms
2025-09-16 11:40:24.386 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:40:24.387 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:40:24.387 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:40:24.387 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:40:24.397 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:40:24.450 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:40:24.450 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:40:24.451 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 63.2524ms
2025-09-16 11:40:24.451 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:40:24.451 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 63.9991 ms
2025-09-16 11:40:24.451 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 64.5243ms
2025-09-16 11:40:29.547 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 11:40:29.547 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:40:29.547 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.369ms
2025-09-16 11:40:29.579 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 11:40:29.580 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:40:29.580 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:40:29.580 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 11:40:29.587 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:40:29.593 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 11:40:29.602 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:40:29.603 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 22.3114ms
2025-09-16 11:40:29.603 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:40:29.603 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 23.1411 ms
2025-09-16 11:40:29.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 23.5571ms
2025-09-16 11:40:48.176 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Add - null null
2025-09-16 11:40:48.177 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:40:48.177 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Add - 204 null null 0.7619ms
2025-09-16 11:40:48.182 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - application/json 183
2025-09-16 11:40:48.185 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:40:48.200 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI)'
2025-09-16 11:40:48.275 +03:00 [INF] Route matched with {action = "Add", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsync(Application.Commands.ChatRooms.AddChatRoom.AddChatRoomRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:40:48.390 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:40:48.984 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTimeOffset), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Boolean), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTimeOffset), @p24='?' (Size = 4000), @p25='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ActionBy], [Description], [IsDeleted], [LastActionDate], [Metadata], [Title], [Type], [UniqueDirectKey], [WorkspaceId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO [RoomMembers] ([Id], [ActionBy], [ChatRoomId], [IsAdmin], [IsDeleted], [LastActionDate], [Metadata], [UserId])
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-09-16 11:40:49.024 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:40:49.024 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI) in 748.5689ms
2025-09-16 11:40:49.024 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI)'
2025-09-16 11:40:49.024 +03:00 [INF] HTTP POST /api/ChatRooms/Add responded 200 in 839.3804 ms
2025-09-16 11:40:49.024 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - 200 null application/json; charset=utf-8 841.9818ms
2025-09-16 11:41:10.419 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:41:10.419 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:41:10.420 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2928ms
2025-09-16 11:41:10.424 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:41:10.424 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:41:10.425 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:41:10.425 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:41:10.430 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:41:10.487 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:41:10.487 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:41:10.488 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 62.5272ms
2025-09-16 11:41:10.488 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:41:10.488 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 63.3953 ms
2025-09-16 11:41:10.488 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 64.076ms
2025-09-16 11:41:15.569 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 11:41:15.569 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:41:15.569 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.4168ms
2025-09-16 11:41:15.596 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 11:41:15.597 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:41:15.599 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:41:15.599 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 11:41:15.611 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:41:15.698 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 11:41:15.699 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:41:15.699 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 99.355ms
2025-09-16 11:41:15.699 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:41:15.699 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 101.8835 ms
2025-09-16 11:41:15.699 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 103.0183ms
2025-09-16 11:44:41.710 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:44:41.711 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:44:41.711 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.6554ms
2025-09-16 11:44:41.717 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:44:41.718 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:44:41.718 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:44:41.718 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:44:41.727 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:44:41.768 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:44:41.768 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:44:41.768 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 50.1419ms
2025-09-16 11:44:41.769 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:44:41.769 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 50.9107 ms
2025-09-16 11:44:41.769 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 51.6754ms
2025-09-16 11:44:45.398 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 11:44:45.398 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:44:45.398 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.4946ms
2025-09-16 11:44:45.406 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 11:44:45.406 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:44:45.407 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:44:45.407 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 11:44:45.421 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:44:45.437 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 11:44:45.438 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:44:45.439 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 31.0891ms
2025-09-16 11:44:45.439 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:44:45.439 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 32.7847 ms
2025-09-16 11:44:45.440 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 33.7426ms
2025-09-16 11:44:54.821 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Add - null null
2025-09-16 11:44:54.821 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:44:54.821 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Add - 204 null null 0.3084ms
2025-09-16 11:44:54.825 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - application/json 234
2025-09-16 11:44:54.825 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:44:54.826 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI)'
2025-09-16 11:44:54.826 +03:00 [INF] Route matched with {action = "Add", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsync(Application.Commands.ChatRooms.AddChatRoom.AddChatRoomRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:44:54.855 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:44:54.879 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTimeOffset), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Boolean), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTimeOffset), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (DbType = Guid), @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTimeOffset), @p32='?' (Size = 4000), @p33='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ActionBy], [Description], [IsDeleted], [LastActionDate], [Metadata], [Title], [Type], [UniqueDirectKey], [WorkspaceId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO [RoomMembers] ([Id], [ActionBy], [ChatRoomId], [IsAdmin], [IsDeleted], [LastActionDate], [Metadata], [UserId])
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25),
(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
2025-09-16 11:44:54.881 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:44:54.882 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI) in 55.0939ms
2025-09-16 11:44:54.882 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI)'
2025-09-16 11:44:54.882 +03:00 [INF] HTTP POST /api/ChatRooms/Add responded 200 in 56.1818 ms
2025-09-16 11:44:54.882 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - 200 null application/json; charset=utf-8 56.7657ms
2025-09-16 11:45:00.324 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:45:00.324 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:45:00.325 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3903ms
2025-09-16 11:45:00.349 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:45:00.349 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:45:00.350 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:45:00.350 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:45:00.364 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:45:00.412 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:45:00.412 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:45:00.412 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 62.5781ms
2025-09-16 11:45:00.413 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:45:00.413 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 63.3451 ms
2025-09-16 11:45:00.413 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 63.8832ms
2025-09-16 11:45:59.511 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:45:59.511 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:45:59.511 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2668ms
2025-09-16 11:45:59.540 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:45:59.540 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:45:59.541 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:45:59.541 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:45:59.560 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:45:59.616 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:45:59.617 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:45:59.617 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 76.1802ms
2025-09-16 11:45:59.617 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:45:59.617 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 77.2095 ms
2025-09-16 11:45:59.617 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 77.8546ms
2025-09-16 11:46:03.274 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 11:46:03.274 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:03.274 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.2834ms
2025-09-16 11:46:03.278 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 11:46:03.278 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:03.279 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:46:03.279 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 11:46:03.309 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:46:03.315 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 11:46:03.316 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:46:03.316 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 37.2223ms
2025-09-16 11:46:03.317 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 11:46:03.317 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 38.0674 ms
2025-09-16 11:46:03.317 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 38.5762ms
2025-09-16 11:46:14.670 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Add - null null
2025-09-16 11:46:14.670 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:14.670 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/Add - 204 null null 0.2907ms
2025-09-16 11:46:14.673 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - application/json 239
2025-09-16 11:46:14.673 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:14.674 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI)'
2025-09-16 11:46:14.674 +03:00 [INF] Route matched with {action = "Add", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsync(Application.Commands.ChatRooms.AddChatRoom.AddChatRoomRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:46:14.703 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:46:14.724 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTimeOffset), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Boolean), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTimeOffset), @p24='?' (Size = 4000), @p25='?' (DbType = Guid), @p26='?' (DbType = Guid), @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTimeOffset), @p32='?' (Size = 4000), @p33='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ActionBy], [Description], [IsDeleted], [LastActionDate], [Metadata], [Title], [Type], [UniqueDirectKey], [WorkspaceId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO [RoomMembers] ([Id], [ActionBy], [ChatRoomId], [IsAdmin], [IsDeleted], [LastActionDate], [Metadata], [UserId])
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25),
(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
2025-09-16 11:46:14.725 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:46:14.726 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI) in 52.0249ms
2025-09-16 11:46:14.726 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.AddAsync (ChatSystem.UI)'
2025-09-16 11:46:14.726 +03:00 [INF] HTTP POST /api/ChatRooms/Add responded 200 in 52.6546 ms
2025-09-16 11:46:14.726 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - 200 null application/json; charset=utf-8 53.2427ms
2025-09-16 11:46:16.552 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 11:46:16.552 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:16.553 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2705ms
2025-09-16 11:46:16.571 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 11:46:16.572 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:16.572 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:46:16.573 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 11:46:16.579 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:46:16.615 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 11:46:16.616 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:46:16.616 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 43.2559ms
2025-09-16 11:46:16.616 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 11:46:16.616 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 43.9954 ms
2025-09-16 11:46:16.616 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 44.8789ms
2025-09-16 11:46:38.511 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - null null
2025-09-16 11:46:38.511 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:38.512 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 204 null null 0.3947ms
2025-09-16 11:46:38.515 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - application/json null
2025-09-16 11:46:38.515 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:38.516 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:46:38.516 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 11:46:38.523 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:46:38.588 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 11:46:38.588 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:46:38.589 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 72.6368ms
2025-09-16 11:46:38.589 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:46:38.589 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7 responded 200 in 73.7508 ms
2025-09-16 11:46:38.589 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 200 null application/json; charset=utf-8 74.2453ms
2025-09-16 11:46:40.885 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - null null
2025-09-16 11:46:40.886 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:40.886 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 204 null null 0.3735ms
2025-09-16 11:46:40.891 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 11:46:40.891 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:46:40.915 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:46:40.915 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 11:46:40.921 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:46:40.929 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 11:46:40.930 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:46:40.930 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 15.2432ms
2025-09-16 11:46:40.931 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:46:40.931 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 39.4676 ms
2025-09-16 11:46:40.931 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 39.9908ms
2025-09-16 11:57:05.814 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - null null
2025-09-16 11:57:05.814 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:57:05.815 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 204 null null 0.3783ms
2025-09-16 11:57:05.819 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - application/json null
2025-09-16 11:57:05.819 +03:00 [INF] CORS policy execution successful.
2025-09-16 11:57:05.820 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:57:05.820 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 11:57:05.835 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 11:57:05.922 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 11:57:05.923 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 11:57:05.923 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 102.5279ms
2025-09-16 11:57:05.923 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 11:57:05.923 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7 responded 200 in 103.8314 ms
2025-09-16 11:57:05.923 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 200 null application/json; charset=utf-8 104.4094ms
2025-09-16 12:05:30.429 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - null null
2025-09-16 12:05:30.429 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:05:30.429 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 204 null null 0.3725ms
2025-09-16 12:05:30.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - application/json null
2025-09-16 12:05:30.433 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:05:30.434 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:05:30.434 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:05:30.443 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:05:30.488 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:05:30.489 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:05:30.489 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 54.6863ms
2025-09-16 12:05:30.489 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:05:30.489 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7 responded 200 in 55.7250 ms
2025-09-16 12:05:30.489 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 200 null application/json; charset=utf-8 56.1822ms
2025-09-16 12:06:22.520 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:06:22.520 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:06:22.520 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.2392ms
2025-09-16 12:06:22.526 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:06:22.526 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:06:22.526 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:06:22.527 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:06:22.566 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:06:22.639 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:06:22.639 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:06:22.639 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 112.8569ms
2025-09-16 12:06:22.640 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:06:22.640 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 113.7739 ms
2025-09-16 12:06:22.640 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 114.2752ms
2025-09-16 12:07:27.720 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:07:27.721 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:07:27.721 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.3482ms
2025-09-16 12:07:27.728 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:07:27.728 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:07:27.729 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:07:27.730 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:07:27.773 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:07:27.863 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:07:27.863 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:07:27.864 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 133.9845ms
2025-09-16 12:07:27.864 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:07:27.864 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 135.1400 ms
2025-09-16 12:07:27.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 135.8298ms
2025-09-16 12:08:55.773 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:08:55.774 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:08:55.774 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.5039ms
2025-09-16 12:08:55.786 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:08:55.786 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:08:55.787 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:08:55.787 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:08:55.800 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:08:55.851 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:08:55.851 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:08:55.851 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 63.7695ms
2025-09-16 12:08:55.851 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:08:55.851 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 64.9330 ms
2025-09-16 12:08:55.851 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 65.4673ms
2025-09-16 12:08:58.377 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - null null
2025-09-16 12:08:58.377 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:08:58.377 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 204 null null 0.2522ms
2025-09-16 12:08:58.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - application/json null
2025-09-16 12:08:58.381 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:08:58.382 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:08:58.382 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:08:58.390 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:08:58.462 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:08:58.462 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:08:58.462 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 80.6216ms
2025-09-16 12:08:58.463 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:08:58.463 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7 responded 200 in 81.7441 ms
2025-09-16 12:08:58.463 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 200 null application/json; charset=utf-8 82.5103ms
2025-09-16 12:09:03.087 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - null null
2025-09-16 12:09:03.087 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:09:03.087 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 204 null null 0.2631ms
2025-09-16 12:09:03.091 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 12:09:03.091 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:09:03.093 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:09:03.093 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:09:03.095 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:09:03.098 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:09:03.099 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:09:03.099 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 6.5409ms
2025-09-16 12:09:03.099 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:09:03.100 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 8.1885 ms
2025-09-16 12:09:03.100 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 8.8266ms
2025-09-16 12:09:06.083 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 12:09:06.083 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:09:06.084 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 1.0156ms
2025-09-16 12:09:06.090 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 12:09:06.090 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:09:06.091 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:09:06.091 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:09:06.094 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:09:06.099 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:09:06.099 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:09:06.099 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 8.1515ms
2025-09-16 12:09:06.099 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:09:06.099 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 8.6088 ms
2025-09-16 12:09:06.099 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 9.2517ms
2025-09-16 12:12:47.853 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:12:47.853 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:47.853 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2594ms
2025-09-16 12:12:47.856 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:12:47.856 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:47.857 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:12:47.857 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:12:47.869 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:12:47.920 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:12:47.920 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:12:47.920 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 63.3881ms
2025-09-16 12:12:47.920 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:12:47.920 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 63.9000 ms
2025-09-16 12:12:47.920 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 64.2591ms
2025-09-16 12:12:51.804 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - null null
2025-09-16 12:12:51.804 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:51.804 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 204 null null 0.2472ms
2025-09-16 12:12:51.812 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 12:12:51.813 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:51.814 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:12:51.814 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:12:51.820 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:12:51.917 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:12:51.917 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:12:51.917 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 103.4366ms
2025-09-16 12:12:51.917 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:12:51.917 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 104.0104 ms
2025-09-16 12:12:51.918 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 105.1963ms
2025-09-16 12:12:54.963 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - null null
2025-09-16 12:12:54.964 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:54.964 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 204 null null 0.3784ms
2025-09-16 12:12:54.969 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - application/json null
2025-09-16 12:12:54.969 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:54.970 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:12:54.970 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:12:54.976 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:12:54.981 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:12:54.982 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:12:54.982 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 12.0335ms
2025-09-16 12:12:54.982 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:12:54.982 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7 responded 200 in 12.9817 ms
2025-09-16 12:12:54.982 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 200 null application/json; charset=utf-8 13.7119ms
2025-09-16 12:12:57.269 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:12:57.269 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:57.269 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.2866ms
2025-09-16 12:12:57.275 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:12:57.275 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:57.276 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:12:57.276 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:12:57.279 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:12:57.281 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:12:57.281 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:12:57.282 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 5.8361ms
2025-09-16 12:12:57.282 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:12:57.282 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 6.4201 ms
2025-09-16 12:12:57.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 6.9029ms
2025-09-16 12:12:59.771 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 12:12:59.771 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:59.771 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 0.5542ms
2025-09-16 12:12:59.775 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 12:12:59.775 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:12:59.776 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:12:59.776 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:12:59.778 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:12:59.781 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:12:59.782 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:12:59.782 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 6.0831ms
2025-09-16 12:12:59.782 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:12:59.782 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 6.6230 ms
2025-09-16 12:12:59.782 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 6.9048ms
2025-09-16 12:13:03.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 12:13:03.339 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:13:03.342 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:13:03.342 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:13:03.347 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:13:03.349 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:13:03.350 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:13:03.350 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 8.2494ms
2025-09-16 12:13:03.350 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:13:03.350 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 10.6998 ms
2025-09-16 12:13:03.350 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 11.5765ms
2025-09-16 12:13:06.139 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 12:13:06.139 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:13:06.139 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.2164ms
2025-09-16 12:13:06.165 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 12:13:06.165 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:13:06.166 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:13:06.166 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:13:06.171 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:13:06.174 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:13:06.174 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:13:06.174 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 8.7755ms
2025-09-16 12:13:06.174 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:13:06.174 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 9.4870 ms
2025-09-16 12:13:06.175 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 9.9388ms
2025-09-16 12:14:30.134 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:14:30.134 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:30.134 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.3605ms
2025-09-16 12:14:30.139 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:14:30.139 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:30.139 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:30.140 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:30.150 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:14:30.223 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:14:30.223 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:30.223 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 83.4474ms
2025-09-16 12:14:30.223 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:30.223 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 84.3009 ms
2025-09-16 12:14:30.223 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 84.7788ms
2025-09-16 12:14:32.552 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 12:14:32.553 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:32.553 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.4118ms
2025-09-16 12:14:32.556 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 121
2025-09-16 12:14:32.557 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:32.557 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:14:32.570 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:32.718 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 12:14:32.778 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 12:14:32.920 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 12:14:32.942 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:32.942 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 372.377ms
2025-09-16 12:14:32.942 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:14:32.942 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 385.5085 ms
2025-09-16 12:14:32.942 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 386.0016ms
2025-09-16 12:14:37.651 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:14:37.651 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:37.651 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.2011ms
2025-09-16 12:14:37.656 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:14:37.656 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:37.657 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:37.657 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:37.693 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:14:37.810 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:14:37.810 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:37.810 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 153.7605ms
2025-09-16 12:14:37.810 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:37.811 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 154.3851 ms
2025-09-16 12:14:37.811 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 154.6947ms
2025-09-16 12:14:40.701 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 12:14:40.701 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:40.701 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 0.3693ms
2025-09-16 12:14:40.706 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 12:14:40.706 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:40.707 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:40.707 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:40.718 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:14:40.790 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:14:40.790 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:40.790 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 83.2599ms
2025-09-16 12:14:40.790 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:40.790 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 83.7428 ms
2025-09-16 12:14:40.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 84.1887ms
2025-09-16 12:14:42.875 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - null null
2025-09-16 12:14:42.876 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:42.876 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 204 null null 0.2255ms
2025-09-16 12:14:42.881 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 12:14:42.881 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:42.882 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:42.882 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:42.888 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:14:42.954 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:14:42.954 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:42.954 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 72.4999ms
2025-09-16 12:14:42.954 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:42.954 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 72.9219 ms
2025-09-16 12:14:42.954 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 73.2692ms
2025-09-16 12:14:44.779 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 12:14:44.780 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:44.780 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:44.780 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:44.784 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:14:44.790 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:14:44.790 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:44.790 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 9.9899ms
2025-09-16 12:14:44.790 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:44.790 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 10.4323 ms
2025-09-16 12:14:44.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 11.2281ms
2025-09-16 12:14:47.076 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - null null
2025-09-16 12:14:47.076 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:47.076 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 204 null null 0.4273ms
2025-09-16 12:14:47.083 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - application/json null
2025-09-16 12:14:47.083 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:47.084 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:47.085 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:47.092 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:14:47.099 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:14:47.100 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:47.101 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 16.0178ms
2025-09-16 12:14:47.101 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:47.101 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7 responded 200 in 17.5095 ms
2025-09-16 12:14:47.102 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 200 null application/json; charset=utf-8 18.7237ms
2025-09-16 12:14:49.567 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:14:49.567 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:49.567 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.1986ms
2025-09-16 12:14:49.576 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:14:49.576 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:49.577 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:49.577 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:49.579 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:14:49.602 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:14:49.603 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:49.603 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 26.0278ms
2025-09-16 12:14:49.603 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:49.603 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 27.0557 ms
2025-09-16 12:14:49.604 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 27.8503ms
2025-09-16 12:14:53.243 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 12:14:53.244 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:53.244 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.3273ms
2025-09-16 12:14:53.249 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 125
2025-09-16 12:14:53.249 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:53.250 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:14:53.250 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:53.260 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 12:14:53.266 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 12:14:53.289 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 12:14:53.292 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:53.293 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 42.7512ms
2025-09-16 12:14:53.293 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:14:53.293 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 43.4289 ms
2025-09-16 12:14:53.293 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 43.9202ms
2025-09-16 12:14:55.597 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:14:55.597 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:55.597 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3078ms
2025-09-16 12:14:55.601 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:14:55.601 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:55.602 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:14:55.602 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:14:55.607 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:14:55.649 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:14:55.650 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:55.651 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 48.3434ms
2025-09-16 12:14:55.651 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:14:55.651 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 49.0391 ms
2025-09-16 12:14:55.651 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 49.7277ms
2025-09-16 12:14:58.297 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:14:58.297 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:58.297 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.2656ms
2025-09-16 12:14:58.301 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:14:58.301 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:14:58.302 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:58.302 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:14:58.311 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:14:58.403 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:14:58.403 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:14:58.403 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 100.8454ms
2025-09-16 12:14:58.403 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:14:58.403 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 102.1400 ms
2025-09-16 12:14:58.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 102.7755ms
2025-09-16 12:15:04.295 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 12:15:04.295 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:15:04.295 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.2687ms
2025-09-16 12:15:04.299 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 121
2025-09-16 12:15:04.299 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:15:04.299 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:15:04.299 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:15:04.310 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 12:15:04.321 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 12:15:04.342 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 12:15:04.344 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:15:04.344 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 44.2265ms
2025-09-16 12:15:04.344 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:15:04.344 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 44.7845 ms
2025-09-16 12:15:04.344 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 45.1973ms
2025-09-16 12:16:49.316 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:16:49.316 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:16:49.316 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3397ms
2025-09-16 12:16:49.321 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:16:49.321 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:16:49.321 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:16:49.322 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:16:49.336 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:16:49.420 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:16:49.421 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:16:49.421 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 99.3195ms
2025-09-16 12:16:49.421 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:16:49.421 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 99.9688 ms
2025-09-16 12:16:49.421 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 100.6354ms
2025-09-16 12:17:00.138 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:17:00.138 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:17:00.139 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.8671ms
2025-09-16 12:17:00.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:17:00.161 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:17:00.162 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:17:00.162 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:17:00.171 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:17:00.229 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:17:00.229 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:17:00.230 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 67.6489ms
2025-09-16 12:17:00.230 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:17:00.230 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 68.0715 ms
2025-09-16 12:17:00.230 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 68.4261ms
2025-09-16 12:17:50.159 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - null null
2025-09-16 12:17:50.159 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:17:50.159 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 204 null null 0.4302ms
2025-09-16 12:17:50.165 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 12:17:50.165 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:17:50.166 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:17:50.166 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:17:50.173 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:17:50.241 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:17:50.241 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:17:50.241 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 74.8229ms
2025-09-16 12:17:50.241 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:17:50.241 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 76.0686 ms
2025-09-16 12:17:50.241 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 76.4922ms
2025-09-16 12:17:53.524 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:17:53.524 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:17:53.525 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.4684ms
2025-09-16 12:17:53.528 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:17:53.528 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:17:53.529 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:17:53.529 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:17:53.533 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:17:53.536 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:17:53.537 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:17:53.537 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 8.059ms
2025-09-16 12:17:53.537 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:17:53.537 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 8.4936 ms
2025-09-16 12:17:53.537 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 8.8663ms
2025-09-16 12:18:01.667 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 12:18:01.667 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:18:01.667 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.3037ms
2025-09-16 12:18:01.671 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 12:18:01.671 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:18:01.671 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:18:01.671 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:18:01.708 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:18:01.790 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:18:01.790 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:18:01.791 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 119.2697ms
2025-09-16 12:18:01.791 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:18:01.791 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 119.8109 ms
2025-09-16 12:18:01.791 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 120.2112ms
2025-09-16 12:18:04.722 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 12:18:04.722 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:18:04.722 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.4967ms
2025-09-16 12:18:04.725 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 125
2025-09-16 12:18:04.726 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:18:04.726 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:18:04.726 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:18:04.733 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 12:18:04.742 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 12:18:04.764 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 12:18:04.766 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:18:04.766 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 40.0982ms
2025-09-16 12:18:04.766 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:18:04.766 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 40.5922 ms
2025-09-16 12:18:04.766 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 41.0407ms
2025-09-16 12:18:08.439 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 125
2025-09-16 12:18:08.439 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:18:08.440 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:18:08.440 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:18:08.443 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 12:18:08.446 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 12:18:08.451 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 12:18:08.476 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:18:08.476 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 36.4128ms
2025-09-16 12:18:08.476 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:18:08.476 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 37.2658 ms
2025-09-16 12:18:08.476 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 37.9963ms
2025-09-16 12:25:53.649 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - null null
2025-09-16 12:25:53.649 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:25:53.649 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 204 null null 0.3007ms
2025-09-16 12:25:53.653 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - application/json null
2025-09-16 12:25:53.654 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:25:53.654 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:25:53.654 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:25:53.664 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:25:53.750 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:25:53.750 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:25:53.750 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 96.3688ms
2025-09-16 12:25:53.751 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:25:53.751 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7 responded 200 in 96.9382 ms
2025-09-16 12:25:53.751 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 200 null application/json; charset=utf-8 97.3239ms
2025-09-16 12:25:56.233 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:25:56.233 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:25:56.234 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.2174ms
2025-09-16 12:25:56.238 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:25:56.238 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:25:56.239 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:25:56.239 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:25:56.247 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:25:56.254 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:25:56.256 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:25:56.257 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 18.1411ms
2025-09-16 12:25:56.258 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:25:56.258 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 19.3653 ms
2025-09-16 12:25:56.258 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 19.9616ms
2025-09-16 12:25:58.797 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - null null
2025-09-16 12:25:58.798 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:25:58.798 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 204 null null 0.2975ms
2025-09-16 12:25:58.802 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 12:25:58.802 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:25:58.803 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:25:58.803 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:25:58.808 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:25:58.812 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:25:58.812 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:25:58.812 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 9.4234ms
2025-09-16 12:25:58.814 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:25:58.814 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 11.9934 ms
2025-09-16 12:25:58.814 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 12.5664ms
2025-09-16 12:26:01.330 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 12:26:01.330 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:26:01.330 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:26:01.330 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:26:01.335 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:26:01.339 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:26:01.340 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:26:01.340 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 9.4044ms
2025-09-16 12:26:01.340 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:26:01.340 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 10.2883 ms
2025-09-16 12:26:01.340 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 10.8504ms
2025-09-16 12:26:03.578 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - null null
2025-09-16 12:26:03.578 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:26:03.578 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 204 null null 0.3906ms
2025-09-16 12:26:03.584 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - application/json null
2025-09-16 12:26:03.584 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:26:03.584 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:26:03.585 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:26:03.588 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:26:03.590 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:26:03.591 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:26:03.591 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 6.0282ms
2025-09-16 12:26:03.591 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:26:03.591 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7 responded 200 in 6.6781 ms
2025-09-16 12:26:03.591 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/0dde964b-29f7-402e-ab48-ce4b663945a7?page=1&pageSize=50 - 200 null application/json; charset=utf-8 7.3443ms
2025-09-16 12:26:06.852 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 12:26:06.852 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:26:06.852 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.4389ms
2025-09-16 12:26:06.855 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 12:26:06.855 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:26:06.856 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:26:06.856 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:26:06.858 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:26:06.864 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:26:06.865 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:26:06.867 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 10.7375ms
2025-09-16 12:26:06.867 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:26:06.867 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 11.6925 ms
2025-09-16 12:26:06.867 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 12.5152ms
2025-09-16 12:45:03.803 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:45:03.805 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:03.805 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 3.4794ms
2025-09-16 12:45:03.825 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:45:03.826 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:03.827 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:45:03.829 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:45:03.844 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:45:03.894 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:45:03.894 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:45:03.895 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 65.3058ms
2025-09-16 12:45:03.895 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:45:03.895 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 68.7387 ms
2025-09-16 12:45:03.895 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 69.5264ms
2025-09-16 12:45:11.465 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 12:45:11.469 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:11.469 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 4.3074ms
2025-09-16 12:45:11.496 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 12:45:11.496 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:11.500 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 12:45:11.535 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 12:45:11.535 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 39.3450 ms
2025-09-16 12:45:11.535 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 39.6024ms
2025-09-16 12:45:11.542 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=hp8XZXXsv-AQx4uB8oLpUQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 12:45:11.542 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:11.546 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 12:45:21.526 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 12:45:21.526 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:21.526 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.477ms
2025-09-16 12:45:21.533 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 12:45:21.533 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:21.534 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:21.534 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:45:21.542 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:45:21.653 +03:00 [INF] Executed DbCommand (104ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:45:21.654 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:45:21.654 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 119.2707ms
2025-09-16 12:45:21.654 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:21.654 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 120.0472 ms
2025-09-16 12:45:21.654 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 120.7856ms
2025-09-16 12:45:24.418 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 12:45:24.418 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:24.418 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.328ms
2025-09-16 12:45:24.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 12:45:24.430 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:24.431 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:24.431 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:45:24.435 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:45:24.442 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:45:24.443 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:45:24.443 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 11.3907ms
2025-09-16 12:45:24.443 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:24.443 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 12.7502 ms
2025-09-16 12:45:24.443 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 13.5704ms
2025-09-16 12:45:26.845 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - null null
2025-09-16 12:45:26.845 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:26.845 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 204 null null 0.3604ms
2025-09-16 12:45:26.850 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 12:45:26.850 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:26.850 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:26.851 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:45:26.861 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:45:26.935 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:45:26.936 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:45:26.936 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 85.2595ms
2025-09-16 12:45:26.936 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:26.936 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 85.8354 ms
2025-09-16 12:45:26.936 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 86.1945ms
2025-09-16 12:45:42.093 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 12:45:42.093 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:42.093 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 0.4896ms
2025-09-16 12:45:42.100 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 12:45:42.100 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:42.100 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:42.101 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:45:42.123 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:45:42.196 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:45:42.196 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:45:42.196 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 95.622ms
2025-09-16 12:45:42.196 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:42.197 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 96.4709 ms
2025-09-16 12:45:42.197 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 96.8243ms
2025-09-16 12:45:51.767 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 12:45:51.768 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:51.768 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 0.258ms
2025-09-16 12:45:51.777 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 12:45:51.777 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:45:51.778 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:51.779 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:45:51.791 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:45:51.799 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:45:51.800 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:45:51.801 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 21.7415ms
2025-09-16 12:45:51.801 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:45:51.801 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 23.8690 ms
2025-09-16 12:45:51.802 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 25.7551ms
2025-09-16 12:53:01.643 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-09-16 12:53:01.647 +03:00 [INF] CORS policy execution failed.
2025-09-16 12:53:01.649 +03:00 [INF] Request origin http://localhost:51331 does not have permission to access the resource.
2025-09-16 12:53:01.649 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 5.7834ms
2025-09-16 12:53:05.855 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-09-16 12:53:05.855 +03:00 [INF] CORS policy execution failed.
2025-09-16 12:53:05.855 +03:00 [INF] Request origin http://localhost:51331 does not have permission to access the resource.
2025-09-16 12:53:05.855 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 0.2399ms
2025-09-16 12:53:13.756 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-09-16 12:53:13.756 +03:00 [INF] CORS policy execution failed.
2025-09-16 12:53:13.756 +03:00 [INF] Request origin http://localhost:51331 does not have permission to access the resource.
2025-09-16 12:53:13.756 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 0.3152ms
2025-09-16 12:54:27.744 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-16 12:54:28.388 +03:00 [INF] Now listening on: https://localhost:7003
2025-09-16 12:54:28.389 +03:00 [INF] Now listening on: http://localhost:5277
2025-09-16 12:54:28.393 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-16 12:54:28.394 +03:00 [INF] Hosting environment: Development
2025-09-16 12:54:28.394 +03:00 [INF] Content root path: C:\Users\hp\Downloads\AmanahChatSystem_Updated\AmanahChatSystem
2025-09-16 12:54:29.232 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-09-16 12:54:29.609 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 378.0514ms
2025-09-16 12:54:29.676 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-09-16 12:54:29.687 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-09-16 12:54:29.689 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.5556ms
2025-09-16 12:54:29.731 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.0914ms
2025-09-16 12:54:30.031 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-09-16 12:54:30.219 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 187.9781ms
2025-09-16 12:54:31.701 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 12:54:31.709 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:31.711 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 10.2311ms
2025-09-16 12:54:31.763 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 12:54:31.764 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:31.933 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 12:54:31.941 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 12:54:31.945 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 172.8592 ms
2025-09-16 12:54:31.946 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 182.8532ms
2025-09-16 12:54:32.089 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=OYKn3utzOdghyTnnZDsGFQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 12:54:32.090 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:32.096 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 12:54:32.680 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-09-16 12:54:32.681 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:32.681 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 1.1007ms
2025-09-16 12:54:32.686 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 40
2025-09-16 12:54:32.692 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:32.701 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:54:32.758 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 12:54:34.590 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-09-16 12:54:34.616 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 12:54:34.649 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 1883.8043ms
2025-09-16 12:54:34.649 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:54:34.651 +03:00 [INF] HTTP POST /api/Users/Login responded 400 in 1958.4377 ms
2025-09-16 12:54:34.664 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 400 null application/json; charset=utf-8 1978.7336ms
2025-09-16 12:54:42.543 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-09-16 12:54:42.544 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:42.544 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 1.261ms
2025-09-16 12:54:42.550 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 41
2025-09-16 12:54:42.550 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:42.551 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:54:42.551 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 12:54:42.650 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-09-16 12:54:42.651 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 12:54:42.652 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 100.5406ms
2025-09-16 12:54:42.652 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:54:42.652 +03:00 [INF] HTTP POST /api/Users/Login responded 400 in 101.6082 ms
2025-09-16 12:54:42.652 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 400 null application/json; charset=utf-8 102.9156ms
2025-09-16 12:54:44.824 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 41
2025-09-16 12:54:44.824 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:44.825 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:54:44.825 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 12:54:44.862 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-09-16 12:54:44.862 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 12:54:44.863 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 38.0804ms
2025-09-16 12:54:44.863 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:54:44.863 +03:00 [INF] HTTP POST /api/Users/Login responded 400 in 38.4835 ms
2025-09-16 12:54:44.863 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 400 null application/json; charset=utf-8 39.0423ms
2025-09-16 12:54:48.766 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-09-16 12:54:48.766 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:48.766 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 0.4673ms
2025-09-16 12:54:48.771 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 34
2025-09-16 12:54:48.772 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:54:48.772 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:54:48.773 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 12:54:48.785 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-09-16 12:54:48.786 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 12:54:48.787 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 13.7386ms
2025-09-16 12:54:48.787 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:54:48.787 +03:00 [INF] HTTP POST /api/Users/Login responded 400 in 14.4914 ms
2025-09-16 12:54:48.787 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 400 null application/json; charset=utf-8 15.6232ms
2025-09-16 12:56:19.215 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-09-16 12:56:19.215 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:19.216 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 0.577ms
2025-09-16 12:56:19.220 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 41
2025-09-16 12:56:19.220 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:19.221 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:56:19.221 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 12:56:19.230 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-09-16 12:56:19.396 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-16 12:56:19.399 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 178.2271ms
2025-09-16 12:56:19.399 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-09-16 12:56:19.399 +03:00 [INF] HTTP POST /api/Users/Login responded 200 in 178.8388 ms
2025-09-16 12:56:19.399 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 200 null application/json; charset=utf-8 179.537ms
2025-09-16 12:56:19.590 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-09-16 12:56:19.590 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:19.590 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.5556ms
2025-09-16 12:56:19.617 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-09-16 12:56:19.617 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:19.618 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.5038ms
2025-09-16 12:56:19.619 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:56:19.620 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:19.620 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 1.0116ms
2025-09-16 12:56:19.639 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-09-16 12:56:19.640 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:19.644 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 12:56:19.649 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-09-16 12:56:19.651 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:19.653 +03:00 [INF] HTTP GET /api/Users responded 404 in 0.7715 ms
2025-09-16 12:56:19.654 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 4.906ms
2025-09-16 12:56:19.657 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-09-16 12:56:19.661 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:56:19.663 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-09-16 12:56:19.663 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:19.664 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:56:19.673 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:56:19.715 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-09-16 12:56:19.724 +03:00 [ERR] An error occurred using the connection to database 'AmanahChatDB' on server 'YZN\SQLEXPRESS'.
2025-09-16 12:56:19.732 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:56:19.744 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 70.65ms
2025-09-16 12:56:19.744 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:56:19.744 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 400 in 80.1325 ms
2025-09-16 12:56:19.744 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 499 null application/json; charset=utf-8 83.2795ms
2025-09-16 12:56:19.762 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:56:19.767 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 103.7377ms
2025-09-16 12:56:19.767 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 12:56:19.767 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 126.9020 ms
2025-09-16 12:56:19.767 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 499 null application/json; charset=utf-8 128.4862ms
2025-09-16 12:56:25.744 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:56:25.744 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:25.744 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.556ms
2025-09-16 12:56:25.748 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 12:56:25.749 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:25.749 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.4833ms
2025-09-16 12:56:25.768 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:56:25.769 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:25.770 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:56:25.770 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:56:25.776 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 12:56:25.776 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:25.777 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 12:56:25.778 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 12:56:25.779 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 2.1747 ms
2025-09-16 12:56:25.779 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 3.0106ms
2025-09-16 12:56:25.793 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:56:25.799 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=5QET02ABQ-4B_emh-JHzRw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0NzVjNjlkMS1mYjIzLTQ3ODgtOTIzZi0zZTg3ODcxZWJiMWEiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibWFoIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg2MTY1NzksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.wcdGvyCPaYFoZBt3k-QTxKkUGk0MTnvHYMyDf_SqmKQ - null null
2025-09-16 12:56:25.799 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:25.800 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 12:56:26.038 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:56:26.040 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:56:26.044 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 273.8816ms
2025-09-16 12:56:26.045 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:56:26.045 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 275.8356 ms
2025-09-16 12:56:26.045 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 276.7402ms
2025-09-16 12:56:37.594 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 12:56:37.595 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:37.595 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.364ms
2025-09-16 12:56:37.597 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 12:56:37.597 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:37.597 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.2786ms
2025-09-16 12:56:37.598 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 12:56:37.599 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:37.600 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:56:37.600 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 12:56:37.601 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:56:37.601 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 12:56:37.606 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 12:56:37.606 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:56:37.619 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:56:37.632 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:56:37.638 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 12:56:37.644 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:56:37.648 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 42.7661ms
2025-09-16 12:56:37.649 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 12:56:37.649 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 48.0363 ms
2025-09-16 12:56:37.649 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 48.6506ms
2025-09-16 12:56:37.794 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:56:37.798 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:56:37.801 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 194.4833ms
2025-09-16 12:56:37.801 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:56:37.801 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 201.8017 ms
2025-09-16 12:56:37.801 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 203.0899ms
2025-09-16 12:57:19.238 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 12:57:19.239 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:19.239 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.465ms
2025-09-16 12:57:19.243 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 125
2025-09-16 12:57:19.243 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:19.244 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:57:19.253 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:57:19.309 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 12:57:19.400 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 12:57:19.756 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p21='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset), @p27='?' (DbType = Guid), @p25='?' (DbType = Guid), @p26='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [ActionBy] = @p19, [LastActionDate] = @p20
OUTPUT 1
WHERE [Id] = @p21;
UPDATE [RoomMembers] SET [ActionBy] = @p22, [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
UPDATE [Users] SET [ActionBy] = @p25, [LastActionDate] = @p26
OUTPUT 1
WHERE [Id] = @p27;
2025-09-16 12:57:19.821 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:57:19.823 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 570.3755ms
2025-09-16 12:57:19.823 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:57:19.824 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 579.9868 ms
2025-09-16 12:57:19.824 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 580.6905ms
2025-09-16 12:57:22.208 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 12:57:22.209 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:22.209 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.5316ms
2025-09-16 12:57:22.214 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 12:57:22.215 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:22.215 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:57:22.216 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:57:22.221 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:57:22.238 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:57:22.239 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:57:22.240 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 24.3597ms
2025-09-16 12:57:22.240 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:57:22.241 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 25.6769 ms
2025-09-16 12:57:22.241 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 26.447ms
2025-09-16 12:57:26.763 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - null null
2025-09-16 12:57:26.763 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:26.763 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 204 null null 0.3999ms
2025-09-16 12:57:26.771 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 12:57:26.771 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:26.772 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:57:26.773 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:57:26.782 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:57:26.794 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:57:26.794 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:57:26.795 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 21.4439ms
2025-09-16 12:57:26.795 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:57:26.795 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 23.9819 ms
2025-09-16 12:57:26.796 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 25.2489ms
2025-09-16 12:57:29.703 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 12:57:29.703 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:29.703 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.509ms
2025-09-16 12:57:29.705 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 122
2025-09-16 12:57:29.706 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:29.706 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:57:29.706 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:57:29.709 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 12:57:29.711 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 12:57:29.733 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset), @p26='?' (DbType = Guid), @p25='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [RoomMembers] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
UPDATE [Users] SET [LastActionDate] = @p25
OUTPUT 1
WHERE [Id] = @p26;
2025-09-16 12:57:29.736 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:57:29.736 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 29.7777ms
2025-09-16 12:57:29.736 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:57:29.736 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 30.3492 ms
2025-09-16 12:57:29.736 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 30.9349ms
2025-09-16 12:57:41.079 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 12:57:41.079 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 188988.6268 ms
2025-09-16 12:57:41.079 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=OYKn3utzOdghyTnnZDsGFQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 188989.5319ms
2025-09-16 12:57:41.272 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:57:41.273 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:41.273 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.417ms
2025-09-16 12:57:41.276 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:57:41.277 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:41.277 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:57:41.277 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:57:41.285 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:57:41.334 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:57:41.334 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:57:41.335 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 57.3298ms
2025-09-16 12:57:41.335 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:57:41.335 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 58.0262 ms
2025-09-16 12:57:41.335 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 58.6004ms
2025-09-16 12:57:42.944 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 12:57:42.944 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:42.944 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.9012ms
2025-09-16 12:57:42.953 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 12:57:42.953 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:42.955 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 12:57:42.955 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 12:57:42.956 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 1.7580 ms
2025-09-16 12:57:42.956 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 2.6058ms
2025-09-16 12:57:42.968 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=NJGLKxvLtGqpaCldUrhl-A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 12:57:42.968 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:42.969 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 12:57:46.782 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 12:57:46.782 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:46.782 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.3732ms
2025-09-16 12:57:46.817 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 122
2025-09-16 12:57:46.817 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:46.818 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:57:46.818 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:57:46.830 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 12:57:46.840 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 12:57:46.864 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 12:57:46.867 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:57:46.867 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 49.3181ms
2025-09-16 12:57:46.868 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:57:46.868 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 50.5210 ms
2025-09-16 12:57:46.868 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 51.3334ms
2025-09-16 12:57:50.296 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 12:57:50.296 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:50.296 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.3794ms
2025-09-16 12:57:50.300 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 12:57:50.301 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:50.303 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:57:50.304 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:57:50.316 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:57:50.397 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:57:50.397 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:57:50.398 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 93.9307ms
2025-09-16 12:57:50.398 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:57:50.398 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 97.1205 ms
2025-09-16 12:57:50.398 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 97.6987ms
2025-09-16 12:57:53.417 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 12:57:53.418 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:53.418 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.2405ms
2025-09-16 12:57:53.421 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 126
2025-09-16 12:57:53.421 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:57:53.422 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:57:53.422 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:57:53.425 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 12:57:53.427 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 12:57:53.431 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 12:57:53.433 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:57:53.433 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 10.6993ms
2025-09-16 12:57:53.433 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 12:57:53.433 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 11.9178 ms
2025-09-16 12:57:53.433 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 12.8548ms
2025-09-16 12:58:01.493 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 12:58:01.493 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 95693.7399 ms
2025-09-16 12:58:01.493 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=5QET02ABQ-4B_emh-JHzRw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0NzVjNjlkMS1mYjIzLTQ3ODgtOTIzZi0zZTg3ODcxZWJiMWEiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibWFoIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg2MTY1NzksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.wcdGvyCPaYFoZBt3k-QTxKkUGk0MTnvHYMyDf_SqmKQ - 200 null null 95694.4461ms
2025-09-16 12:58:01.928 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:58:01.928 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:01.928 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.4605ms
2025-09-16 12:58:01.928 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 12:58:01.928 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:01.928 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.1948ms
2025-09-16 12:58:01.932 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 12:58:01.932 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:58:01.932 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:01.932 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:01.933 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 12:58:01.933 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:58:01.933 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:58:01.933 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 12:58:01.933 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 0.7574 ms
2025-09-16 12:58:01.933 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 1.2476ms
2025-09-16 12:58:01.945 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=e2ENhDH2nFjkBHvG2OY4jw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0NzVjNjlkMS1mYjIzLTQ3ODgtOTIzZi0zZTg3ODcxZWJiMWEiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibWFoIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg2MTY1NzksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.wcdGvyCPaYFoZBt3k-QTxKkUGk0MTnvHYMyDf_SqmKQ - null null
2025-09-16 12:58:01.945 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:01.946 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 12:58:01.949 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:58:01.952 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:58:01.953 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:58:01.953 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 20.2204ms
2025-09-16 12:58:01.953 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:58:01.953 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 21.0667 ms
2025-09-16 12:58:01.954 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 21.5348ms
2025-09-16 12:58:03.457 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 12:58:03.457 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 20488.9609 ms
2025-09-16 12:58:03.458 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=NJGLKxvLtGqpaCldUrhl-A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 20489.4322ms
2025-09-16 12:58:03.612 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 12:58:03.613 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:03.613 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2768ms
2025-09-16 12:58:03.621 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 12:58:03.621 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:03.622 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:58:03.622 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 12:58:03.625 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:58:03.627 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 12:58:03.628 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:58:03.628 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 5.8235ms
2025-09-16 12:58:03.628 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 12:58:03.628 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 6.6325 ms
2025-09-16 12:58:03.628 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 7.3268ms
2025-09-16 12:58:04.933 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 12:58:04.933 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:04.933 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.4244ms
2025-09-16 12:58:04.937 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 12:58:04.938 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:04.939 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 12:58:04.940 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 12:58:04.940 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 2.0524 ms
2025-09-16 12:58:04.940 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 2.6739ms
2025-09-16 12:58:04.946 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=7doS2Sa9OKf4bKIz6yzPDw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 12:58:04.948 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:04.949 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 12:58:06.106 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 12:58:06.106 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:06.107 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.3153ms
2025-09-16 12:58:06.109 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 12:58:06.109 +03:00 [INF] CORS policy execution successful.
2025-09-16 12:58:06.110 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:58:06.110 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 12:58:06.115 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 12:58:06.124 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 12:58:06.125 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 12:58:06.125 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 15.0082ms
2025-09-16 12:58:06.126 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 12:58:06.126 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 15.9653 ms
2025-09-16 12:58:06.126 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 16.428ms
2025-09-16 13:00:04.720 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 13:00:04.721 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 119772.3720 ms
2025-09-16 13:00:04.721 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=7doS2Sa9OKf4bKIz6yzPDw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 119775.2211ms
2025-09-16 13:00:04.984 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 13:00:04.984 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:00:04.984 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2677ms
2025-09-16 13:00:04.989 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 13:00:04.989 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:00:04.990 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:00:04.990 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 13:00:04.998 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:00:04.999 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 13:00:04.999 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:00:05.000 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.3439ms
2025-09-16 13:00:05.016 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 13:00:05.017 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:00:05.018 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 13:00:05.018 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 13:00:05.018 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 1.1763 ms
2025-09-16 13:00:05.019 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 2.3865ms
2025-09-16 13:00:05.050 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 13:00:05.050 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:00:05.051 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 60.0466ms
2025-09-16 13:00:05.051 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:00:05.051 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 61.2148 ms
2025-09-16 13:00:05.051 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 61.9765ms
2025-09-16 13:00:05.258 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=CR59w2hxczTsPLv7S4T-Lw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 13:00:05.259 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:00:05.259 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 13:01:13.868 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 13:01:13.868 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 68609.1245 ms
2025-09-16 13:01:13.868 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=CR59w2hxczTsPLv7S4T-Lw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 68609.5979ms
2025-09-16 13:01:14.052 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 13:01:14.052 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:14.052 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2624ms
2025-09-16 13:01:14.058 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 13:01:14.058 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:14.058 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.305ms
2025-09-16 13:01:14.060 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 13:01:14.060 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:14.061 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:01:14.061 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 13:01:14.067 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 13:01:14.067 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:14.068 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 13:01:14.068 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 13:01:14.068 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 0.7955 ms
2025-09-16 13:01:14.068 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 1.1309ms
2025-09-16 13:01:14.070 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:01:14.108 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 13:01:14.109 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:14.109 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 47.9791ms
2025-09-16 13:01:14.109 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:01:14.109 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 48.8100 ms
2025-09-16 13:01:14.109 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 49.2957ms
2025-09-16 13:01:14.126 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=8J_AIXCYhdsTADCPjc_1JQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 13:01:14.126 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:14.127 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 13:01:30.320 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 13:01:30.320 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:30.321 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.3497ms
2025-09-16 13:01:30.324 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 13:01:30.325 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:30.327 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:01:30.327 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:01:30.336 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 13:01:30.336 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:30.336 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.2962ms
2025-09-16 13:01:30.340 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 13:01:30.340 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:30.340 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:01:30.340 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:01:30.341 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 13:01:30.349 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:01:30.359 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 13:01:30.361 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:30.361 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 20.4177ms
2025-09-16 13:01:30.361 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:01:30.361 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 21.1580 ms
2025-09-16 13:01:30.361 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 21.84ms
2025-09-16 13:01:30.418 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 13:01:30.419 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:30.420 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 92.0418ms
2025-09-16 13:01:30.420 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:01:30.420 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 94.9346 ms
2025-09-16 13:01:30.420 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 96.0683ms
2025-09-16 13:01:36.733 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 13:01:36.733 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:36.733 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.3954ms
2025-09-16 13:01:36.746 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 125
2025-09-16 13:01:36.747 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:36.748 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:36.749 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:01:36.763 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 13:01:36.774 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 13:01:36.799 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 13:01:36.801 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:36.801 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 52.2591ms
2025-09-16 13:01:36.801 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:36.801 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 54.0721 ms
2025-09-16 13:01:36.801 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 55.2223ms
2025-09-16 13:01:38.551 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 13:01:38.551 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:38.552 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.1951ms
2025-09-16 13:01:38.554 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 13:01:38.554 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:38.555 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:01:38.555 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:01:38.563 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:01:38.630 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 13:01:38.631 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:38.631 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 75.7871ms
2025-09-16 13:01:38.631 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:01:38.631 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 76.5622 ms
2025-09-16 13:01:38.631 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 77.0053ms
2025-09-16 13:01:41.489 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 121
2025-09-16 13:01:41.489 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:41.490 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:41.490 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:01:41.508 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 13:01:41.521 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 13:01:41.545 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 13:01:41.547 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:41.548 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 57.2087ms
2025-09-16 13:01:41.548 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:41.548 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 58.3354 ms
2025-09-16 13:01:41.548 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 58.9089ms
2025-09-16 13:01:49.604 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 13:01:49.604 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:49.604 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.2442ms
2025-09-16 13:01:49.607 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 124
2025-09-16 13:01:49.607 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:49.607 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:49.607 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:01:49.631 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 13:01:49.644 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 13:01:49.673 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 13:01:49.674 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:49.674 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 66.6914ms
2025-09-16 13:01:49.674 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:49.674 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 67.3062 ms
2025-09-16 13:01:49.674 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 67.6958ms
2025-09-16 13:01:51.442 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 124
2025-09-16 13:01:51.442 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:51.443 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:51.443 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:01:51.467 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 13:01:51.479 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 13:01:51.501 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 13:01:51.502 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:51.503 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 59.626ms
2025-09-16 13:01:51.503 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:51.503 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 60.4184 ms
2025-09-16 13:01:51.503 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 61.1008ms
2025-09-16 13:01:55.657 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - null null
2025-09-16 13:01:55.657 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:55.657 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 204 null null 0.254ms
2025-09-16 13:01:55.666 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - application/json null
2025-09-16 13:01:55.667 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:55.667 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:01:55.668 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:01:55.677 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:01:55.857 +03:00 [INF] Executed DbCommand (180ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 13:01:55.858 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:55.858 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 190.3361ms
2025-09-16 13:01:55.858 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:01:55.858 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d responded 200 in 191.5923 ms
2025-09-16 13:01:55.859 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/3ecc55be-6fed-497d-ab77-035a9b06221d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 192.2664ms
2025-09-16 13:01:58.434 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 13:01:58.434 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:58.435 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.2831ms
2025-09-16 13:01:58.437 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 121
2025-09-16 13:01:58.438 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:01:58.438 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:58.438 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:01:58.450 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 13:01:58.462 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 13:01:58.486 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 13:01:58.488 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:01:58.489 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 50.281ms
2025-09-16 13:01:58.489 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:01:58.489 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 50.9544 ms
2025-09-16 13:01:58.489 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 51.4073ms
2025-09-16 13:02:03.354 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 13:02:03.355 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 49228.5527 ms
2025-09-16 13:02:03.355 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=8J_AIXCYhdsTADCPjc_1JQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 49229.1612ms
2025-09-16 13:02:03.501 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 13:02:03.501 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:02:03.501 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.1903ms
2025-09-16 13:02:03.509 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 13:02:03.510 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:02:03.510 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:02:03.510 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 13:02:03.510 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 13:02:03.510 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:02:03.511 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.1618ms
2025-09-16 13:02:03.516 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:02:03.523 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 13:02:03.524 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:02:03.524 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 13:02:03.524 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 13:02:03.524 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 0.7032 ms
2025-09-16 13:02:03.524 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 1.0592ms
2025-09-16 13:02:03.558 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 13:02:03.559 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:02:03.559 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 48.5269ms
2025-09-16 13:02:03.559 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:02:03.559 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 49.2477 ms
2025-09-16 13:02:03.559 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 49.9003ms
2025-09-16 13:02:03.578 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=35_mdkRC4twuVNNE85LqqA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 13:02:03.578 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:02:03.579 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 13:02:09.297 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 13:02:09.297 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:02:09.297 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.3311ms
2025-09-16 13:02:09.301 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 125
2025-09-16 13:02:09.302 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:02:09.302 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:02:09.303 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:02:09.319 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 13:02:09.337 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 13:02:09.369 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p20='?' (DbType = Guid), @p19='?' (DbType = DateTimeOffset), @p22='?' (DbType = Guid), @p21='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [LastActionDate] = @p19
OUTPUT 1
WHERE [Id] = @p20;
UPDATE [RoomMembers] SET [LastActionDate] = @p21
OUTPUT 1
WHERE [Id] = @p22;
UPDATE [Users] SET [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
2025-09-16 13:02:09.370 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:02:09.370 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 67.716ms
2025-09-16 13:02:09.370 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:02:09.370 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 68.6991 ms
2025-09-16 13:02:09.371 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 69.2063ms
2025-09-16 13:06:06.859 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-09-16 13:06:06.859 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:06:06.859 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.2363ms
2025-09-16 13:06:06.860 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-09-16 13:06:06.860 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:06:06.860 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.3007ms
2025-09-16 13:06:06.874 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 13:06:06.874 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:06:06.874 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.1969ms
2025-09-16 13:06:06.903 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-09-16 13:06:06.903 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:06:06.904 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 13:06:06.905 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-09-16 13:06:06.910 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-09-16 13:06:06.911 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:06:06.911 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 13:06:06.911 +03:00 [INF] HTTP GET /api/Users responded 404 in 0.4356 ms
2025-09-16 13:06:06.911 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:06:06.911 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 0.9134ms
2025-09-16 13:06:06.912 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-09-16 13:06:06.912 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:06:06.912 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 13:06:06.917 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-09-16 13:06:06.919 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:06:06.919 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 14.2519ms
2025-09-16 13:06:06.919 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 13:06:06.919 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 15.5671 ms
2025-09-16 13:06:06.919 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 16.2052ms
2025-09-16 13:06:06.922 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:06:06.962 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:06:06.964 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 52.2863ms
2025-09-16 13:06:06.965 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:06:06.965 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 400 in 53.1599 ms
2025-09-16 13:06:06.965 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 499 null application/json; charset=utf-8 53.7483ms
2025-09-16 13:08:15.846 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-09-16 13:08:15.846 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:15.846 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.4066ms
2025-09-16 13:08:15.904 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-09-16 13:08:15.905 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:15.905 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 13:08:15.905 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-09-16 13:08:15.919 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-09-16 13:08:15.921 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:08:15.924 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 18.5541ms
2025-09-16 13:08:15.924 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 13:08:15.924 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 19.4822 ms
2025-09-16 13:08:15.925 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 19.9963ms
2025-09-16 13:08:27.493 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-09-16 13:08:27.493 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:27.493 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.3276ms
2025-09-16 13:08:27.545 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-09-16 13:08:27.546 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:27.548 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 13:08:27.548 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-09-16 13:08:27.554 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-09-16 13:08:27.556 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:08:27.556 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 7.7145ms
2025-09-16 13:08:27.556 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 13:08:27.556 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 10.4581 ms
2025-09-16 13:08:27.557 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 11.3321ms
2025-09-16 13:08:31.334 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 13:08:31.334 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:31.334 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.3949ms
2025-09-16 13:08:31.370 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 13:08:31.371 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:31.371 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:08:31.371 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 13:08:31.381 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:08:31.388 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 13:08:31.390 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:08:31.391 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 19.5852ms
2025-09-16 13:08:31.391 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:08:31.391 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 20.6107 ms
2025-09-16 13:08:31.392 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 21.1772ms
2025-09-16 13:08:41.287 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 13:08:41.288 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:41.288 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3538ms
2025-09-16 13:08:41.299 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 13:08:41.299 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:41.300 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.276ms
2025-09-16 13:08:41.364 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 13:08:41.364 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:41.366 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:08:41.366 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 13:08:41.378 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:08:41.385 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 13:08:41.386 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:41.389 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:08:41.389 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 13:08:41.406 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:08:41.430 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 13:08:41.431 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:08:41.432 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 42.5466ms
2025-09-16 13:08:41.432 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:08:41.432 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 44.7090 ms
2025-09-16 13:08:41.433 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 47.3209ms
2025-09-16 13:08:41.459 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 13:08:41.459 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:08:41.460 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 93.6353ms
2025-09-16 13:08:41.460 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:08:41.460 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 94.8275 ms
2025-09-16 13:08:41.460 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 95.6884ms
2025-09-16 13:08:49.499 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 13:08:49.499 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:49.500 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.4315ms
2025-09-16 13:08:49.584 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 13:08:49.584 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:08:49.585 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:08:49.585 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 13:08:49.591 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:08:49.601 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 13:08:49.602 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:08:49.602 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 16.4157ms
2025-09-16 13:08:49.602 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:08:49.602 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 17.2177 ms
2025-09-16 13:08:49.602 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 18.1708ms
2025-09-16 13:10:02.592 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 13:10:02.593 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 479014.1550 ms
2025-09-16 13:10:02.593 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=35_mdkRC4twuVNNE85LqqA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 479014.5395ms
2025-09-16 13:10:03.368 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 13:10:03.368 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:03.368 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.5049ms
2025-09-16 13:10:03.373 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 13:10:03.374 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:03.374 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:10:03.375 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 13:10:03.389 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:10:03.390 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 13:10:03.390 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:03.390 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.4117ms
2025-09-16 13:10:03.405 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 13:10:03.405 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:03.407 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 13:10:03.408 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 13:10:03.408 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 2.6972 ms
2025-09-16 13:10:03.408 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 3.292ms
2025-09-16 13:10:03.503 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 13:10:03.504 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:10:03.505 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 129.8198ms
2025-09-16 13:10:03.505 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:10:03.505 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 130.7848 ms
2025-09-16 13:10:03.505 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 131.9013ms
2025-09-16 13:10:03.829 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=y3FTTz5LNa9sFDNQv7JjEA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 13:10:03.830 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:03.830 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 13:10:12.737 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 13:10:12.737 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 8907.6574 ms
2025-09-16 13:10:12.738 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=y3FTTz5LNa9sFDNQv7JjEA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 8908.1143ms
2025-09-16 13:10:13.048 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 13:10:13.048 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:13.048 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2806ms
2025-09-16 13:10:13.053 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 13:10:13.053 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:13.053 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.2943ms
2025-09-16 13:10:13.058 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 13:10:13.058 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:13.059 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:10:13.060 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 13:10:13.061 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 13:10:13.061 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:13.062 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 13:10:13.063 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 13:10:13.063 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 1.8922 ms
2025-09-16 13:10:13.063 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 2.4798ms
2025-09-16 13:10:13.066 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:10:13.072 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 13:10:13.073 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:10:13.074 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 14.2734ms
2025-09-16 13:10:13.074 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 13:10:13.074 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 15.5518 ms
2025-09-16 13:10:13.074 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 16.1726ms
2025-09-16 13:10:13.129 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=C5Wg3mE2_g6qWNdnoV-YQw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 13:10:13.129 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:13.130 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 13:10:25.187 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 13:10:25.188 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:25.188 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.5289ms
2025-09-16 13:10:25.192 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 13:10:25.193 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:25.195 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:10:25.195 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:10:25.198 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 13:10:25.198 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:25.199 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.4758ms
2025-09-16 13:10:25.216 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:10:25.224 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 13:10:25.225 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:25.226 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:10:25.226 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 13:10:25.245 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:10:25.265 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 13:10:25.267 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:10:25.267 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 40.4476ms
2025-09-16 13:10:25.267 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:10:25.268 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 42.5031 ms
2025-09-16 13:10:25.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 43.8945ms
2025-09-16 13:10:25.330 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 13:10:25.331 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:10:25.338 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 142.3446ms
2025-09-16 13:10:25.338 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:10:25.338 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 145.0269 ms
2025-09-16 13:10:25.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 146.2411ms
2025-09-16 13:10:30.613 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 13:10:30.613 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:30.613 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.5431ms
2025-09-16 13:10:30.625 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 13:10:30.625 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:30.628 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:10:30.628 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:10:30.654 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:10:30.662 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 13:10:30.663 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:10:30.669 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 41.2331ms
2025-09-16 13:10:30.669 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:10:30.669 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 43.7768 ms
2025-09-16 13:10:30.670 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 44.6157ms
2025-09-16 13:10:36.090 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 13:10:36.090 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:36.090 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 0.814ms
2025-09-16 13:10:36.095 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 128
2025-09-16 13:10:36.096 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:36.097 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:10:36.097 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:10:36.134 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 13:10:36.148 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 13:10:36.190 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p21='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset), @p26='?' (DbType = Guid), @p25='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [ActionBy] = @p19, [LastActionDate] = @p20
OUTPUT 1
WHERE [Id] = @p21;
UPDATE [RoomMembers] SET [ActionBy] = @p22, [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
UPDATE [Users] SET [LastActionDate] = @p25
OUTPUT 1
WHERE [Id] = @p26;
2025-09-16 13:10:36.192 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:10:36.192 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 95.1014ms
2025-09-16 13:10:36.193 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:10:36.193 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 96.6417 ms
2025-09-16 13:10:36.193 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 97.3896ms
2025-09-16 13:10:38.804 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - null null
2025-09-16 13:10:38.805 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:38.806 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/Send - 204 null null 1.3509ms
2025-09-16 13:10:38.825 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Messages/Send - application/json 127
2025-09-16 13:10:38.825 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:10:38.826 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:10:38.826 +03:00 [INF] Route matched with {action = "SendMessage", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMessageAsync(Application.Commands.Messages.SendMessage.SendMessageRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:10:38.829 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_RoomMemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId], [t].[Id], [t].[ActionBy], [t].[ConnectId], [t].[Email], [t].[FirstName], [t].[IsAdmin], [t].[IsDeleted], [t].[LastActionDate], [t].[LastName], [t].[Metadata], [t].[Password], [t].[ProfileImageUrl], [t].[Username], [t].[WorkspaceId]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[UserId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[Id] = @__request_RoomMemberId_0
2025-09-16 13:10:38.832 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActionBy], [t].[Description], [t].[IsDeleted], [t].[LastActionDate], [t].[Metadata], [t].[Title], [t].[Type], [t].[UniqueDirectKey], [t].[WorkspaceId], [t0].[Id], [t0].[ActionBy], [t0].[ChatRoomId], [t0].[IsAdmin], [t0].[IsDeleted], [t0].[LastActionDate], [t0].[Metadata], [t0].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0
) AS [t]
LEFT JOIN (
    SELECT [r].[Id], [r].[ActionBy], [r].[ChatRoomId], [r].[IsAdmin], [r].[IsDeleted], [r].[LastActionDate], [r].[Metadata], [r].[UserId]
    FROM [RoomMembers] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[ChatRoomId]
ORDER BY [t].[Id]
2025-09-16 13:10:38.836 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p18='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (DbType = Guid), @p21='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = DateTimeOffset), @p24='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (DbType = DateTimeOffset), @p26='?' (DbType = Guid), @p25='?' (DbType = DateTimeOffset)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatMessages] ([Id], [ActionBy], [FilePath], [IsDeleted], [IsRead], [LastActionDate], [Message], [Metadata], [RoomMemberId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE [ChatRooms] SET [ActionBy] = @p9, [Description] = @p10, [IsDeleted] = @p11, [LastActionDate] = @p12, [Metadata] = @p13, [Title] = @p14, [Type] = @p15, [UniqueDirectKey] = @p16, [WorkspaceId] = @p17
OUTPUT 1
WHERE [Id] = @p18;
UPDATE [RoomMembers] SET [ActionBy] = @p19, [LastActionDate] = @p20
OUTPUT 1
WHERE [Id] = @p21;
UPDATE [RoomMembers] SET [ActionBy] = @p22, [LastActionDate] = @p23
OUTPUT 1
WHERE [Id] = @p24;
UPDATE [Users] SET [LastActionDate] = @p25
OUTPUT 1
WHERE [Id] = @p26;
2025-09-16 13:10:38.860 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:10:38.861 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI) in 34.768ms
2025-09-16 13:10:38.861 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.SendMessageAsync (ChatSystem.UI)'
2025-09-16 13:10:38.861 +03:00 [INF] HTTP POST /api/Messages/Send responded 200 in 35.6805 ms
2025-09-16 13:10:38.861 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Messages/Send - 200 null application/json; charset=utf-8 36.3968ms
2025-09-16 13:19:13.991 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-09-16 13:19:14.055 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 64.3419ms
2025-09-16 13:19:14.168 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-09-16 13:19:14.169 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-09-16 13:19:14.170 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 1.7034ms
2025-09-16 13:19:14.190 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.5449ms
2025-09-16 13:19:14.638 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-09-16 13:19:14.721 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.7982ms
2025-09-16 13:29:37.117 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 13:29:37.118 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:29:37.118 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 0.9106ms
2025-09-16 13:29:37.133 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 13:29:37.133 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:29:37.135 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:29:37.135 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 13:29:37.147 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:29:37.260 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 13:29:37.260 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:29:37.261 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 125.8225ms
2025-09-16 13:29:37.261 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 13:29:37.261 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 127.3188 ms
2025-09-16 13:29:37.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 128.3873ms
2025-09-16 13:44:47.743 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 13:44:47.744 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:44:47.744 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.3173ms
2025-09-16 13:44:47.748 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 13:44:47.748 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:44:47.748 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:44:47.748 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 13:44:47.778 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:44:47.811 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 13:44:47.812 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:44:47.812 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 63.8698ms
2025-09-16 13:44:47.812 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:44:47.813 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 64.8191 ms
2025-09-16 13:44:47.813 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 65.264ms
2025-09-16 13:45:04.782 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 13:45:04.782 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:45:04.782 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.2683ms
2025-09-16 13:45:04.784 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 13:45:04.784 +03:00 [INF] CORS policy execution successful.
2025-09-16 13:45:04.784 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:45:04.785 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 13:45:04.798 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 13:45:04.808 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 13:45:04.809 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 13:45:04.810 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 24.895ms
2025-09-16 13:45:04.810 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 13:45:04.810 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 25.4561 ms
2025-09-16 13:45:04.810 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 25.9562ms
2025-09-16 14:10:49.613 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 14:10:49.617 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 4367671.8947 ms
2025-09-16 14:10:49.618 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=e2ENhDH2nFjkBHvG2OY4jw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0NzVjNjlkMS1mYjIzLTQ3ODgtOTIzZi0zZTg3ODcxZWJiMWEiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibWFoIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg2MTY1NzksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.wcdGvyCPaYFoZBt3k-QTxKkUGk0MTnvHYMyDf_SqmKQ - 200 null null 4367672.8461ms
2025-09-16 14:10:49.619 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 14:10:49.620 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 3636490.3378 ms
2025-09-16 14:10:49.637 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=C5Wg3mE2_g6qWNdnoV-YQw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 3636507.2284ms
2025-09-16 14:10:49.649 +03:00 [INF] Connection id "0HNFL0S3HAKA0", Request id "0HNFL0S3HAKA0:0000000B": the application completed without reading the entire request body.
2025-09-16 14:10:49.649 +03:00 [INF] Connection id "0HNFL0S3HAKA0", Request id "0HNFL0S3HAKA0:00000023": the application completed without reading the entire request body.
2025-09-16 14:11:44.415 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 14:11:44.416 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:44.417 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 1.7047ms
2025-09-16 14:11:44.430 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 14:11:44.430 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:44.431 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 14:11:44.432 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 14:11:44.433 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 2.3033 ms
2025-09-16 14:11:44.433 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 2.6881ms
2025-09-16 14:11:44.883 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 14:11:44.883 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:44.883 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.2263ms
2025-09-16 14:11:44.886 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 14:11:44.886 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:44.887 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 14:11:44.887 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 14:11:44.887 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 1.0016 ms
2025-09-16 14:11:44.888 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 1.3148ms
2025-09-16 14:11:44.969 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=VFubs4TAr-cnv90aCCgyfw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0NzVjNjlkMS1mYjIzLTQ3ODgtOTIzZi0zZTg3ODcxZWJiMWEiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibWFoIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg2MTY1NzksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.wcdGvyCPaYFoZBt3k-QTxKkUGk0MTnvHYMyDf_SqmKQ - null null
2025-09-16 14:11:44.969 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:44.970 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 14:11:45.093 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=EUtG7Iu2qPyfyel7ImFg0g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 14:11:45.093 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:45.094 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 14:11:45.230 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 14:11:45.230 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 136.3758 ms
2025-09-16 14:11:45.230 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=EUtG7Iu2qPyfyel7ImFg0g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 136.6946ms
2025-09-16 14:11:45.597 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 14:11:45.597 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:45.597 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.3755ms
2025-09-16 14:11:45.603 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 14:11:45.603 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:45.603 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:11:45.604 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 14:11:45.615 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 14:11:45.616 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:45.616 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.2243ms
2025-09-16 14:11:45.618 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 14:11:45.618 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:45.619 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 14:11:45.619 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 14:11:45.619 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 0.5686 ms
2025-09-16 14:11:45.619 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 0.9361ms
2025-09-16 14:11:45.622 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:11:45.673 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 14:11:45.674 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:11:45.675 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 71.2729ms
2025-09-16 14:11:45.675 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:11:45.675 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 72.0734 ms
2025-09-16 14:11:45.675 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 72.5897ms
2025-09-16 14:11:46.740 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=RYNbglrL58PJQTdNsNgiHA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-16 14:11:46.740 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:11:46.741 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 14:17:46.222 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 14:17:46.222 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 361252.4802 ms
2025-09-16 14:17:46.222 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=VFubs4TAr-cnv90aCCgyfw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0NzVjNjlkMS1mYjIzLTQ3ODgtOTIzZi0zZTg3ODcxZWJiMWEiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibWFoIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg2MTY1NzksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.wcdGvyCPaYFoZBt3k-QTxKkUGk0MTnvHYMyDf_SqmKQ - 200 null null 361252.8926ms
2025-09-16 14:17:46.782 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 14:17:46.782 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:17:46.782 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.5372ms
2025-09-16 14:17:46.784 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-16 14:17:46.784 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:17:46.784 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.2085ms
2025-09-16 14:17:46.824 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 14:17:46.824 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:17:46.825 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:17:46.825 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 14:17:46.848 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:17:46.849 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-16 14:17:46.849 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:17:46.850 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-16 14:17:46.850 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-16 14:17:46.850 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 0.6531 ms
2025-09-16 14:17:46.850 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 1.1181ms
2025-09-16 14:17:46.912 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 14:17:46.912 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:17:46.912 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 87.3353ms
2025-09-16 14:17:46.912 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:17:46.912 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 87.8890 ms
2025-09-16 14:17:46.913 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 88.5448ms
2025-09-16 14:17:47.129 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=uCXjWwiUjknlFSCxXj659A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0NzVjNjlkMS1mYjIzLTQ3ODgtOTIzZi0zZTg3ODcxZWJiMWEiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibWFoIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg2MTY1NzksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.wcdGvyCPaYFoZBt3k-QTxKkUGk0MTnvHYMyDf_SqmKQ - null null
2025-09-16 14:17:47.129 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:17:47.130 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-16 14:17:48.409 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 14:17:48.409 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:17:48.409 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:17:48.410 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 14:17:48.421 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 14:17:48.421 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:17:48.421 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.2804ms
2025-09-16 14:17:48.424 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:17:48.437 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 14:17:48.437 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:17:48.438 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:17:48.438 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 14:17:48.454 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:17:48.461 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 14:17:48.464 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:17:48.465 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 26.8415ms
2025-09-16 14:17:48.465 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:17:48.465 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 27.5978 ms
2025-09-16 14:17:48.465 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 27.9847ms
2025-09-16 14:17:48.485 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 14:17:48.485 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:17:48.485 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 75.4085ms
2025-09-16 14:17:48.485 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:17:48.485 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 76.0679 ms
2025-09-16 14:17:48.485 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 76.5194ms
2025-09-16 14:17:50.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 14:17:50.595 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:17:50.595 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:17:50.595 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 14:17:50.607 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:17:50.615 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 14:17:50.615 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:17:50.615 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 20.1095ms
2025-09-16 14:17:50.615 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:17:50.615 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 20.5618 ms
2025-09-16 14:17:50.616 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 20.8871ms
2025-09-16 14:18:00.394 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 14:18:00.394 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:00.394 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.1729ms
2025-09-16 14:18:00.400 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 14:18:00.400 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:00.400 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.1571ms
2025-09-16 14:18:00.407 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 14:18:00.407 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:00.408 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:18:00.408 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 14:18:00.408 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 14:18:00.408 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:00.409 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:18:00.409 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 14:18:00.424 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:18:00.424 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:18:00.429 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 14:18:00.429 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:18:00.430 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 20.7645ms
2025-09-16 14:18:00.430 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:18:00.430 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 21.2435 ms
2025-09-16 14:18:00.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 21.5439ms
2025-09-16 14:18:00.467 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 14:18:00.468 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:18:00.469 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 61.3593ms
2025-09-16 14:18:00.469 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:18:00.469 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 61.9015 ms
2025-09-16 14:18:00.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 62.354ms
2025-09-16 14:18:06.732 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 14:18:06.732 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:06.732 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.197ms
2025-09-16 14:18:06.744 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 14:18:06.744 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:06.745 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:18:06.746 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 14:18:06.750 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:18:06.753 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 14:18:06.753 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:18:06.753 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 7.382ms
2025-09-16 14:18:06.753 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:18:06.753 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 8.9793 ms
2025-09-16 14:18:06.754 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 9.3149ms
2025-09-16 14:18:12.170 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - null null
2025-09-16 14:18:12.171 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:12.171 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 204 null null 0.9816ms
2025-09-16 14:18:12.175 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - application/json null
2025-09-16 14:18:12.175 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:12.175 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 14:18:12.176 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 14:18:12.179 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 14:18:12.179 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:12.179 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.4336ms
2025-09-16 14:18:12.183 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 14:18:12.184 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:18:12.184 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:18:12.184 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 14:18:12.192 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:18:12.197 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:18:12.207 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 14:18:12.208 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:18:12.210 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 25.9219ms
2025-09-16 14:18:12.210 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:18:12.210 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 26.7384 ms
2025-09-16 14:18:12.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 27.4347ms
2025-09-16 14:18:12.281 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 14:18:12.281 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:18:12.281 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 105.634ms
2025-09-16 14:18:12.282 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 14:18:12.282 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840 responded 200 in 106.3637 ms
2025-09-16 14:18:12.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/849f1dd0-2db5-4700-a3e3-88421a20f840?page=1&pageSize=50 - 200 null application/json; charset=utf-8 107.0318ms
2025-09-16 14:19:13.490 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - null null
2025-09-16 14:19:13.490 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:13.490 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 204 null null 0.7309ms
2025-09-16 14:19:13.497 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - application/json null
2025-09-16 14:19:13.498 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:13.498 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 14:19:13.498 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 14:19:13.507 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:19:13.581 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 14:19:13.581 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:19:13.581 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 83.3931ms
2025-09-16 14:19:13.582 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 14:19:13.582 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d responded 200 in 83.9472 ms
2025-09-16 14:19:13.582 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/b85ba339-423d-4c31-b7ac-f81c727bca2d?page=1&pageSize=50 - 200 null application/json; charset=utf-8 84.3506ms
2025-09-16 14:19:19.090 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - null null
2025-09-16 14:19:19.091 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:19.091 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 204 null null 0.5403ms
2025-09-16 14:19:19.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - application/json null
2025-09-16 14:19:19.097 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:19.097 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 14:19:19.097 +03:00 [INF] Route matched with {action = "GetMessages", controller = "Messages"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesAsync(System.Guid, Int32, Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.MessagesController (ChatSystem.UI).
2025-09-16 14:19:19.104 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ChatRooms] AS [c]
        WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__request_ChatRoomId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:19:19.155 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__request_ChatRoomId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[RoomMemberId], [c].[Message], [c].[FilePath], [c].[IsRead], [c].[LastActionDate], COALESCE([u].[FirstName], N'') + N' ' + COALESCE([u].[LastName], N''), [u].[ProfileImageUrl], [r0].[Id], [u].[Id], [t].[Id], [t].[RoomMemberId], [t].[Message], [t].[FilePath], [t].[Timestamp], [t].[SenderName], [t].[SenderProfileImage], [t].[Id0], [t].[Id1]
FROM [ChatMessages] AS [c]
INNER JOIN [RoomMembers] AS [r0] ON [c].[RoomMemberId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r0].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[RoomMemberId], [c0].[Message], [c0].[FilePath], [c0].[LastActionDate] AS [Timestamp], COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'') AS [SenderName], [u0].[ProfileImageUrl] AS [SenderProfileImage], [r1].[Id] AS [Id0], [u0].[Id] AS [Id1], [c0].[ChatMessageId]
    FROM [ChatMessageReplies] AS [c0]
    INNER JOIN [RoomMembers] AS [r1] ON [c0].[RoomMemberId] = [r1].[Id]
    INNER JOIN [Users] AS [u0] ON [r1].[UserId] = [u0].[Id]
) AS [t] ON [c].[Id] = [t].[ChatMessageId]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND EXISTS (
    SELECT 1
    FROM [RoomMembers] AS [r]
    WHERE [r].[Id] = [c].[RoomMemberId] AND [r].[ChatRoomId] = @__request_ChatRoomId_0)
ORDER BY [c].[LastActionDate] DESC, [c].[Id], [r0].[Id], [u].[Id], [t].[Timestamp], [t].[Id], [t].[Id0]
2025-09-16 14:19:19.156 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Messages.GetMessages.MessageDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:19:19.157 +03:00 [INF] Executed action ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI) in 60.1553ms
2025-09-16 14:19:19.157 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.MessagesController.GetMessagesAsync (ChatSystem.UI)'
2025-09-16 14:19:19.157 +03:00 [INF] HTTP GET /api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b responded 200 in 60.7692 ms
2025-09-16 14:19:19.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Messages/RoomMessages/1fd27797-0444-4aec-90c3-d964b1cfc85b?page=1&pageSize=50 - 200 null application/json; charset=utf-8 61.2543ms
2025-09-16 14:19:29.306 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-09-16 14:19:29.307 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:29.307 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.2484ms
2025-09-16 14:19:29.321 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-09-16 14:19:29.322 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:29.322 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.3018ms
2025-09-16 14:19:29.327 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-16 14:19:29.327 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:29.327 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.2777ms
2025-09-16 14:19:29.338 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-09-16 14:19:29.338 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:29.338 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 14:19:29.339 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-09-16 14:19:29.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-09-16 14:19:29.340 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:29.341 +03:00 [INF] HTTP GET /api/Users responded 404 in 0.7721 ms
2025-09-16 14:19:29.341 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 1.866ms
2025-09-16 14:19:29.343 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-09-16 14:19:29.343 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 14:19:29.344 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:29.344 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:19:29.344 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 14:19:29.346 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-09-16 14:19:29.347 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:19:29.348 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 9.5662ms
2025-09-16 14:19:29.348 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 14:19:29.349 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 10.4109 ms
2025-09-16 14:19:29.349 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 11.202ms
2025-09-16 14:19:29.352 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:19:29.378 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:19:29.379 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 34.3335ms
2025-09-16 14:19:29.379 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:19:29.379 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 400 in 34.8500 ms
2025-09-16 14:19:29.379 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 499 null application/json; charset=utf-8 35.3303ms
2025-09-16 14:19:30.486 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-16 14:19:30.486 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:30.487 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:19:30.487 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-16 14:19:30.490 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:19:30.541 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-16 14:19:30.541 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:19:30.541 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 54.176ms
2025-09-16 14:19:30.541 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-16 14:19:30.541 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 54.8429 ms
2025-09-16 14:19:30.542 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 55.292ms
2025-09-16 14:19:36.272 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-09-16 14:19:36.272 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:36.272 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.221ms
2025-09-16 14:19:36.289 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-09-16 14:19:36.289 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:36.290 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 14:19:36.290 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-09-16 14:19:36.293 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-09-16 14:19:36.294 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:19:36.294 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 4.0973ms
2025-09-16 14:19:36.294 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-09-16 14:19:36.294 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 4.6327 ms
2025-09-16 14:19:36.294 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 5.1236ms
2025-09-16 14:19:37.706 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-16 14:19:37.706 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:37.706 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.4286ms
2025-09-16 14:19:37.738 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-16 14:19:37.738 +03:00 [INF] CORS policy execution successful.
2025-09-16 14:19:37.738 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:19:37.738 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-16 14:19:37.746 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-16 14:19:37.750 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-16 14:19:37.750 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-16 14:19:37.751 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 12.192ms
2025-09-16 14:19:37.751 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-16 14:19:37.751 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 12.6674 ms
2025-09-16 14:19:37.751 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 13.0685ms
2025-09-16 15:07:47.133 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 15:07:47.137 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 3000006.7615 ms
2025-09-16 15:07:47.144 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=uCXjWwiUjknlFSCxXj659A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0NzVjNjlkMS1mYjIzLTQ3ODgtOTIzZi0zZTg3ODcxZWJiMWEiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibWFoIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg2MTY1NzksImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.wcdGvyCPaYFoZBt3k-QTxKkUGk0MTnvHYMyDf_SqmKQ - 200 null null 3000012.5999ms
2025-09-16 15:08:14.523 +03:00 [INF] Application is shutting down...
2025-09-16 15:08:14.546 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-16 15:08:14.546 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 3387806.2037 ms
2025-09-16 15:08:14.547 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=RYNbglrL58PJQTdNsNgiHA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 3387806.81ms
2025-09-16 15:08:14.549 +03:00 [INF] Connection id "0HNFL0S3HAKA6", Request id "0HNFL0S3HAKA6:0000000B": the application completed without reading the entire request body.
