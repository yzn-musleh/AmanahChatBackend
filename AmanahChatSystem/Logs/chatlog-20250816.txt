2025-08-16 11:42:50.358 +03:00 [INF] Application is shutting down...
2025-08-16 15:56:52.685 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-16 15:56:52.898 +03:00 [INF] Creating key {b3ab0187-0e73-46eb-9754-4aaabd47e9bc} with creation date 2025-08-16 12:56:52Z, activation date 2025-08-17 14:40:08Z, and expiration date 2025-11-14 12:56:52Z.
2025-08-16 15:56:52.912 +03:00 [INF] Writing data to file 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ab0187-0e73-46eb-9754-4aaabd47e9bc.xml'.
2025-08-16 15:56:53.106 +03:00 [INF] Now listening on: https://localhost:7003
2025-08-16 15:56:53.106 +03:00 [INF] Now listening on: http://localhost:5277
2025-08-16 15:56:53.109 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-16 15:56:53.109 +03:00 [INF] Hosting environment: Development
2025-08-16 15:56:53.109 +03:00 [INF] Content root path: C:\Users\hp\Downloads\AmanahChatSystem_Updated\AmanahChatSystem
2025-08-16 15:56:53.663 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-08-16 15:56:53.908 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 248.0516ms
2025-08-16 15:56:54.076 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-08-16 15:56:54.082 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.0283ms
2025-08-16 15:56:54.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-08-16 15:56:54.161 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.7406ms
2025-08-16 15:56:55.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-08-16 15:56:55.344 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 182.7956ms
2025-08-16 15:57:41.601 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-08-16 15:57:41.613 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:41.617 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 15.237ms
2025-08-16 15:57:41.629 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 35
2025-08-16 15:57:41.638 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:41.724 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 15:57:41.791 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-16 15:57:44.801 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-08-16 15:57:45.096 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-16 15:57:45.142 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 3343.1762ms
2025-08-16 15:57:45.143 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 15:57:45.148 +03:00 [INF] HTTP POST /api/Users/Login responded 200 in 3499.3861 ms
2025-08-16 15:57:45.160 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 200 null application/json; charset=utf-8 3530.7999ms
2025-08-16 15:57:45.245 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-08-16 15:57:45.245 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:45.245 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.8359ms
2025-08-16 15:57:45.290 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-08-16 15:57:45.290 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:45.291 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.6977ms
2025-08-16 15:57:45.312 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-16 15:57:45.312 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:45.313 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 1.1218ms
2025-08-16 15:57:45.318 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-16 15:57:45.319 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:45.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-08-16 15:57:45.327 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:45.334 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-16 15:57:45.338 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:45.419 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-16 15:57:45.419 +03:00 [INF] HTTP GET /api/Users responded 404 in 91.1359 ms
2025-08-16 15:57:45.419 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 92.3997ms
2025-08-16 15:57:45.420 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-08-16 15:57:45.429 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 15:57:45.431 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-16 15:57:45.436 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-16 15:57:45.605 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-16 15:57:45.611 +03:00 [ERR] An error occurred using the connection to database 'AmanahChatDB' on server 'YZN\SQLEXPRESS'.
2025-08-16 15:57:45.623 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 15:57:45.640 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 203.2247ms
2025-08-16 15:57:45.640 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 15:57:45.640 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 400 in 301.5178 ms
2025-08-16 15:57:45.640 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 499 null application/json; charset=utf-8 306.0776ms
2025-08-16 15:57:45.670 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 15:57:45.678 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 246.8969ms
2025-08-16 15:57:45.678 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-16 15:57:45.678 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 358.4626 ms
2025-08-16 15:57:45.679 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 499 null application/json; charset=utf-8 360.5308ms
2025-08-16 15:57:47.252 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-16 15:57:47.253 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:47.253 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 1.3364ms
2025-08-16 15:57:47.308 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-16 15:57:47.308 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:47.311 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-16 15:57:47.319 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-16 15:57:47.361 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 15:57:47.391 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-16 15:57:47.399 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 15:57:47.404 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 84.6428ms
2025-08-16 15:57:47.404 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-16 15:57:47.404 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 95.8416 ms
2025-08-16 15:57:47.405 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 96.9661ms
2025-08-16 15:57:49.782 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-08-16 15:57:49.783 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:49.784 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 1.7676ms
2025-08-16 15:57:49.786 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 152
2025-08-16 15:57:49.787 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:57:49.788 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-08-16 15:57:49.797 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-08-16 15:57:49.835 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__workspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__userId_0 AND [u].[WorkspaceId] = @__workspaceId_1 AND [u].[IsAdmin] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 15:57:49.839 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-08-16 15:57:49.844 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-08-16 15:57:49.844 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 47.201ms
2025-08-16 15:57:49.844 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-08-16 15:57:49.844 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 403 in 57.1262 ms
2025-08-16 15:57:49.845 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 403 0 null 58.1439ms
2025-08-16 15:58:16.685 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-08-16 15:58:16.685 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:16.686 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 0.7186ms
2025-08-16 15:58:16.691 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 35
2025-08-16 15:58:16.692 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:16.692 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 15:58:16.692 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-16 15:58:16.714 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-08-16 15:58:16.715 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-16 15:58:16.715 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 22.8321ms
2025-08-16 15:58:16.716 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 15:58:16.716 +03:00 [INF] HTTP POST /api/Users/Login responded 200 in 23.8500 ms
2025-08-16 15:58:16.716 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 200 null application/json; charset=utf-8 24.7606ms
2025-08-16 15:58:16.804 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-08-16 15:58:16.804 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:16.805 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.6578ms
2025-08-16 15:58:16.835 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-08-16 15:58:16.835 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:16.835 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.5542ms
2025-08-16 15:58:16.858 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-16 15:58:16.859 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:16.859 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.807ms
2025-08-16 15:58:16.883 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-16 15:58:16.884 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:16.884 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-16 15:58:16.885 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-16 15:58:16.891 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-08-16 15:58:16.892 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:16.893 +03:00 [INF] HTTP GET /api/Users responded 404 in 0.8371 ms
2025-08-16 15:58:16.893 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 2.1969ms
2025-08-16 15:58:16.894 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-08-16 15:58:16.897 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-16 15:58:16.898 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:16.902 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 15:58:16.902 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-16 15:58:16.905 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-16 15:58:16.908 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 15:58:16.909 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 24.1097ms
2025-08-16 15:58:16.909 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-16 15:58:16.909 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 25.3513 ms
2025-08-16 15:58:16.910 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 26.4458ms
2025-08-16 15:58:16.917 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 15:58:17.146 +03:00 [ERR] An error occurred using the connection to database 'AmanahChatDB' on server 'YZN\SQLEXPRESS'.
2025-08-16 15:58:17.147 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 15:58:17.147 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 245.493ms
2025-08-16 15:58:17.148 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 15:58:17.148 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 400 in 249.8564 ms
2025-08-16 15:58:17.148 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 499 null application/json; charset=utf-8 250.6819ms
2025-08-16 15:58:20.048 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-16 15:58:20.048 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:20.053 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 15:58:20.053 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-16 15:58:20.063 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 15:58:20.077 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-08-16 15:58:20.077 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:20.078 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.4245ms
2025-08-16 15:58:20.105 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-08-16 15:58:20.106 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:20.107 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-08-16 15:58:20.116 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-08-16 15:58:20.116 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 9.7300 ms
2025-08-16 15:58:20.116 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 10.4416ms
2025-08-16 15:58:20.141 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-16 15:58:20.142 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 15:58:20.147 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 93.3503ms
2025-08-16 15:58:20.147 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 15:58:20.147 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 98.3058 ms
2025-08-16 15:58:20.147 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 99.2199ms
2025-08-16 15:58:20.151 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=ycmRiqqyXomP5ZpRW8j5Uw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZmQ0ZTQ0My0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTUzNTI2OTYsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.uxyKa6STGvnzI4ZityfjiIWe4q_rJ1Buz7F5_cLLJ1Q - null null
2025-08-16 15:58:20.151 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:20.152 +03:00 [INF] Executing endpoint '/chatHub'
2025-08-16 15:58:21.064 +03:00 [INF] Executed endpoint '/chatHub'
2025-08-16 15:58:21.064 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 912.2530 ms
2025-08-16 15:58:21.064 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=ycmRiqqyXomP5ZpRW8j5Uw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZmQ0ZTQ0My0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTUzNTI2OTYsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.uxyKa6STGvnzI4ZityfjiIWe4q_rJ1Buz7F5_cLLJ1Q - 200 null null 912.7861ms
2025-08-16 15:58:21.908 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-16 15:58:21.909 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:21.910 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-08-16 15:58:21.910 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:21.910 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 15:58:21.910 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.2679ms
2025-08-16 15:58:21.910 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-16 15:58:21.920 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 15:58:21.959 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-16 15:58:21.960 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 15:58:21.961 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 50.742ms
2025-08-16 15:58:21.961 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 15:58:21.961 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 51.9342 ms
2025-08-16 15:58:21.962 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 53.1525ms
2025-08-16 15:58:21.988 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-08-16 15:58:21.989 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:21.990 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-08-16 15:58:21.991 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-08-16 15:58:21.991 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 1.6458 ms
2025-08-16 15:58:21.991 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 2.5475ms
2025-08-16 15:58:22.127 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=yyzDdRWqWacOcBr4q0HlAw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZmQ0ZTQ0My0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTUzNTI2OTYsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.uxyKa6STGvnzI4ZityfjiIWe4q_rJ1Buz7F5_cLLJ1Q - null null
2025-08-16 15:58:22.128 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:22.128 +03:00 [INF] Executing endpoint '/chatHub'
2025-08-16 15:58:25.510 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-16 15:58:25.510 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:25.511 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.8327ms
2025-08-16 15:58:25.564 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-16 15:58:25.564 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:25.565 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-16 15:58:25.566 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-16 15:58:25.573 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 15:58:25.581 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-16 15:58:25.582 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 15:58:25.583 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 16.8638ms
2025-08-16 15:58:25.583 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-16 15:58:25.583 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 17.9639 ms
2025-08-16 15:58:25.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 18.8817ms
2025-08-16 15:58:26.468 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-08-16 15:58:26.469 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:26.469 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 0.7145ms
2025-08-16 15:58:26.474 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 152
2025-08-16 15:58:26.474 +03:00 [INF] CORS policy execution successful.
2025-08-16 15:58:26.475 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-08-16 15:58:26.475 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-08-16 15:58:26.487 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__workspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__userId_0 AND [u].[WorkspaceId] = @__workspaceId_1 AND [u].[IsAdmin] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 15:58:26.487 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-08-16 15:58:26.488 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-08-16 15:58:26.488 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 12.1922ms
2025-08-16 15:58:26.488 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-08-16 15:58:26.488 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 403 in 13.6941 ms
2025-08-16 15:58:26.488 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 403 0 null 14.2742ms
2025-08-16 16:00:54.041 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-08-16 16:00:54.041 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:54.041 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 0.6291ms
2025-08-16 16:00:54.045 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 40
2025-08-16 16:00:54.045 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:54.045 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 16:00:54.046 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-16 16:00:54.061 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-08-16 16:00:54.061 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-16 16:00:54.061 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 15.5731ms
2025-08-16 16:00:54.061 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 16:00:54.062 +03:00 [INF] HTTP POST /api/Users/Login responded 400 in 16.2469 ms
2025-08-16 16:00:54.062 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 400 null application/json; charset=utf-8 16.8777ms
2025-08-16 16:00:56.819 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 41
2025-08-16 16:00:56.819 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:56.819 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 16:00:56.819 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-16 16:00:56.830 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-08-16 16:00:56.831 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-16 16:00:56.832 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 12.3137ms
2025-08-16 16:00:56.832 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 16:00:56.832 +03:00 [INF] HTTP POST /api/Users/Login responded 200 in 13.0496 ms
2025-08-16 16:00:56.832 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 200 null application/json; charset=utf-8 13.7184ms
2025-08-16 16:00:56.888 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-08-16 16:00:56.888 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=898d92c8-aa48-47b8-8167-d6da93bda2ae - null null
2025-08-16 16:00:56.888 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-08-16 16:00:56.888 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:56.888 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:56.888 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:56.888 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.5264ms
2025-08-16 16:00:56.888 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=898d92c8-aa48-47b8-8167-d6da93bda2ae - 204 null null 0.5203ms
2025-08-16 16:00:56.888 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.512ms
2025-08-16 16:00:56.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=898d92c8-aa48-47b8-8167-d6da93bda2ae - application/json null
2025-08-16 16:00:56.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-16 16:00:56.896 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:56.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-08-16 16:00:56.896 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:56.896 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:56.897 +03:00 [INF] HTTP GET /api/Users responded 404 in 0.5157 ms
2025-08-16 16:00:56.897 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 16:00:56.897 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 1.2974ms
2025-08-16 16:00:56.897 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-08-16 16:00:56.897 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-16 16:00:56.898 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-16 16:00:56.898 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-16 16:00:56.908 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-16 16:00:56.909 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 16:00:56.909 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 16:00:56.909 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 11.4874ms
2025-08-16 16:00:56.909 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-16 16:00:56.909 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 12.2746 ms
2025-08-16 16:00:56.910 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 200 null application/json; charset=utf-8 13.4045ms
2025-08-16 16:00:56.974 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 16:00:56.975 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 77.7877ms
2025-08-16 16:00:56.975 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 16:00:56.976 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 400 in 78.9720 ms
2025-08-16 16:00:56.976 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=898d92c8-aa48-47b8-8167-d6da93bda2ae - 499 null application/json; charset=utf-8 79.688ms
2025-08-16 16:00:58.207 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - null null
2025-08-16 16:00:58.207 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:58.208 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 204 null null 0.5972ms
2025-08-16 16:00:58.211 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - application/json null
2025-08-16 16:00:58.211 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:58.212 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-16 16:00:58.212 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-16 16:00:58.222 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkSpaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 16:00:58.227 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkSpaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkSpaceId_0
2025-08-16 16:00:58.228 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 16:00:58.228 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 15.9317ms
2025-08-16 16:00:58.228 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-08-16 16:00:58.229 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 16.7026 ms
2025-08-16 16:00:58.229 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=988cd920-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 17.5778ms
2025-08-16 16:00:59.541 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-08-16 16:00:59.541 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:59.542 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 0.2979ms
2025-08-16 16:00:59.544 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 152
2025-08-16 16:00:59.544 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:59.544 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-08-16 16:00:59.544 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-08-16 16:00:59.552 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__workspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__userId_0 AND [u].[WorkspaceId] = @__workspaceId_1 AND [u].[IsAdmin] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 16:00:59.565 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 16:00:59.567 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 22.7872ms
2025-08-16 16:00:59.567 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-08-16 16:00:59.567 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 200 in 23.4885 ms
2025-08-16 16:00:59.568 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 200 null application/json; charset=utf-8 23.9843ms
2025-08-16 16:00:59.604 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-08-16 16:00:59.604 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=898d92c8-aa48-47b8-8167-d6da93bda2ae - application/json null
2025-08-16 16:00:59.604 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:59.604 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:59.604 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.4285ms
2025-08-16 16:00:59.605 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 16:00:59.605 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Guid, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-16 16:00:59.616 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 16:00:59.621 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-08-16 16:00:59.621 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:59.622 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-08-16 16:00:59.622 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-08-16 16:00:59.623 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 1.5397 ms
2025-08-16 16:00:59.623 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 2.0959ms
2025-08-16 16:00:59.628 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=0wkXl9BnOCd-qgyT-9If7g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI4OThkOTJjOC1hYTQ4LTQ3YjgtODE2Ny1kNmRhOTNiZGEyYWUiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibW1tIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTUzNTI4NTYsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.uvy1fsYwydqWsmJSNoEkNu4iASoShZKMy6ddS-Yr1gE - null null
2025-08-16 16:00:59.628 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:00:59.629 +03:00 [INF] Executing endpoint '/chatHub'
2025-08-16 16:00:59.652 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-16 16:00:59.653 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 16:00:59.653 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 48.182ms
2025-08-16 16:00:59.653 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 16:00:59.653 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 49.0632 ms
2025-08-16 16:00:59.654 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=898d92c8-aa48-47b8-8167-d6da93bda2ae - 200 null application/json; charset=utf-8 49.7005ms
2025-08-16 16:01:10.248 +03:00 [INF] Executed endpoint '/chatHub'
2025-08-16 16:01:10.248 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 10619.5994 ms
2025-08-16 16:01:10.248 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=0wkXl9BnOCd-qgyT-9If7g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI4OThkOTJjOC1hYTQ4LTQ3YjgtODE2Ny1kNmRhOTNiZGEyYWUiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibW1tIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTUzNTI4NTYsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.uvy1fsYwydqWsmJSNoEkNu4iASoShZKMy6ddS-Yr1gE - 200 null null 10620.0223ms
2025-08-16 16:04:01.438 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-16 16:04:01.630 +03:00 [INF] Now listening on: https://localhost:7003
2025-08-16 16:04:01.631 +03:00 [INF] Now listening on: http://localhost:5277
2025-08-16 16:04:01.636 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-16 16:04:01.637 +03:00 [INF] Hosting environment: Development
2025-08-16 16:04:01.638 +03:00 [INF] Content root path: C:\Users\hp\Downloads\AmanahChatSystem_Updated\AmanahChatSystem
2025-08-16 16:04:01.939 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-08-16 16:04:01.939 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-08-16 16:04:01.997 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:02.004 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 67.548ms
2025-08-16 16:04:02.018 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-08-16 16:04:02.022 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:02.092 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-16 16:04:02.097 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-16 16:04:02.100 +03:00 [INF] HTTP POST /chathub/negotiate responded 401 in 61.5128 ms
2025-08-16 16:04:02.102 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 401 0 null 83.887ms
2025-08-16 16:04:02.194 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 259.7197ms
2025-08-16 16:04:02.372 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-08-16 16:04:02.378 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.5884ms
2025-08-16 16:04:02.379 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-08-16 16:04:02.429 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.9753ms
2025-08-16 16:04:03.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-08-16 16:04:03.608 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 177.3473ms
2025-08-16 16:04:08.740 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - null null
2025-08-16 16:04:08.741 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:08.742 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/Login - 204 null null 1.5677ms
2025-08-16 16:04:08.749 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/Users/Login - application/json 35
2025-08-16 16:04:08.756 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:08.767 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 16:04:08.812 +03:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.Commands.Users.LoginUser.LoginUserRequest, System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-08-16 16:04:11.608 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__request_UserName_0='?' (Size = 4000), @__request_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__request_UserName_0 AND [u].[Password] = @__request_Password_1
2025-08-16 16:04:11.880 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[Application.Commands.Users.LoginUser.GetLoggedUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-16 16:04:11.925 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI) in 3107.2791ms
2025-08-16 16:04:11.926 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.Login (ChatSystem.UI)'
2025-08-16 16:04:11.928 +03:00 [INF] HTTP POST /api/Users/Login responded 200 in 3171.2710 ms
2025-08-16 16:04:11.940 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/Users/Login - 200 null application/json; charset=utf-8 3190.8819ms
2025-08-16 16:04:12.050 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - null null
2025-08-16 16:04:12.051 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:12.051 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Workspaces - 204 null null 0.6836ms
2025-08-16 16:04:12.068 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users - null null
2025-08-16 16:04:12.068 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - null null
2025-08-16 16:04:12.068 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:12.068 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users - 204 null null 0.5363ms
2025-08-16 16:04:12.068 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:12.069 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 204 null null 0.9711ms
2025-08-16 16:04:12.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Workspaces - application/json null
2025-08-16 16:04:12.081 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:12.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users - application/json null
2025-08-16 16:04:12.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-16 16:04:12.083 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:12.085 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:12.166 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-16 16:04:12.166 +03:00 [INF] HTTP GET /api/Users responded 404 in 82.8578 ms
2025-08-16 16:04:12.166 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users - 404 0 null 84.0452ms
2025-08-16 16:04:12.167 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7003/api/Users, Response status code: 404
2025-08-16 16:04:12.171 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 16:04:12.180 +03:00 [INF] Route matched with {action = "GetWorkspaces", controller = "Workspaces"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWorkspaces(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.WorkspacesController (ChatSystem.UI).
2025-08-16 16:04:12.182 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-16 16:04:12.383 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActionBy], [w].[Email], [w].[IsDeleted], [w].[LastActionDate], [w].[Metadata], [w].[Name]
FROM [Workspaces] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-16 16:04:12.391 +03:00 [ERR] An error occurred using the connection to database 'AmanahChatDB' on server 'YZN\SQLEXPRESS'.
2025-08-16 16:04:12.400 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 16:04:12.413 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 230.4227ms
2025-08-16 16:04:12.413 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 16:04:12.413 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 400 in 327.5183 ms
2025-08-16 16:04:12.414 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 499 null application/json; charset=utf-8 331.1482ms
2025-08-16 16:04:12.445 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Workspaces.GetWorkspaceDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 16:04:12.451 +03:00 [INF] Executed action ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI) in 270.105ms
2025-08-16 16:04:12.451 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.WorkspacesController.GetWorkspaces (ChatSystem.UI)'
2025-08-16 16:04:12.451 +03:00 [INF] HTTP GET /api/Workspaces responded 200 in 369.3380 ms
2025-08-16 16:04:12.451 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Workspaces - 499 null application/json; charset=utf-8 370.7761ms
2025-08-16 16:04:15.362 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - application/json null
2025-08-16 16:04:15.362 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:15.367 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 16:04:15.367 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-08-16 16:04:15.381 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-08-16 16:04:15.381 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:15.382 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.8096ms
2025-08-16 16:04:15.405 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-08-16 16:04:15.406 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:15.407 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-16 16:04:15.407 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-08-16 16:04:15.415 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-08-16 16:04:15.415 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 8.0645 ms
2025-08-16 16:04:15.415 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 9.6917ms
2025-08-16 16:04:15.427 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=wzYqjC9JPhdpv-wSOjWkGw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZmQ0ZTQ0My0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTUzNTMwNTEsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.T7GMoKBjju1xu5bDUfDVkuKRUDuMUzpH9J-DCqetlSE - null null
2025-08-16 16:04:15.427 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:04:15.429 +03:00 [INF] Executing endpoint '/chatHub'
2025-08-16 16:04:15.708 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-08-16 16:04:15.711 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-16 16:04:15.716 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 348.5601ms
2025-08-16 16:04:15.716 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-08-16 16:04:15.716 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 353.4118 ms
2025-08-16 16:04:15.716 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser?userId=afd4e443-225c-f011-92b0-10683856fb96 - 200 null application/json; charset=utf-8 354.4332ms
2025-08-16 16:15:35.657 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-16 16:15:35.929 +03:00 [INF] Now listening on: https://localhost:7003
2025-08-16 16:15:35.930 +03:00 [INF] Now listening on: http://localhost:5277
2025-08-16 16:15:35.933 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-16 16:15:35.934 +03:00 [INF] Hosting environment: Development
2025-08-16 16:15:35.934 +03:00 [INF] Content root path: C:\Users\hp\Downloads\AmanahChatSystem_Updated\AmanahChatSystem
2025-08-16 16:15:36.207 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-08-16 16:15:36.233 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:15:36.237 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 32.6583ms
2025-08-16 16:15:36.248 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-08-16 16:15:36.253 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:15:36.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-08-16 16:15:36.386 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-08-16 16:15:36.396 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-08-16 16:15:36.397 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 128.6254 ms
2025-08-16 16:15:36.398 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 150.2545ms
2025-08-16 16:15:36.423 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=NmGfHxKeiFW3lxKgxfKzLg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZmQ0ZTQ0My0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiI5ODhjZDkyMC0yMjVjLWYwMTEtOTJiMC0xMDY4Mzg1NmZiOTYiLCJleHAiOjE3NTUzNTMwNTEsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.T7GMoKBjju1xu5bDUfDVkuKRUDuMUzpH9J-DCqetlSE - null null
2025-08-16 16:15:36.424 +03:00 [INF] CORS policy execution successful.
2025-08-16 16:15:36.431 +03:00 [INF] Executing endpoint '/chatHub'
2025-08-16 16:15:36.643 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 316.6013ms
2025-08-16 16:15:36.747 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-08-16 16:15:36.748 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-08-16 16:15:36.752 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.3977ms
2025-08-16 16:15:36.789 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.1228ms
2025-08-16 16:15:37.019 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-08-16 16:15:37.196 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 177.0209ms
2025-08-16 16:18:46.645 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-16 16:18:46.781 +03:00 [INF] Now listening on: https://localhost:7003
2025-08-16 16:18:46.781 +03:00 [INF] Now listening on: http://localhost:5277
2025-08-16 16:18:46.783 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-16 16:18:46.784 +03:00 [INF] Hosting environment: Development
2025-08-16 16:18:46.784 +03:00 [INF] Content root path: C:\Users\hp\Downloads\AmanahChatSystem_Updated\AmanahChatSystem
2025-08-16 16:18:47.195 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-08-16 16:18:47.384 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 190.4222ms
2025-08-16 16:18:47.494 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-08-16 16:18:47.497 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-08-16 16:18:47.500 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.9147ms
2025-08-16 16:18:47.534 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.7505ms
2025-08-16 16:18:47.784 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-08-16 16:18:47.931 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 146.9334ms
2025-08-16 16:19:03.802 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - application/json 353
2025-08-16 16:19:03.811 +03:00 [INF] CORS policy execution failed.
2025-08-16 16:19:03.812 +03:00 [INF] Request origin https://localhost:7003 does not have permission to access the resource.
2025-08-16 16:19:03.888 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-16 16:19:03.895 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-16 16:19:03.900 +03:00 [INF] HTTP POST /api/ChatRooms/Add responded 401 in 77.8491 ms
2025-08-16 16:19:03.902 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/ChatRooms/Add - 401 0 null 100.5401ms
