2025-09-18 16:40:38.991 +03:00 [INF] User profile is available. Using 'C:\Users\hp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-18 16:40:39.153 +03:00 [INF] Now listening on: https://localhost:7003
2025-09-18 16:40:39.153 +03:00 [INF] Now listening on: http://localhost:5277
2025-09-18 16:40:39.155 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-18 16:40:39.156 +03:00 [INF] Hosting environment: Development
2025-09-18 16:40:39.156 +03:00 [INF] Content root path: C:\Users\hp\Projects\Dotnet projects\AmanahChatBackend\AmanahChatSystem
2025-09-18 16:40:40.037 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/index.html - null null
2025-09-18 16:40:40.316 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/index.html - 200 null text/html;charset=utf-8 281.057ms
2025-09-18 16:40:40.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_vs/browserLink - null null
2025-09-18 16:40:40.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - null null
2025-09-18 16:40:40.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.0823ms
2025-09-18 16:40:40.441 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.1381ms
2025-09-18 16:40:40.831 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - null null
2025-09-18 16:40:41.049 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 217.9611ms
2025-09-18 16:42:00.163 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-18 16:42:00.165 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-18 16:42:00.171 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:00.171 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:00.173 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 10.7336ms
2025-09-18 16:42:00.173 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 8.3058ms
2025-09-18 16:42:00.182 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-18 16:42:00.188 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-18 16:42:00.188 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:00.188 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:00.399 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-18 16:42:00.399 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 16:42:00.408 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-18 16:42:00.411 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 214.2675 ms
2025-09-18 16:42:00.413 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 224.9663ms
2025-09-18 16:42:00.439 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-18 16:42:00.474 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=QVO4wu5Cdwmk0xpRMD1eRw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-18 16:42:00.474 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:00.482 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-18 16:42:02.242 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-18 16:42:02.535 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-18 16:42:02.556 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:42:02.597 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 2152.4145ms
2025-09-18 16:42:02.598 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 16:42:02.599 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 2404.8809 ms
2025-09-18 16:42:02.608 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 2426.4588ms
2025-09-18 16:42:11.301 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-09-18 16:42:11.302 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:11.302 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 0.7939ms
2025-09-18 16:42:11.304 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 50
2025-09-18 16:42:11.305 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:11.307 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 16:42:11.314 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-09-18 16:42:11.531 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_UserId2_0='?' (DbType = Guid), @__request_WorkspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId2_0 AND [u].[WorkspaceId] = @__request_WorkspaceId_1
2025-09-18 16:42:11.535 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:42:11.537 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 223.0901ms
2025-09-18 16:42:11.537 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 16:42:11.537 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 200 in 231.7362 ms
2025-09-18 16:42:11.537 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 200 null application/json; charset=utf-8 233.2803ms
2025-09-18 16:42:48.089 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-09-18 16:42:48.090 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:48.090 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 0.6431ms
2025-09-18 16:42:48.095 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 50
2025-09-18 16:42:48.095 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:48.096 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 16:42:48.096 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-09-18 16:42:48.126 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_UserId2_0='?' (DbType = Guid), @__request_WorkspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId2_0 AND [u].[WorkspaceId] = @__request_WorkspaceId_1
2025-09-18 16:42:48.127 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:42:48.127 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 31.5271ms
2025-09-18 16:42:48.128 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 16:42:48.128 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 200 in 32.5464 ms
2025-09-18 16:42:48.128 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 200 null application/json; charset=utf-8 33.2458ms
2025-09-18 16:42:52.261 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 50
2025-09-18 16:42:52.261 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:42:52.262 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 16:42:52.262 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-09-18 16:42:52.272 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_UserId2_0='?' (DbType = Guid), @__request_WorkspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId2_0 AND [u].[WorkspaceId] = @__request_WorkspaceId_1
2025-09-18 16:42:52.272 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:42:52.273 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 10.619ms
2025-09-18 16:42:52.273 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 16:42:52.273 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 200 in 11.5214 ms
2025-09-18 16:42:52.273 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 200 null application/json; charset=utf-8 12.1367ms
2025-09-18 16:44:26.559 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-09-18 16:44:26.559 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:44:26.559 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 0.5077ms
2025-09-18 16:44:26.563 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 50
2025-09-18 16:44:26.563 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:44:26.564 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 16:44:26.564 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-09-18 16:44:26.569 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_UserId2_0='?' (DbType = Guid), @__request_WorkspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId2_0 AND [u].[WorkspaceId] = @__request_WorkspaceId_1
2025-09-18 16:44:26.569 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:44:26.570 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 5.9273ms
2025-09-18 16:44:26.570 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 16:44:26.570 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 200 in 6.7134 ms
2025-09-18 16:44:26.570 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 200 null application/json; charset=utf-8 7.3122ms
2025-09-18 16:45:01.197 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-18 16:45:01.197 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 180722.9040 ms
2025-09-18 16:45:01.198 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=QVO4wu5Cdwmk0xpRMD1eRw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 180723.7617ms
2025-09-18 16:45:01.490 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-18 16:45:01.490 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:45:01.490 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.5212ms
2025-09-18 16:45:01.494 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-18 16:45:01.494 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:45:01.494 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.5931ms
2025-09-18 16:45:01.515 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-18 16:45:01.515 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:45:01.518 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 16:45:01.518 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-18 16:45:01.522 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-18 16:45:01.522 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:45:01.523 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-18 16:45:01.530 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-18 16:45:01.530 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 7.7813 ms
2025-09-18 16:45:01.530 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 8.4963ms
2025-09-18 16:45:01.544 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-18 16:45:01.585 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-18 16:45:01.587 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:45:01.588 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 69.5066ms
2025-09-18 16:45:01.588 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 16:45:01.588 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 72.5056 ms
2025-09-18 16:45:01.589 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 73.8339ms
2025-09-18 16:45:01.812 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=kmw3-hWgxjN_u8idQ0Wl6A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-18 16:45:01.812 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:45:01.813 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-18 16:45:30.777 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-18 16:45:30.778 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:45:30.778 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.7369ms
2025-09-18 16:45:30.784 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-18 16:45:30.786 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:45:30.787 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-18 16:45:30.796 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-18 16:45:30.834 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-18 16:45:30.849 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-18 16:45:31.015 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:45:31.019 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 222.7736ms
2025-09-18 16:45:31.019 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-18 16:45:31.019 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 233.3919 ms
2025-09-18 16:45:31.020 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 235.9728ms
2025-09-18 16:52:25.225 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-18 16:52:25.225 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 443412.2751 ms
2025-09-18 16:52:25.225 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=kmw3-hWgxjN_u8idQ0Wl6A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 443412.8237ms
2025-09-18 16:56:57.321 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-18 16:56:57.321 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:56:57.322 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 1.086ms
2025-09-18 16:56:57.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-18 16:56:57.327 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:56:57.329 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 16:56:57.329 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-18 16:56:57.330 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-18 16:56:57.330 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:56:57.331 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.4481ms
2025-09-18 16:56:57.353 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-18 16:56:57.353 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:56:57.354 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-18 16:56:57.355 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-18 16:56:57.355 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 1.4830 ms
2025-09-18 16:56:57.355 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 2.6241ms
2025-09-18 16:56:57.358 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-18 16:56:57.462 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-18 16:56:57.462 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:56:57.463 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 133.9471ms
2025-09-18 16:56:57.463 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 16:56:57.463 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 135.3992 ms
2025-09-18 16:56:57.463 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 136.5099ms
2025-09-18 16:56:57.738 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=n6iwXlgKCIPMVrR94m4Obg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-18 16:56:57.739 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:56:57.739 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-18 16:57:00.993 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-18 16:57:00.994 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:57:00.994 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.931ms
2025-09-18 16:57:01.001 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-18 16:57:01.001 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:57:01.003 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-18 16:57:01.003 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-18 16:57:01.023 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-18 16:57:01.032 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-18 16:57:01.036 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:57:01.036 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 33.0052ms
2025-09-18 16:57:01.036 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-18 16:57:01.036 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 34.9097 ms
2025-09-18 16:57:01.037 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 36.087ms
2025-09-18 16:59:46.604 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-18 16:59:46.605 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 168865.8367 ms
2025-09-18 16:59:46.605 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=n6iwXlgKCIPMVrR94m4Obg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 168866.7978ms
2025-09-18 16:59:47.035 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-18 16:59:47.035 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:59:47.036 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.6816ms
2025-09-18 16:59:47.043 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-18 16:59:47.044 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:59:47.045 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 16:59:47.045 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-18 16:59:47.054 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-18 16:59:47.055 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:59:47.055 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.7089ms
2025-09-18 16:59:47.059 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-18 16:59:47.082 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-18 16:59:47.082 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:59:47.083 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-18 16:59:47.084 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-18 16:59:47.084 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 1.4153 ms
2025-09-18 16:59:47.084 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 2.0761ms
2025-09-18 16:59:47.143 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-18 16:59:47.143 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:59:47.144 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 98.4019ms
2025-09-18 16:59:47.144 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 16:59:47.144 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 99.8695 ms
2025-09-18 16:59:47.144 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 100.7661ms
2025-09-18 16:59:47.744 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=yKCZYuF0oc32YDqMWlzeJQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-18 16:59:47.744 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:59:47.745 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-18 16:59:51.211 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-18 16:59:51.212 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:59:51.212 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.4035ms
2025-09-18 16:59:51.215 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-18 16:59:51.216 +03:00 [INF] CORS policy execution successful.
2025-09-18 16:59:51.216 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-18 16:59:51.217 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-18 16:59:51.231 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-18 16:59:51.243 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-18 16:59:51.243 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 16:59:51.244 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 27.069ms
2025-09-18 16:59:51.244 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-18 16:59:51.244 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 28.1709 ms
2025-09-18 16:59:51.244 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 28.9091ms
2025-09-18 17:00:14.350 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - null null
2025-09-18 17:00:14.350 +03:00 [INF] CORS policy execution successful.
2025-09-18 17:00:14.350 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/DirectChat/direct - 204 null null 0.2936ms
2025-09-18 17:00:14.354 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/api/DirectChat/direct - application/json 50
2025-09-18 17:00:14.354 +03:00 [INF] CORS policy execution successful.
2025-09-18 17:00:14.355 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 17:00:14.355 +03:00 [INF] Route matched with {action = "CreateOrGetDirect", controller = "DirectChat"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Guid]] CreateOrGetDirect(Application.Commands.ChatRooms.AddDirectChat.AddDirectChatRequest) on controller ChatSystem.UI.Controllers.DirectChatController (ChatSystem.UI).
2025-09-18 17:00:14.366 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_UserId2_0='?' (DbType = Guid), @__request_WorkspaceId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId2_0 AND [u].[WorkspaceId] = @__request_WorkspaceId_1
2025-09-18 17:00:14.405 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__key_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[ActionBy], [c].[Description], [c].[IsDeleted], [c].[LastActionDate], [c].[Metadata], [c].[Title], [c].[Type], [c].[UniqueDirectKey], [c].[WorkspaceId]
FROM [ChatRooms] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Type] = 1 AND [c].[UniqueDirectKey] = @__key_0
2025-09-18 17:00:14.760 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTimeOffset), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p11='?' (DbType = Guid), @p10='?' (DbType = DateTimeOffset), @p12='?' (DbType = Guid), @p13='?' (DbType = Guid), @p14='?' (DbType = Guid), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTimeOffset), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (DbType = Boolean), @p24='?' (DbType = Boolean), @p25='?' (DbType = DateTimeOffset), @p26='?' (Size = 4000), @p27='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ActionBy], [Description], [IsDeleted], [LastActionDate], [Metadata], [Title], [Type], [UniqueDirectKey], [WorkspaceId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE [Users] SET [LastActionDate] = @p10
OUTPUT 1
WHERE [Id] = @p11;
INSERT INTO [RoomMembers] ([Id], [ActionBy], [ChatRoomId], [IsAdmin], [IsDeleted], [LastActionDate], [Metadata], [UserId])
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-09-18 17:00:14.790 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 17:00:14.790 +03:00 [INF] Executed action ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI) in 434.5208ms
2025-09-18 17:00:14.790 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.DirectChatController.CreateOrGetDirect (ChatSystem.UI)'
2025-09-18 17:00:14.790 +03:00 [INF] HTTP POST /api/DirectChat/direct responded 200 in 435.6945 ms
2025-09-18 17:00:14.790 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/api/DirectChat/direct - 200 null application/json; charset=utf-8 436.2502ms
2025-09-18 17:01:57.857 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-18 17:01:57.857 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 130112.3844 ms
2025-09-18 17:01:57.857 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=yKCZYuF0oc32YDqMWlzeJQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 130113.1041ms
2025-09-18 17:01:58.184 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - null null
2025-09-18 17:01:58.184 +03:00 [INF] CORS policy execution successful.
2025-09-18 17:01:58.185 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 204 null null 0.4147ms
2025-09-18 17:01:58.189 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - application/json null
2025-09-18 17:01:58.191 +03:00 [INF] CORS policy execution successful.
2025-09-18 17:01:58.193 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 17:01:58.193 +03:00 [INF] Route matched with {action = "GetChatRoomsByUser", controller = "ChatRooms"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChatRoomsByUser(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.ChatRoomsController (ChatSystem.UI).
2025-09-18 17:01:58.203 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null null
2025-09-18 17:01:58.203 +03:00 [INF] CORS policy execution successful.
2025-09-18 17:01:58.203 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 204 null null 0.3154ms
2025-09-18 17:01:58.211 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Id] = @__request_UserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-18 17:01:58.224 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - null 0
2025-09-18 17:01:58.225 +03:00 [INF] CORS policy execution successful.
2025-09-18 17:01:58.225 +03:00 [INF] Executing endpoint '/chatHub/negotiate'
2025-09-18 17:01:58.226 +03:00 [INF] Executed endpoint '/chatHub/negotiate'
2025-09-18 17:01:58.226 +03:00 [INF] HTTP POST /chathub/negotiate responded 200 in 0.9647 ms
2025-09-18 17:01:58.226 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7003/chathub/negotiate?negotiateVersion=1 - 200 316 application/json 1.673ms
2025-09-18 17:01:58.322 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@__request_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [RoomMemberId], [t].[Id] AS [ChatRoomId], CASE
    WHEN [t].[Type] = 1 THEN (
        SELECT TOP(1) [t0].[FirstName] + N' ' + COALESCE([t0].[LastName], N'')
        FROM [RoomMembers] AS [r0]
        INNER JOIN (
            SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
            FROM [Users] AS [u]
            WHERE [u].[IsDeleted] = CAST(0 AS bit)
        ) AS [t0] ON [r0].[UserId] = [t0].[Id]
        WHERE [r0].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r0].[ChatRoomId] AND [r0].[UserId] <> @__request_UserId_0)
    ELSE [t].[Title]
END AS [Title], CASE
    WHEN [t].[Type] = 2 THEN [t].[Description]
    ELSE NULL
END AS [Description], (
    SELECT COUNT(*)
    FROM [RoomMembers] AS [r1]
    WHERE [r1].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = [r1].[ChatRoomId]) AS [TotalMembers], -1 AS [TotalMessages], [t].[LastActionDate], [r].[IsAdmin]
FROM [RoomMembers] AS [r]
INNER JOIN (
    SELECT [c].[Id], [c].[Description], [c].[LastActionDate], [c].[Title], [c].[Type]
    FROM [ChatRooms] AS [c]
    WHERE [c].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [r].[ChatRoomId] = [t].[Id]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[UserId] = @__request_UserId_0
ORDER BY [t].[LastActionDate] DESC
2025-09-18 17:01:58.323 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.ChatRooms.GetChatRoomDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 17:01:58.323 +03:00 [INF] Executed action ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI) in 129.381ms
2025-09-18 17:01:58.323 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.ChatRoomsController.GetChatRoomsByUser (ChatSystem.UI)'
2025-09-18 17:01:58.323 +03:00 [INF] HTTP GET /api/ChatRooms/GetChatRoomsByUser responded 200 in 131.2604 ms
2025-09-18 17:01:58.323 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/ChatRooms/GetChatRoomsByUser - 200 null application/json; charset=utf-8 133.9005ms
2025-09-18 17:01:58.572 +03:00 [INF] Request starting HTTP/2 CONNECT https://localhost:7003/chathub?id=CKwI61_3nrxTEw88KwZ7QQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - null null
2025-09-18 17:01:58.573 +03:00 [INF] CORS policy execution successful.
2025-09-18 17:01:58.573 +03:00 [INF] Executing endpoint '/chatHub'
2025-09-18 17:02:25.921 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - null null
2025-09-18 17:02:25.921 +03:00 [INF] CORS policy execution successful.
2025-09-18 17:02:25.921 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 204 null null 0.4421ms
2025-09-18 17:02:25.923 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - application/json null
2025-09-18 17:02:25.923 +03:00 [INF] CORS policy execution successful.
2025-09-18 17:02:25.924 +03:00 [INF] Executing endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-18 17:02:25.924 +03:00 [INF] Route matched with {action = "GetUsersByWorkspace", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersByWorkspace(System.Threading.CancellationToken) on controller ChatSystem.UI.Controllers.UsersController (ChatSystem.UI).
2025-09-18 17:02:25.932 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Workspaces] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__request_WorkspaceId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-18 17:02:25.937 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_WorkspaceId_0='?' (DbType = Guid), @__request_UserId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[ActionBy], [u].[ConnectId], [u].[Email], [u].[FirstName], [u].[IsAdmin], [u].[IsDeleted], [u].[LastActionDate], [u].[LastName], [u].[Metadata], [u].[Password], [u].[ProfileImageUrl], [u].[Username], [u].[WorkspaceId]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[WorkspaceId] = @__request_WorkspaceId_0 AND [u].[Id] <> @__request_UserId_1
2025-09-18 17:02:25.938 +03:00 [INF] Executing OkObjectResult, writing value of type 'Domain.Common.ApiResult`1[[System.Collections.Generic.List`1[[Application.Queries.Users.GetUserDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-18 17:02:25.938 +03:00 [INF] Executed action ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI) in 14.3617ms
2025-09-18 17:02:25.938 +03:00 [INF] Executed endpoint 'ChatSystem.UI.Controllers.UsersController.GetUsersByWorkspace (ChatSystem.UI)'
2025-09-18 17:02:25.938 +03:00 [INF] HTTP GET /api/Users/GetUsersByWorkspace responded 200 in 14.9132 ms
2025-09-18 17:02:25.939 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7003/api/Users/GetUsersByWorkspace?workspaceId=d3b333b9-8963-4f25-990a-cc8c56f5fd96 - 200 null application/json; charset=utf-8 15.3804ms
2025-09-18 17:08:22.165 +03:00 [INF] Application is shutting down...
2025-09-18 17:08:22.169 +03:00 [INF] Executed endpoint '/chatHub'
2025-09-18 17:08:22.169 +03:00 [INF] HTTP CONNECT /chathub responded 200 in 383596.6283 ms
2025-09-18 17:08:22.170 +03:00 [INF] Request finished HTTP/2 CONNECT https://localhost:7003/chathub?id=CKwI61_3nrxTEw88KwZ7QQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZDg4MDVkMS0zYjViLTRiOTktYjIyNi1lYzQ3MjkzYjI0ZDQiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoieXpuIiwiV29ya3NwYWNlSWQiOiJkM2IzMzNiOS04OTYzLTRmMjUtOTkwYS1jYzhjNTZmNWZkOTYiLCJleHAiOjE3NTg1MjAzNTgsImlzcyI6IkFtYW5haENoYXQiLCJhdWQiOiJBbWFuYWhDaGF0QW5ndWxhciJ9.xEw7WmQ41clfmFcg8kK6XyvGOf9hYzcq1xd-gB42bjg - 200 null null 383597.0555ms
2025-09-18 17:08:22.172 +03:00 [INF] Connection id "0HNFMN3Q95D0E", Request id "0HNFMN3Q95D0E:0000000B": the application completed without reading the entire request body.
